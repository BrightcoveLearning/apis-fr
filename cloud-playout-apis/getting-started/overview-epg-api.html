---
title: 'Aperçu: API EPG'
parent: Getting Started 
grandparent: Cloud Playout APIs
description: This topic provides and overview of the EPG API, which is used with Cloud Playout.
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="introduction">introduction</h2>
    <p>Il existe deux API liées à <a href="https://studio.support.brightcove.com/cloud-playout/index.html">Lecture en nuage</a>:</p>
    <ul>
      <li>L'API EPG vous permet de récupérer un guide de programmation électronique pour une chaîne Cloud Playout. Cloud Playout génère un EPG conforme à la norme XML TV, comme décrit dans le schéma disponible sur <a href="https://repository.data2type.de/XMLTV/v_1.47/html/index.html">https://repository.data2type.de/XMLTV/v_1.47/html/index.html</a>. <aside class="bcls-aside bcls-aside--information">Assurez-vous de lire le <a href="/cloud-playout-apis/getting-started/epg-best-practices.html">API EPG : Les meilleures pratiques</a> pour voir comment obtenir les meilleures performances.</aside>
			</li>
      <li>L'API Channels vous permet de récupérer des informations sur vos canaux Cloud Playout que vous pouvez afficher dans votre interface utilisateur ou votre page Web. Voir <a href="/cloud-playout-apis/getting-started/overview-channel-api.html">Aperçu: API de canaux</a></li>
  </section>
  <section class="bcls-section">
    <h2 id="authentication">Authentification</h2>
    <p>Les API Cloud Playout utilisent le <a href="/oauth/getting-started/overview-oauth-api-v4.html">Système Brightcove OAuth</a> pour authentifier les demandes via un jeton d'accès transmis dans un en-tête d'autorisation avec la demande :</p>
    <pre><code class="language-http" translate="No">Authorization: Bearer <span class="bcls-input">{access token}</span></code></pre>
    <p>Les jetons d'accès sont récupérés à l'aide de l'API OAuth - voir <a href="/oauth/guides/getting-access-tokens.html">Obtenir des jetons d'accès</a> pour les détails. Vous aurez également besoin des informations d'identification du client pour authentifier les demandes de jetons d'accès. Ceux-ci peuvent être créés dans la section Admin de Studio - voir <a href="/general/managing-api-authentication-credentials.html">Gestion des informations d'identification de l'API</a>. Les autorisations dont vos informations d'identification auront besoin pour l'API EPG sont :</p>
    <figure class="bcls-figure">
      <img class="bcls-image" src="/assets/images/cloud-playout/permissions-epg-api.png" alt="EPG API Permissions">
      <figcaption class="bcls-caption--image">Autorisations API EPG</figcaption>
    </figure>
  </section>
  
  <section class="bcls-section">
    <h2 id="request_parameters">Paramètres de requête EPG</h2>
    <p>Les paramètres de requête facultatifs suivants peuvent être ajoutés à la requête EPG :</p>
    <table class="bcls-table">
      <caption class="bcls-caption--table">Paramètres de requête de l'API EPG</caption>
      <thead class="bcls-table__head">
          <tr>
              <th>Paramètre</th>
              <th>Valeur par défaut</th>
              <th>La description</th>
          </tr>
      </thead>
      <tbody class="bcls-table__body">
          <tr>
              <td><code translate="No">start</code></td>
              <td><samp translate="No">(14 jours avant maintenant)</samp></td>
              <td>La date-heure à partir de laquelle les réponses EPG peuvent être interrogées et renvoyées au format de date ISO 8601</td>
          </tr>
          <tr>
              <td><code translate="No">end</code></td>
              <td><samp translate="No">(maintenant - la date-heure actuelle)</samp></td>
              <td>La date et l'heure jusqu'à laquelle les réponses EPG peuvent être interrogées et renvoyées au format de date ISO 8601</td>
          </tr>
          <tr>
              <td><code translate="No">limit</code></td>
              <td><samp translate="No">(tous les programmes)</samp></td>
              <td>Une valeur entière qui contrôle le nombre de programmes renvoyés dans une requête. <strong>Notez que la valeur limite (par défaut : 100) peut empêcher le retour de tous les programmes pour la période spécifiée. Voir <a href="/cloud-playout-apis/getting-started/epg-best-practices.html">Meilleures pratiques de l'API EPG</a> pour plus d'informations</td>
          </tr>
          <tr>
              <td><code translate="No">include_ads</code></td>
              <td><samp translate="No">faux</samp></td>
              <td>Définissez cette valeur sur true pour inclure des annonces dans la réponse</td>
          </tr>
      </tbody>
    </table>
    <h3>Remarques</h3>
    <ol>
      <li>Les <code translate="No">start</code>/<code translate="No">end</code> la fenêtre ne peut excéder 14 jours. Le début peut avoir 14 jours de retard par rapport à la date et à l'heure actuelles pour interroger l'EPG historique. Vous pouvez également obtenir des données EPG futures jusqu'à 14 jours à compter de la date-heure actuelle.</li>
      <li>Si la différence entre l'heure de fin et l'heure de début est supérieure à 14 jours, l'API ne génère que 14 jours entre l'heure demandée et l'heure de fin ou 14 jours, selon la première éventualité.</li>

      <li>Les deux <code translate="No">start</code> et <code translate="No">end</code> peut accepter des valeurs date-heure avec et sans décalage de fuseau horaire - si aucun décalage de fuseau horaire n'est inclus, l'UTC est supposé.</li>
      <li>
        Les deux <code translate="No">start</code> et <code translate="No">end</code> doit être codé en URI :
        <table class="bcls-table">
          <caption class="bcls-caption--table">Encodage URI</caption>
          <thead class="bcls-table__head">
              <tr>
                  <th>Échantillon ISO 8601</th>
                  <th>URI-Encodé</th>
              </tr>
          </thead>
          <tbody class="bcls-table__body">
              <tr>
                  <td><code translate="No">2020-07-24 15:30:00</code></td>
                  <td><code translate="No">2020-07-24<span class="bcls-highlight">%20</span>15<span class="bcls-highlight">%3A</span>30<span class="bcls-highlight">%3A</span>00</code></td>
              </tr>
              <tr>
                  <td><code translate="No">2020-07-24 15:30:00 +0530</code></td>
                  <td><code translate="No">2020-07-24<span class="bcls-highlight">%20</span>15<span class="bcls-highlight">%3A</span>30<span class="bcls-highlight">%3A</span>00<span class="bcls-highlight">%20%2B</span>0530</code></td>
              </tr>
          </tbody>
      </table>
      </li>
    </ol>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Sample_response">Exemple de réponse API EPG</h2></summary>
      <p>Voici un exemple de réponse de l'API :</p>
  <pre class="line-numbers"><code class="language-xml" translate="No">&lt;?xml version="1.0" encoding="utf-8"?&gt;
    &lt;tv source-info-name="Cloudplayout Schedules" source-info-url="http://www.cloudplayout.qa.brightcove.com"&gt;
        &lt;channel id="9fb8032ff2fe4f55b388d8969c22ca58"&gt;
            &lt;display-name&gt;MyCloudChannel&lt;/display-name&gt;
            &lt;icon src="https://bc-cloudplayout-prod.s3.amazonaws.com/default_channel_image.png"/&gt;
        &lt;/channel&gt;
        &lt;programme channel="9fb8032ff2fe4f55b388d8969c22ca58" start="20201120132000" stop="20201120132228"&gt;
            &lt;title&gt;Frozen&lt;/title&gt;
            &lt;desc&gt;FrozenMultiLanguage&lt;/desc&gt;
            &lt;length units="seconds"&gt;147.605&lt;/length&gt;
            &lt;icon src="https://cf-images.us-east-1.qa.boltdns.net/v1/jit/6063799219001/43d57501-b98a-4708-bdd1-a09081f7a585/main/1280x720/1m13s802ms/match/image.jpg" width="1280" height="720"/&gt;
            &lt;category&gt;video&lt;/category&gt;
            &lt;keyword&gt;eyJ2aWRlb19pZCI6IjcwNzAwNDQxMDk2MjAyIiwib3JkZXIiOjEsInRhZ3MiOiJjaGlsZHJlbixjb21lZHkiLCJjdXN0b21fbWV0YWRhdGEiOnsicmVnaW9uIjoiYWZyaWNhIiwic29uZ3MiOjV9fQ==&lt;/keyword&gt;
        &lt;/programme&gt;
        &lt;programme channel="9fb8032ff2fe4f55b388d8969c22ca58" start="20201120132228" stop="20201120133228"&gt;
            &lt;title&gt;LiveDemo&lt;/title&gt;
            &lt;desc&gt;Live Demo&lt;/desc&gt;
            &lt;length units="seconds"&gt;600.0&lt;/length&gt;
            &lt;icon src="https://img.brightcove.com/cloudplayout/live-icon.jpg" width="1280" height="720"/&gt;
            &lt;category&gt;live&lt;/category&gt;
            &lt;keyword&gt;eyJ2aWRlb19pZCI6IjcwNzAxNDg0MjA3MjAyIiwib3JkZXIiOjIsInRhZ3MiOiJjcC1saXZlLXBsYWNlaG9sZGVyLGR1cmF0aW9uLTAwOjEwOjAwIiwiY3VzdG9tX21ldGFkYXRhIjp7InJlZ2lvbiI6Im5vcnRoIGFtZXJpY2EifX0=&lt;/keyword&gt;
        &lt;/programme&gt;
        &lt;programme channel="9fb8032ff2fe4f55b388d8969c22ca58" start="20201120133228" stop="20201120133327"&gt;
            &lt;title&gt;ChildrenComedy&lt;/title&gt;
            &lt;desc&gt;ChildrenComedy&lt;/desc&gt;
            &lt;length units="seconds"&gt;59.164&lt;/length&gt;
            &lt;icon src="https://cf-images.us-east-1.qa.boltdns.net/v1/jit/6063799219001/9430773f-76f5-476e-964d-a13b40cab90a/main/1280x720/29s582ms/match/image.jpg" width="1280" height="720"/&gt;
            &lt;category&gt;video&lt;/category&gt;
            &lt;keyword&gt;eyJ2aWRlb19pZCI6IjcwNzAxMjE2NDgyMjAyIiwib3JkZXIiOjMsInRhZ3MiOiJyb21hbmNlIiwiY3VzdG9tX21ldGFkYXRhIjp7InJlZ2lvbiI6ImFzaWEiLCJzb25ncyI6NX19&lt;/keyword&gt;
        &lt;/programme&gt;
        &lt;programme&gt;
            ...
        &lt;/programme&gt;
    &lt;/tv&gt;</code></pre>
      <h3>Remarques</h3>
      <ol>
        <li>Les horodatages de début et de fin sont en heure UTC.</li>
        <li>Les <code translate="No">category</code> et <code translate="No">keyword</code> les entrées sont à des fins internes.</li>
      </ol>
    </details>
    <p>Les données EPG contiennent plusieurs données de programme où chaque programme représente des détails sur la vidéo ou l'actif en direct :</p>
<pre class="line-numbers"><code class="language-xml">&lt;programme channel="27963aa756294a7c98ca1c2c459d4ba2" start="20201118232206" stop="20201118232305"&gt; &lt;title&gt;ChildrenComedy&lt;/title&gt; &lt;desc&gt;ChildrenComedy&lt;/desc&gt; &lt;length&gt; units="seconds"&gt;59.164&lt;/length&gt; &lt;icon &gt; src="https://cf-images.us-east-1.qa.boltdns.net/v1/jit/6063799219001/9430773f-76f5-476e-964d-a13b40cab90a/main/1280x720/29s582ms/match/image. jpg » width = "1280" height = "720"&gt; &lt;/ icône&gt; &lt;catégorie&gt; vidéo &lt;/ category&gt; &lt;mot-clé&gt; eyJ2aWRlb19pZCI6IjcwNzAxMjE2NDgyMjAyIiwib3JkZXIiOjEsInRhZ3MiOiJjaGlsZHJlbixjb21lZHkiLCJjdXN0b21fbWV0YWRhdGEiOnsicmVnaW9uIjoiYWZyaWNhIiwic29uZ3MiOjV9fQ == &lt;/ keyword&gt; &lt;/ program&gt;</code></pre>
    <p>Ici le <code translate="No">keyword</code> contient la valeur json codée en base64. La valeur décodée du <code translate="No">keyword</code> est montré ci-dessous.</p>
    <ul>
      <li><code translate="No">video_id</code>: est l'identifiant de la vidéo comme dans Video Cloud.</li>

      <li><code translate="No">order</code>: est l'ordre de l'actif dans la liste du programme Cloud Playout. </li>

      <li><code translate="No">tags</code>: séparés par des virgules (le cas échéant) - associé à la vidéo correspondante dans le cloud vidéo.</li>

      <li>métadonnées personnalisées : (le cas échéant, représentées sous forme de paires nom/valeur) associées à la vidéo correspondante dans le cloud vidéo.</li> 
    </ul>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "video_id":"70701216482202",
  "order":1,
  "tags":"children,comedy",
  "custom_metadata":{
    "region":"africa",
    "songs":5
  }
}</code></pre>
  </section>
  
  <section class="bcls-section">
  <h2 id="epg_bumpers">L'EPG et les pare-chocs</h2>
  <h3>Comment l'EPG gère les pare-chocs</h3>
  <p>L'EPG n'inclura pas les pare-chocs eux-mêmes. Les durées des bumpers seront reflétées de la manière suivante :</p>
  <ul>
    <li>Les durées du bumper de pré-roll sont ajoutées au <strong>Suivant</strong> durée de la vidéo</li>
    <li>Les durées de bumper post-roll sont ajoutées au <strong>précédent</strong> durée de la vidéo</li>
  </ul>
  <h3>Problèmes potentiels</h3>
  <p>Il y a deux choses que vous pouvez faire pour que l'EPG soit inexact :</p>
  <ul>
    <li>Balisage des vidéos pour qu'elles soient à la fois pré-roll (<code translate="No">cp-preroll-bumper</code> ) <strong>ET</strong> post-roll (<code translate="No">cp-postroll-bumper</code> ) rendra l'EPG inexact car cela dépend de la balise pour décider où ajouter la durée. Si la vidéo a les deux balises, la durée du bumper sera ajoutée à la fois à la vidéo précédente et suivante.</li>
    <li>Vous pouvez déplacer les bumpers dans la liste du programme Cloud Playout, mais si vous les organisez de telle sorte qu'un bumper pré-roll soit immédiatement suivi d'un bumper post-roll, les deux bumpers joueront, mais l'API EPG les ignorera ainsi que le calendrier pour cela. période sera vide.</li>
  </ul>
</section>
  <section class="bcls-section">
    <h2 id="limitations">limites</h2>
    <ol>
      <li>L'EPG est généré au meilleur effort / proche de la précision.</li>
      <li>Lorsque l'EPG est initialement construit à partir de la liste de lecture, il peut y avoir une erreur d'heure de début car la lecture en nuage prend un certain temps pour initier la commutation.</li>
      <li>
        L'EPG peut ne pas être cohérent pour chaque récupération lorsque la liste de lecture est modifiée, car il est construit dynamiquement en fonction des informations actuelles qu'il contient. Certaines actions qui modifieront l'EPG incluent la réorganisation de la liste de lecture ou l'ajout/la suppression d'éléments dans la liste de lecture.
      </li>
      <li>Si un dysfonctionnement se produit dans la commutation et que l'heure de commutation n'est pas précise, il pourrait y avoir une imprécision de transit pour le futur EPG. Quelques exemples d'actions qui pourraient provoquer cela seraient un changement de liste de lecture ou la suppression de l'actif actif actuel dans la liste de lecture.</li>
      <li>Les consommateurs de l'EPG devraient le demander aussi près que possible du temps réel pour obtenir la version la plus précise.</li>
    </ol>
  </section>
</article>