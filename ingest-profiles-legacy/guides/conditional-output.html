---
title: 'Sortie conditionnelle'
description: 'Dans cette rubrique, vous apprendrez à créer des sorties conditionnelles dans un profil d'ingestion personnalisé en ignorant les rendus si le fichier source ne remplit pas certaines conditions.'
parent: Guides 
grandparent: Ingest Profiles API Legacy
layout: staging
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="Limitations">Limites</h2>
    
    <aside class="bcls-aside bcls-aside--information">Remarques:
    <ul>
      <li>Les paramètres de sortie conditionnels décrits dans cette rubrique s'appliquent <strong>seul</strong> aux profils d'ingestion hérités, <strong>ne pas</strong> aux profils de livraison dynamique ou d'encodage contextuel.</li>
      <li>Pour utiliser des sorties conditionnelles avec l'ingestion/le transcodage Dynamic Delivery, contactez l'assistance Brightcove.</li>
    </ul>
    </aside>
    </section>
    
    <section class="bcls-section">
    <h2 id="why_skip_renditions">Pourquoi ignorer les rendus ?</h2>
    
    <p>Ignorer les rendus est utile si la qualité des vidéos source que vous ingérez varie considérablement. C'est souvent le cas, par exemple, pour les organes de presse qui utilisent des vidéos capturées par des téléphones ou d'autres appareils sur le terrain.</p>
    
    <p>Sans sorties conditionnelles, le système Dynamic Ingest créera exactement autant de rendus que ceux spécifiés dans le profil.</p>
    
    <p>Par exemple, disons que vous ingérez une vidéo de faible qualité (débit vidéo d'environ 820 kbit/s) à l'aide d'un profil qui inclut les rendus vidéo inconditionnels suivants.</p>
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">Rendus vidéo</caption>
      <thead class="bcls-table__head">
        <tr>
          <th>Format</th>
          <th>Bitrate audio</th>
          <th>Bitrate vidéo</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td style="text-align:center;">mp4</td>
          <td style="text-align:center;">64</td>
          <td style="text-align:center;">450</td>
        </tr>
        <tr>
          <td style="text-align:center;">mp4</td>
          <td style="text-align:center;">96</td>
          <td style="text-align:center;">900</td>
        </tr>
        <tr>
          <td style="text-align:center;">mp4</td>
          <td style="text-align:center;">128</td>
          <td style="text-align:center;">1700</td>
        </tr>
        <tr>
          <td style="text-align:center;">HLS</td>
          <td style="text-align:center;">64</td>
          <td style="text-align:center;">450</td>
        </tr>
        <tr>
          <td style="text-align:center;">HLS</td>
          <td style="text-align:center;">96</td>
          <td style="text-align:center;">700</td>
        </tr>
        <tr>
          <td style="text-align:center;">HLS</td>
          <td style="text-align:center;">96</td>
          <td style="text-align:center;">900</td>
        </tr>
        <tr>
          <td style="text-align:center;">HLS</td>
          <td style="text-align:center;">96</td>
          <td style="text-align:center;">1200</td>
        </tr>
        <tr>
          <td style="text-align:center;">HLS</td>
          <td style="text-align:center;">128</td>
          <td style="text-align:center;">1700</td>
        </tr>
        <tr>
          <td style="text-align:center;">HLS</td>
          <td style="text-align:center;">128</td>
          <td style="text-align:center;">2000</td>
        </tr>
      </tbody>
    </table>
    
    <p>Les rendus résultants dans Studio ressembleraient à ceci :</p>
    
    <figure class="bcls-figure"><img class="bcls-image" alt="Renditions for Low Quality Video" src="//learning-services-media.brightcove.com/doc-assets/video-cloud-apis/ingest-profiles-api/guides/conditional-outputs/renditions-for-low-quality.png" />
    <figcaption class="bcls-caption--image">Rendus pour la vidéo de faible qualité</figcaption>
    </figure>
    
    <p>Notez que les trois derniers rendus HLS (en surbrillance) sont identiques en termes de débit binaire et que le débit binaire n'est que légèrement supérieur à celui du prochain meilleur rendu HLS. Notez également que la différence entre les débits binaires des deux meilleurs rendus MP4 est faible. La raison en est que le transcodage ne peut jamais améliorer le débit de la source, et la source ici avait un débit moyen d'environ 800 kbps, donc les rendus avec des débits spécifiés plus élevés se retrouvent avec quelque chose dans cette plage (vous verrez de petites différences en raison des différentes façons dont le débit binaire moyen est calculé pour les formats vidéo segmentés et non segmentés).</p>
    <!-- <p>You might also note that the renditions all have exactly the same dimensions. These are in fact the dimensions of the source, which are smaller than those for any of the renditions specified in the profile. Video Cloud will never upsize a video during transcoding, because this would result in significant degradation of the visual quality.</p> -->
    
    <p>Les quatre derniers rendus de l'ensemble sont donc essentiellement redondants, offrant peu ou pas d'amélioration de la qualité par rapport aux rendus de « qualité inférieure », mais ils sont quand même créés et stockés. Cela peut être évité en utilisant des sorties conditionnelles qui empêchent la génération d'un rendu si la source ne correspond pas aux critères de qualité que vous spécifiez.</p>
    
    <aside class="bcls-aside bcls-aside--information">Notez que nous avons ajouté des paramètres de sortie conditionnels au <a href="/ingest-profiles-legacy/references/standard-ingest-profiles-legacy-transcoding.html">Profils standards</a> et vous recommandons d'utiliser ces profils dans la mesure du possible.</aside>
    </section>
    
    <section class="bcls-section">
    <h2 id="Implementation">Mise en œuvre</h2>
    
    <p>Vous pouvez ajouter un <code translate="No">skip</code> s'opposer à certaines des restitutions. Les <code translate="No">skip</code> L'objet contient une ou plusieurs conditions, et si ces conditions ne sont pas remplies, le rendu ne sera pas créé.</p>
    
    <aside class="bcls-aside bcls-aside--information">Les profils standard ignorent automatiquement les rendus si le débit binaire de la vidéo source est inférieur au débit binaire spécifié pour le rendu. Si vous souhaitez ce comportement pour les profils personnalisés, vous devez l'ajouter de la manière décrite dans cette rubrique.</aside>
    </section>
    
    <section class="bcls-section">
    <h2 id="Notes_on_usage">Remarques sur l'utilisation</h2>
    
    <ol>
      <li>Un profil d'ingestion <strong>doit</strong> inclure au moins un rendu non désactivable - si vous essayez de créer un profil dans lequel tous les rendus sont désactivables, vous recevrez une erreur.</li>
      <li>Vous devez vous assurer qu'au moins un rendu est créé pour chaque type de contenu. Par exemple:
      <ul>
        <li>Si vous créez à la fois des rendus audio uniquement et vidéo, vous devez disposer d'un rendu non désactivable pour chacun</li>
        <li>Si vous utilisez DRM, vous devez disposer d'un rendu non désactivable pour chaque format qui fonctionne avec ce type de DRM (Smooth, HLS, DASH, etc.)</li>
      </ul>
      </li>
    </ol>
    </section>
    
    <section class="bcls-section">
    <h2 id="syntax">Syntaxe</h2>
    
    <p>La syntaxe pour le <code translate="No">skip</code> l'objet que vous pouvez ajouter à une spécification de rendu est le suivant :</p>
    
    <pre class="line-numbers">
            <code class="language-json" translate="No">"skip": {
                "condition1": "value1",
                "condition2": 1300,
                ...etc
            }</code></pre>
    
    <aside class="bcls-aside bcls-aside--information">Notez que les valeurs numériques doivent <strong>ne pas</strong> être mis entre guillemets. Cela fait <strong>ne pas</strong> s'appliquent aux valeurs de taille telles que "640x360".</aside>
    
    <h3>Exemple</h3>
    
    <pre class="line-numbers">
            <code class="language-json" translate="No">"renditions": [
                {
                  "media_type": "video",
                  "reference_id": "ts1",
                  "format": "ts",
                  "type": "segmented",
                  "audio_codec": "aac",
                  "audio_bitrate": 96,
                  "video_bitrate": 1200.
                  "video_codec": "h264",
                  "keyframe_rate": 0.5,
                  "max_frame_rate": 30,
                  "width": 1280,
                  "height": 720,
                  "h264_profile": "main",
                  "skip": {
                      "min_video_bitrate": 1000,
                      "min_size": "640x360"
                    }
                },
                ... etc
            ]</code></pre>
    
    <p>Pour le profil (fragment) ci-dessus, le rendu affiché sera créé <strong>seul</strong> si la vidéo source a un débit vidéo d'au moins 1 000 kbps et une taille d'image d'au moins 640 px x 360 px.</p>
    
    <aside class="bcls-aside bcls-aside--warning">Un profil d'ingestion <strong>doit</strong> inclure au moins un rendu non désactivable. Si vous essayez de créer un profil dans lequel chaque rendu contient un <code translate="No">skip</code> objet, l'API Ingest Profiles renverra une erreur.</aside>
    </section>
    
    <section class="bcls-section">
    <h2 id="skip_fields">Ignorer les champs</h2>
    
    <p>Vous trouverez ci-dessous les champs (conditions) qui peuvent être utilisés dans le <code translate="No">skip</code> objet:</p>
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">Ignorer les champs</caption>
      <thead class="bcls-table__head">
        <tr>
          <th>biens</th>
          <th>taper</th>
          <th>la description</th>
          <th>défaut</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td ><code translate="No">min_audio_bitrate</code></td>
          <td >entier</td>
          <td >le débit binaire audio minimum que la source doit avoir (kbps)</td>
          <td >nul</td>
        </tr>
        <tr>
          <td ><code translate="No">max_audio_bitrate</code></td>
          <td >entier</td>
          <td >le débit binaire audio maximum que la source doit avoir (kbps)</td>
          <td >nul</td>
        </tr>
        <tr>
          <td ><code translate="No">min_video_bitrate</code></td>
          <td >entier</td>
          <td >le bitrate vidéo minimum que la source doit avoir (kbps)</td>
          <td >nul</td>
        </tr>
        <tr>
          <td ><code translate="No">max_video_bitrate</code></td>
          <td >entier</td>
          <td >le débit vidéo maximum que la source doit avoir (kbps)</td>
          <td >nul</td>
        </tr>
        <tr>
          <td ><code translate="No">require_audio</code></td>
          <td >booléen</td>
          <td >la source doit inclure une piste audio</td>
          <td >nul</td>
        </tr>
        <tr>
          <td ><code translate="No">require_video</code></td>
          <td >booléen</td>
          <td >la source doit inclure une piste vidéo</td>
          <td >nul</td>
        </tr>
        <tr>
          <td ><code translate="No">min_size</code></td>
          <td >chaîne de la forme "largeurxhauteur" (par exemple <code translate="No">"400x225"</code>)</td>
          <td >la source doit être au moins cette résolution</td>
          <td >nul</td>
        </tr>
        <tr>
          <td ><code translate="No">max_size</code></td>
          <td >chaîne de la forme "largeurxhauteur" (par exemple <code translate="No">"1920x1080"</code>)</td>
          <td >la source doit être au plus cette résolution</td>
          <td >nul</td>
        </tr>
      </tbody>
    </table>
    </section>
    </article>
