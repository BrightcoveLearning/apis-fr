---
title: 'Aperçu: Ingérer l'API des profils'
description: 'Dans cette rubrique, vous obtiendrez un aperçu de l'API Ingest Profiles. L'API Ingest Profiles vous permet de créer, récupérer, mettre à jour et supprimer des profils de rendu pour votre compte Video Cloud. <aside class="bcls-aside bcls-aside--information">Notez que ce guide est destiné aux <strong>système d'ingestion hérité</strong> ; la plupart des clients sont sur le <strong><a href="/ingest-profiles/">Système de livraison dynamique</a></strong></aside>'
parent: Code Samples 
grandparent: Ingest Profiles API Legacy
layout: staging
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="Managing_Ingest_Profiles">Gestion des profils d'ingestion</h2>
    
    <aside class="bcls-aside bcls-aside--information">Notez que cette version de l'aperçu concerne les comptes activés pour les comptes utilisant l'ancien système d'ingestion. Ces comptes peuvent être activés ou non pour <a href="/dynamic-ingest/ingest-guides/context-aware-encoding.html">Encodage contextuel</a>. Il existe un aperçu séparé pour <a href="/ingest-profiles/getting-started/overview-ingest-profiles-api-dynamic-delivery-context-aware-encoding.html">Profils de livraison dynamique</a>.</aside>
    
    <p>Les profils d'ingestion sont utilisés comme spécification pour le transcodage lorsque vous téléchargez ou retranscodez des vidéos. Vous pouvez gérer ces profils à l'aide de l'API Ingest Profiles.</p>
    
    <aside class="bcls-aside bcls-aside--information">Remarque : vous pouvez également gérer vos profils d'ingestion via <a href="https://studio.support.brightcove.com/admin/managing-ingest-profiles.html">Studio</a> , et nous vous recommandons de le faire, sauf si vous intégrez Video Cloud à votre propre CMS.</aside> <aside class="bcls-aside bcls-aside--warning">Si un utilisateur extrait par programme un profil dans le but de mettre à jour ce profil à l'aide du contenu récupéré, l'utilisateur devra nettoyer le profil, en supprimant des éléments tels que « id » pour les rendus, mais pas le profil, et « version » doit être entièrement supprimé .</aside>
    </section>
    
    <section class="bcls-section">
    <h2 id="glossary">Glossaire des termes</h2>
    
    <dl>
      <dt>Profil JSON</dt>
      <dd>
      <p>Le terme "profil JSON" ci-dessous désigne la représentation JSON d'un objet de profil. Ils contiennent des champs de profil de niveau supérieur et une collection d'objets de rendu sous forme de liste. Voir <a href="/ingest-profiles-legacy/references/standard-ingest-profiles-legacy-transcoding.html">Profils standards</a> pour voir le JSON pour les profils standard inclus dans chaque compte et <a href="/dynamic-ingest/ingest-guides/ingesting-content-drm.html">Sécurité du contenu (DRM et HLSe)</a> pour des exemples de profils qui incluent l'emballage DRM.</p>
      </dd>
      <dt>Carte d'indentité</dt>
      <dd>
      <p>UNE <code translate="No">profile id</code> peut être soit le <code translate="No">id</code> ou <code translate="No">name</code> champ de niveau supérieur dans un profil. Dans cet exemple (un fragment de profil) :</p>
    
      <pre class="line-numbers">
    <code class="language-json" translate="No">{
        "id": "5591b5ede4b0f7138939ad8c",
        "version": 4,
        "name": "screencast-1280",
        "description": "A high resolution profile optimized for screencasts with 1280 x 720 resolution.", ...</code></pre>
    
      <p>"screencast-1280" ou "5591b5ede4b0f7138939ad8c" sont tous deux des identifiants de profil valides. Lorsque vous créez un profil pour la première fois, vous fournissez un profil avec un nom mais sans identifiant, et la réponse contiendra le profil créé, y compris son identifiant. Vous pouvez ensuite utiliser l'un ou l'autre lors de tout appel d'API ultérieur.</p>
      </dd>
      <dt>Pièce d'identité</dt>
      <dd>
      <p>UNE <code translate="No">reference_id</code> identifie de manière unique un rendu dans un profil. Les identifiants de référence sont utilisés pour l'empaquetage DRM et peuvent être utilisés à d'autres fins à l'avenir. En plus d'être uniques dans le profil, les identifiants de référence peuvent être n'importe quelle chaîne - ils ne doivent pas inclure d'espaces. Nous vous recommandons d'utiliser un schéma qui facilitera l'identification du format du rendu, par exemple : <code translate="No">mp4_1</code> , <code translate="No">mp4_2</code> , <code translate="No">hls1</code> , <code translate="No">hls2</code> , etc.</p>
      </dd>
      <dt>Version du profil</dt>
      <dd>
      <p>UNE <code translate="No">version</code> est le numéro de révision d'un profil pour un compte. Il est représenté par une valeur entière longue. Remarque : il n'est pas cité dans la représentation JSON.</p>
      </dd>
      <dt>Profil actif</dt>
      <dd>
      <p>Un profil est <code translate="No">active</code> s'il peut être utilisé pour les téléchargements. Par exemple, si vous mettez à jour un profil, vous obtenez un nouveau profil avec un numéro de version incrémenté qui est actif et l'ancienne version devient inactive.</p>
      </dd>
      <dt>Profil standard</dt>
      <dd>
      <p>Un profil est <code translate="No">standard</code> s'il est fourni pour être utilisé par Brightcove (c'est-à-dire qu'il ne s'agit pas d'un profil personnalisé spécifique à un seul compte).</p>
      </dd>
      <dt>Profil par défaut</dt>
      <dd>
      <p>Un profil est <code translate="No">default</code> s'il est utilisé lorsqu'aucun profil n'est explicitement choisi. Si vous n'avez pas de configuration de compte ou si vous ne définissez pas de profil par défaut dans votre configuration, l'un des <code translate="No">standard</code> les profils seront utilisés conformément à votre type de compte.</p>
      </dd>
    </dl>
    </section>
    
    <section class="bcls-section">
    <h2 id="serviceURL">URL de base</h2>
    
    <p>L'URL du service est :</p>
    
    <pre class="line-numbers">
    <code class="language-http" translate="No">https://ingestion.api.brightcove.com/v1/</code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="authorization">Autorisation</h2>
    
    <p>L'autorisation pour l'API se fait via l'implémentation OAuth2 de Brightcove. Vous aurez besoin d'informations d'identification client (un identifiant client et un secret client) disposant des autorisations pour les opérations suivantes sur votre ou vos comptes :</p>
    
    <ul>
      <li><code translate="No">video-cloud/ingest-profiles/profile/read</code></li>
      <li><code translate="No">video-cloud/ingest-profiles/profile/write</code></li>
      <li><code translate="No">video-cloud/ingest-profiles/account/read</code></li>
      <li><code translate="No">video-cloud/ingest-profiles/account/write</code></li>
    </ul>
    
    <p>Pour obtenir un <code translate="No">client_id</code> et <code translate="No">client_secret</code> , vous devrez accéder à l'interface utilisateur OAuth et enregistrer une application :</p>
    
    <ul>
      <li><a href="/general/managing-api-authentication-credentials.html">Gestion des informations d'authentification API</a></li>
    </ul>
    
    <p>Vous pouvez également obtenir vos informations d'identification via CURL ou Postman - voir :</p>
    
    <ul>
      <li><a href="/oauth/guides/oauth-create-client-credentials-using-curl.html">Obtenir les informations d'identification du client à l'aide de CURL</a></li>
      <li><a href="/oauth/guides/oauth-create-client-credentials-using-postman.html">Obtenez les informations d'identification du client à l'aide de Postman</a></li>
    </ul>
    
    <p>Vous utiliserez vos informations d'identification client pour obtenir des jetons d'accès qui vous permettront de passer des appels à l'API. Les jetons d'accès sont transmis dans un en-tête d'autorisation :</p>
    
    <pre class="line-numbers">
    <code class="language-http" translate="No">Authorization: Bearer {your_access_token}</code></pre>
    
    <p>Voir le <a href="/oauth/getting-started/overview-oauth-api-v4.html">Section Oauth</a> pour plus d'informations.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="Maximum_renditions">Rendus maximaux</h2>
    
    <p>Le nombre maximal de rendus que vous pouvez définir dans un profil d'acquisition est de 25. Si vous définissez plus que ce nombre, la demande renvoie une réponse d'erreur 409 : le nombre de rendus de profil dépasse la limite de rendu configurée.</p>
    
    <aside class="bcls-aside bcls-aside--warning">Si vous incluez des rendus d'images pour l'affiche (vidéo fixe) et la vignette, ceux-ci comptent comme deux des vingt-cinq rendus maximum.</aside>
    </section>
    
    <h2 id="conditional_outputs">Sorties conditionnelles</h2>
    
    <p>Si la qualité des vidéos que vous ingérez varie considérablement - par exemple, vos vidéos peuvent inclure du contenu généré par l'utilisateur créé sur des téléphones dotés d'appareils photo de faible qualité - vous souhaiterez peut-être rendre la génération de certains rendus conditionnelle au débit ou à une autre propriété du source vidéo. Cela empêchera la création et le stockage de rendus redondants. Voir <a href="/ingest-profiles-legacy/guides/conditional-output.html">Sorties conditionnelles</a> pour plus de détails sur la façon de procéder.</p>
    
    <section class="bcls-section">
    <h2 id="accountOperations">Opérations de compte</h2>
    
    <p>Au niveau du compte, vous pouvez obtenir tous les profils du compte et en créer de nouveaux.</p>
    
    <h3>Point de terminaison</h3>
    
    <pre class="line-numbers">
    <code class="language-http" translate="No">/accounts/{account_id}/profiles</code></pre>
    
    <h3>Obtenez tous les profils</h3>
    
    <p>Pour obtenir tous les profils du compte (y compris <a href="/ingest-profiles-legacy/references/standard-ingest-profiles-legacy-transcoding.html">profils standards</a>), vous soumettez une demande GET au point de terminaison indiqué ci-dessus.</p>
    
    <h3>Créer un profil</h3>
    
    <p>Pour créer un nouveau profil, vous soumettez une demande POST au point de terminaison indiqué ci-dessus, en incluant les données JSON pour le profil en tant que corps de la demande. Voir le <a href="#sampleProfile">exemple de profil</a> ci-dessous pour un exemple des données JSON, et le <a href="/ingest-profiles-legacy/references/ingest-profiles-api-fields-reference-legacy-ingest.html">Référence des champs de profil</a> pour les champs autorisés.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="singleProfileOperations">Opérations à profil unique</h2>
    
    <p>Pour les profils individuels, vous pouvez obtenir le profil par nom ou identifiant, remplacer un profil et supprimer un profil.</p>
    
    <h3>Point de terminaison</h3>
    
    <pre class="line-numbers">
    <code class="language-http" translate="No">/accounts/{account_id}/profiles/{profile_id}</code></pre>
    
    <p class="slide">Pour le <code translate="No">profile_id</code> , vous pouvez utiliser soit :</p>
    
    <ul>
      <li class="slide">nom (par exemple équilibré-haute définition)</li>
      <li class="slide">identifiant généré (par exemple 54de14cce4b0a6d2bf9cb08a)</li>
    </ul>
    
    <h3>Obtenir un profil par identifiant</h3>
    
    <p>Pour récupérer un seul profil, envoyez une requête GET au point de terminaison indiqué ci-dessus.</p>
    
    <h3>Mettre à jour un profil</h3>
    
    <p>Pour mettre à jour un profil, faites une demande PUT au point de terminaison ci-dessus, y compris le <em>Achevée</em> Données JSON pour le profil dans le corps de la requête.</p>
    
    <aside class="bcls-aside bcls-aside--warning">Remarque : le JSON du profil mis à jour <strong>doit</strong> inclure le <code translate="No">id</code> biens.</aside>
    
    <h3>Supprimer un profil</h3>
    
    <p>Pour supprimer un profil, faites une demande DELETE au point de terminaison ci-dessus.</p>
    
    <div class="BCL-aside">
    <p>Cette action est <strong>irréversible</strong></p>
    
    <aside class="bcls-aside bcls-aside--warning">Vous ne pouvez pas mettre à jour ou supprimer l'un des <a href="/ingest-profiles-legacy/references/standard-ingest-profiles-legacy-transcoding.html">Profils standards</a> ou des profils par défaut (vidéo à la demande ou en direct).</aside>
    </div>
    
    <div class="bcls-section" id="defaultProfile">
    <h2>Opérations de profil par défaut</h2>
    
    <p>Vous pouvez obtenir, définir ou mettre à jour les profils de vidéo à la demande et de vidéo en direct par défaut pour votre compte à l'aide du point de terminaison :</p>
    
    <pre class="line-numbers">
    <code class="language-http" translate="No">/accounts/{account_id}/configuration</code></pre>
    
    <h3>Obtenir le profil par défaut</h3>
    
    <p>Récupérez le profil par défaut de votre compte en effectuant une demande GET au point de terminaison ci-dessus.</p>
    
    <p>Si aucun profil par défaut n'a été défini, le profil par défaut du système sera renvoyé.</p>
    
    <h3>Définir le profil par défaut</h3>
    
    <p>Pour définir le profil par défaut, envoyez une requête POST au point de terminaison indiqué ci-dessus, en incluant le JSON dans le corps de la requête :</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "account_id": {account_id},
      "default_profile_id": {default_profile_id}
    }</code></pre>
    
    <p>Pour le <code translate="No">default_profile_id</code> , vous pouvez utiliser l'un des éléments suivants :</p>
    
    <ul>
      <li class="slide">nom (par exemple équilibré-haute définition)</li>
      <li class="slide">identifiant généré (par exemple 54de14cce4b0a6d2bf9cb08a)</li>
    </ul>
    
    <h3>Mettre à jour le profil par défaut</h3>
    
    <p>Pour mettre à jour le profil par défaut, envoyez une requête PUT au point de terminaison indiqué ci-dessus, en incluant ce JSON dans le corps de la requête :</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "id": {configuration_id},
      "account_id": {account_id},
      "default_profile_id": {default_profile_id}
    }</code></pre>
    
    <p>Obtenir le <code translate="No">configuration_id</code> de la réponse à une requête GET ou POST.</p>
    
    <h4>Définir le profil en direct par défaut</h4>
    
    <p>La définition du profil en direct par défaut est exactement la même chose que la définition du profil de vidéo à la demande par défaut, à l'exception de cette modification dans le corps de la demande :</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "id": {configuration_id},
      "account_id": {account_id},
      <strong>"default_live_profile_id": {default_live_profile_id}</strong>
    }</code></pre>
    
    <h3>Remarques:</h3>
    
    <ul>
      <li>Si vous spécifiez un profil inexistant, la demande échouera</li>
    </ul>
    </div>
    </section>
    
    <section class="bcls-section">
    <h2 id="sampleProfile">Exemple de profil</h2>
    
    <p>Les <a href="/ingest-profiles-legacy/references/standard-ingest-profiles-legacy-transcoding.html">Profils standards</a> document vous montrera tous les profils par défaut qui existent actuellement pour tous les comptes Video Cloud.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="watermarks">Filigranes</h2>
    
    <p>Si vous souhaitez ajouter des filigranes (ou une image de logo) à vos vidéos, vous pouvez utiliser les champs de filigrane dans votre profil d'ingestion.</p>
    
    <aside class="bcls-aside bcls-aside--information">Notez que ces champs doivent être ajoutés à chaque rendu vidéo.</aside>
    
    <p>Voici un exemple de profil de rendu avec des filigranes :</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">...
    "renditions": [
        {
          "media_type": "video",
          "id": "559697ece4b072e9641b8404",
          "reference_id": "mp0",
          "format": "mp4",
          "audio_codec": "aac",
          "audio_bitrate": 64,
          "video_codec": "h264",
          "speed": 3,
          "video_bitrate": 450,
          "decoder_bitrate_cap": 771,
          "decoder_buffer_size": 1028,
          "keyframe_rate": 0.5,
          "max_frame_rate": 30,
          "width": 480,
          "height": 270,
          "h264_profile": "baseline",
          "watermarks": [
            {
              "y": "70%",
              "width": "20%",
              "url": "http://learning-services-media.brightcove.com/images/bc_logo.png"
            }
          ]
      }, ...</code></pre>
    
    <p>Voir la &lt;a href="https://zencoder.support.brightcove.com/encoding-settings/assets/encoding-settings-watermarks.html&gt;Référence des champs de filigrane&lt;/a&gt; pour une explication complète des champs.&lt;/ p&gt; &lt;/section&gt; &lt;/article&gt;