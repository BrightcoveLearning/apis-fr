---
title: 'Pas à pas: API du système de livraison'
description: 'Ce document fournit une introduction pratique à l'utilisation de l'API du système de livraison pour créer un référentiel (dépôt), et dans le dépôt, vous enregistrerez et mettrez à jour un plug-in.'
parent: Delivery System API 
grandparent: Home
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
    <summary>{{ page.description }}</summary>
    <section id="Overview" class="bcls-section">
        <h2>Aperçu</h2>

        <p>Voici les étapes que vous effectuerez :</p>

        <ul>
            <li>Créer un dépôt à l'aide de l'API du système de livraison</li>
            <li>Créer un dossier local pour le stockage de fichiers</li>
            <li>Créez un plugin et copiez-le dans le dépôt</li>
            <li>Modifiez le lecteur pour utiliser le nouveau plugin</li>
            <li>Modifiez le plugin et observez que le joueur utilise le plugin modifié</li>
        </ul>

        <p class="BCL-aside">Noter: Si vous êtes un utilisateur expérimenté de Git, vous verrez que certains des appels d'API exécutent des fonctionnalités équivalentes que vous pouvez également utiliser dans Git. En fait, certains des appels d'API de manipulation de fichiers exécutent simplement des commandes Git.</p>
    </section>

    <section id="prerreqs" class="bcls-section">
        <h2>Conditions préalables</h2>

        <div class="BCL-concept">
            <p>Pour commencer ces instructions étape par étape, il est supposé que vous avez terminé le <a href="/player-management/getting-started/step-step-player-management.html">Pas à pas: Gestion des joueurs</a>. En complétant cette activité, vous avez défini les variables d'environnement suivantes dans votre système de ligne de commande :</p>

            <ul>
                <li>{account_id}</li>
                <li>$EMAIL</li>
                <li>{player_id}</li>
            </ul>
        </div>
    </section>

    <section id="createrepo" class="bcls-section">
        <h2>Créer un dépôt</h2>

        <div class="BCL-concept">
            <p>Vous allez maintenant utiliser l'API du système de livraison pour créer un référentiel et copier des fichiers dans ce référentiel. Une fois le dépôt créé, vous pouvez également utiliser l'API pour répertorier les dépôts, afficher les détails d'un dépôt, supprimer les dépôts, etc., mais dans de nombreux flux de travail, cela n'est pas nécessaire.</p>

            <p>Dans une instruction curl pour créer le nouveau référentiel, vous utiliserez un HTTP <code translate="No">PUT</code> méthode et incluez le nom du nouveau référentiel dans l'URL. Exécutez cette instruction curl pour créer un référentiel nommé <code translate="No">firstRepo</code>.</p>

            <pre class="line-numbers">
    <code class="language-bash" translate="No">curl \
      --user $EMAIL \
      --request PUT \
      https://repos.api.brightcove.com/v1/accounts/{account_id}/repos/firstRepo
    </code></pre>
            <!-- <code data-gist-id="8939637" data-gist-hide-footer="true" data-gist-line="1-5"></code><br /> -->

            <p>Vous recevrez une réponse confirmant la création du dépôt. La réponse affichera : le nom et l'URL publique du dépôt.</p>

            <ul>
                <li>Nom: Nom du dépôt</li>
                <li>URL_publique : L'URL publique du dépôt</li>
                <li>URL_repo : L'URL du référentiel</li>
            </ul>

            <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "name": "firstRepo",
      "public_url": "http://players.brightcove.net/1507807800001/firstRepo",
      "repo_url": "https://repos.api.brightcove.com/v1/accounts/1507807800001/repos/firstRepo"
    }</code></pre>
            <!-- <code data-gist-id="8939637" data-gist-hide-footer="true" data-gist-line="7-11"></code> -->
        </div>
    </section>

    <section id="connectrepofolder" class="bcls-section">
        <h2>Créer le dossier</h2>

        <div class="BCL-concept">
            <p>Ensuite, vous devez créer un dossier localement sur votre machine pour le stockage des fichiers associés à votre Brightcove Player. Dans un emplacement de votre choix créez le dossier puis déplacez (<code translate="No">cd</code> ) dans ce dossier.</p>

            <pre class="line-numbers">
    <code class="language-bash" translate="No">mkdir firstRepo
    cd firstRepo</code></pre>
            <!-- <code data-gist-id="8939637" data-gist-hide-footer="true" data-gist-line="13-14"></code><br /> -->
        </div>
    </section>

    <section id="createplugin" class="bcls-section">
        <h2>Créer un plugin</h2>

        <p>Vous allez maintenant créer un plugin dans votre dossier à copier dans le référentiel. Utilisez le même plugin de l'étape par étape : Player Management, sauf modifier le texte affiché. Créez le fichier, collez le texte ci-dessous dans le fichier, puis enregistrez-le. Utilisez le même nom de fichier que celui utilisé dans l'étape par étape : Gestion des joueurs, <code translate="No">first-plugin.js</code>.</p>

        <pre class="line-numbers">
    <code class="language-javascript" translate="No">videojs.registerPlugin('firstPlugin', function() {
      var player = this,
      overlay = document.createElement('p');
      overlay.className = 'vjs-overlay';
      overlay.innerHTML = "NEW TEXT!";
      player.el().appendChild(overlay);
    });</code></pre>
        <!-- <p><code data-gist-id="8939637" data-gist-hide-footer="true" data-gist-line="19-25"></code></p> -->

        <p>Vous allez maintenant copier le fichier de plug-in nouvellement créé dans le référentiel. Utilisez l'instruction cURL suivante pour effectuer cette tâche.</p>

        <pre class="line-numbers">
    <code class="language-bash" translate="No">curl \
      --user $EMAIL \
      --form contents=@first-plugin.js \
      --request PUT \
      https://repos.api.brightcove.com/v1/accounts/{account_id}/repos/firstRepo/files/first-plugin.js</code></pre>
        <!-- <p><code data-gist-id="8939637" data-gist-hide-footer="true" data-gist-line="113-117"></code></p> -->

        <p>Après la copie, vous devriez voir une confirmation semblable à la suivante :</p>

        <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "name": "first-plugin.js",
      "public_url": "http://players.brightcove.net/1507807800001/firstRepo/first-plugin.js"
    }</code></pre>
        <!-- <p><code data-gist-id="8939637" data-gist-hide-footer="true" data-gist-line="119-122"></code></p> -->

        <p>Vous pouvez confirmer que le fichier a été copié correctement en affichant son contenu à l'aide de l'instruction cURL suivante.</p>

        <pre class="line-numbers">
    <code class="language-bash" translate="No">curl http://players.brightcove.net/{account_id}/firstRepo/first-plugin.js</code></pre>
        <!-- <p><code data-gist-id="8939637" data-gist-hide-footer="true" data-gist-line="125"></code></p> -->

        <p>Vous pouvez également visualiser le fichier en parcourant le <code translate="No">public_url</code> renvoyé de la copie de fichier.</p>

        <aside class="bcls-aside bcls-aside--information">Si vous apportez des modifications à votre plugin, il peut y avoir un retard dans l'affichage des résultats car tous les fichiers hébergés via l'API du système de livraison sont soumis à une mise en cache de cinq minutes. Cela signifie qu'il peut s'écouler jusqu'à cinq minutes avant que votre plugin ne soit lu et utilisé. S'il s'agit de votre test initial, il n'y aura pas de retard.</aside>
    </section>

    <section id="usenewplugin" class="bcls-section">
        <h2>Utiliser un nouveau plugin</h2>

        <div class="BCL-concept">
            <p>Au pas à pas : Player Management, vous avez utilisé une instruction curl pour indiquer au lecteur l'emplacement du code JavaScript du plug-in, ainsi que l'emplacement CSS et le nom du plug-in. Vous ferez la même chose, sauf que cette fois, le chemin d'accès au plugin utilisera le nouveau chemin trouvé dans la réponse de la copie du fichier (indiqué à la ligne 2 ci-dessus dans la réponse de copie). Exécutez l'instruction curl suivante pour pointer vers le nouvel emplacement du plug-in.</p>

            <aside class="bcls-aside bcls-aside--information">Noter: Même si vous ne fournissez aucune option, vous devez toujours entrer le nom du plugin, comme indiqué ici.</aside>

            <pre class="line-numbers">
    <code class="language-bash" translate="No">curl \
      --header "Content-Type: application/json" \
      --user $EMAIL \
      --request PATCH \
      --data '{
        "scripts": [
          "http://players.brightcove.net/{account_id}/firstRepo/first-plugin.js"
        ],
        "stylesheets": [
          "http://solutions.brightcove.com/bcls/video-js/new-player/first-plugin.css"
        ],
        "plugins": [{
          "name": "firstPlugin"
        }]
      }' \
      https://players.api.brightcove.com/v2/accounts/{account_id}/players/{player_id}/configuration</code></pre>
            <!-- <code data-gist-id="8939637" data-gist-hide-footer="true" data-gist-line="50-65"></code><br /> -->

            <aside class="bcls-aside bcls-aside--tip">Il est recommandé de conserver également vos fichiers CSS dans un dépôt. Cela n'a pas été fait dans ce cas par souci de simplicité. De plus, vous auriez pu mettre à jour uniquement le <code translate="No">scripts</code> rubrique dans le <code translate="No">data</code> partie de l'instruction curl puisqu'il s'agit de la seule section modifiée. Pour examen, le <code translate="No">scripts</code> , <code translate="No">stylesheets</code> et <code translate="No">plugins</code> les rubriques ont été mises à jour.</aside>

            <p>Utiliser le retour <code translate="No">preview_url</code> pour parcourir le lecteur et vous verrez le nouveau texte du plugin affiché. Si vous le souhaitez, vous pouvez également publier le lecteur et obtenir l'URL du lecteur publié.</p>
        </div>
    </section>

    <section id="alterplugin" class="bcls-section">
        <h2>Modifier le plug-in</h2>

        <div class="BCL-concept">
            <p>L'un des points forts de l'utilisation du nouveau lecteur Brightcove est la facilité de mise à jour des lecteurs en apportant une seule modification à un plug-in, et tous les lecteurs utilisant ce plug-in seront mis à jour. À ce stade des étapes, vous apporterez une petite modification au plugin et le verrez en cours d'utilisation sans apporter de modifications au lecteur lui-même.</p>

            <p>Ouvrez le <code translate="No">first-plugin.js</code> fichier et mettre à jour le texte à lire <strong>Texte plus récent !</strong></p>

            <pre class="line-numbers">
    <code class="language-javascript" translate="No">overlay.innerHTML = "NEWer TEXT!";</code></pre>
            <!-- <code data-gist-id="8939637" data-gist-hide-footer="true" data-gist-line="68"></code><br /> -->

            <p>Copiez à nouveau le fichier dans le référentiel.</p>

            <pre class="line-numbers">
    <code class="language-bash" translate="No">curl \
      --user $EMAIL \
      --form contents=@first-plugin.js \
      --request PUT \
      https://repos.api.brightcove.com/v1/accounts/{account_id}/repos/firstRepo/files/first-plugin.js</code></pre>
            <!-- <p><code data-gist-id="8939637" data-gist-hide-footer="true" data-gist-line="113-117"></code></p> -->

            <p>Parcourir le même <code translate="No">preview_url</code> d'en haut à nouveau. Noter: En raison de la mise en cache du navigateur, vous devrez peut-être fermer l'onglet du navigateur et naviguer à nouveau, ou même effacer le cache du navigateur pour voir le texte mis à jour.</p>

            <p>Une fois que vous voyez la dernière version du plugin fonctionner, vous pouvez alors publier votre lecteur.</p>
        </div>
    </section>
</article>