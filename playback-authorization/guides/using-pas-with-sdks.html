---
title: Description de « Utilisation de l'autorisation de lecture DRM avec les SDK natifs » : "Dans cette rubrique, vous apprendrez à utiliser le service d'autorisation de lecture de Brightcove pour récupérer les vidéos ingérées pour la diffusion dynamique avec les kits SDK natifs de Brightcove."
parent: Guides 
grandparent: Playback Authorization
layout: staging
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  
  <br/>
  <aside class="bcls-aside bcls-aside--tip">Cette fonctionnalité est disponible pour un ensemble spécifique de clients ayant accès à la phase de disponibilité limitée du service d'autorisation de lecture.</aside>

  <section class="bcls-section">
    <h2 id="Introduction">introduction</h2>

    <p>Le service d'autorisation de lecture (PAS) de Brightcove offre un niveau de sécurité supplémentaire lors de l'utilisation de Dynamic Delivery avec un contenu protégé par DRM ou HTTP Live Streaming Encryption (HLSe).</p>

    <p>Avec PAS, les demandes de licence seront authentifiées à l'aide d'un <a href="https://general.support.brightcove.com/developer/create-jwt.html">Jeton Web JSON (JWT)</a>.</p>

    <p>Il est utilisé lors de la demande de licence vidéo, une fois la vidéo chargée dans le lecteur et la source sélectionnée.</p>

    <aside class="bcls-aside bcls-aside--information">Avec le contenu HLSe, lorsque le lecteur change de rendu, en raison d'une connectivité améliorée ou après le chargement du premier segment, une nouvelle demande de licence est effectuée.</aside>

    <p>
      Pour plus d'informations sur le PAS, consultez le <a href="/playback-authorization/getting-started/overview-playback-authorization-service.html">Aperçu: DRM avec service d'autorisation de lecture</a> document.
    </p>

  </section>

  <section class="bcls-section">
    <h2 id="Android_Implementation">Implémentation Android</h2>

    <p>Le SDK natif pour Android prend actuellement en charge PAS pour les sources HLSe et Widevine DASH. Vous fournirez votre jeton d'autorisation dans le cadre de la demande de catalogue Brightcove pour une seule vidéo ou une liste de lecture.</p>

    <p>
      Pour effectuer une demande de catalogue Brightcove à l'aide de PAS, procédez comme suit :
    </p>
    <ol class="bcls-tasklist__restart">
      <li>
        <p>
          Créé un <code translate="No">HttpRequestConfig</code> objet et définissez le jeton d'autorisation Brightcove comme indiqué ici :
        </p>
        <pre class="line-numbers"><code class="language-java" translate="No">HttpRequestConfig httpRequestConfig = new HttpRequestConfig.Builder()
       .setBrightcoveAuthorizationToken(myToken)
       .build();
</code></pre>
        <p>
          La valeur du jeton d'autorisation sera la valeur de votre jeton Web JSON.
        </p>
      </li>
      <li>
        <p>
          Une fois que vous avez créé le <code translate="No">HttpRequestConfig</code> objet, vous pouvez le transmettre à l'une des méthodes Catalog suivantes :
        </p>
        <p>
          Pour une demande de vidéo, utilisez l'un des éléments suivants :
        </p>
        <pre class="line-numbers"><code class="language-java" translate="No">findVideoByID(String, HttpRequestConfig, VideoListener)
</code></pre>
        <pre class="line-numbers"><code class="language-java" translate="No">findVideoByReferenceID(String, HttpRequestConfig, VideoListener)
</code></pre>
        <p>
          Pour une demande de playlist, utilisez l'un des éléments suivants :
        </p>
        <pre class="line-numbers"><code class="language-java" translate="No">findPlaylistByID(String, HttpRequestConfig, PlaylistListener)
</code></pre>
        <pre class="line-numbers"><code class="language-java" translate="No">findPlaylistByReferenceID(String, HttpRequestConfig, PlaylistListener)
</code></pre>
        <p>
          Les détails de l'utilisation des jetons pour l'acquisition de licences HLSe et Widevine sont gérés par le SDK.
        </p>
        <aside class="bcls-aside bcls-aside--information">Pour les demandes de playlist, toutes les vidéos de la playlist doivent utiliser le même jeton. Dans une future version, vous pourrez attribuer un jeton différent à chaque vidéo de la playlist. Vous serez responsable du maintien du mappage entre l'ID vidéo et le jeton. Les <code translate="No">conid</code> tel que défini dans le <a href="/playback-authorization/guides/create-jwt.html#Create_a_JSON_Web_Token">Revendications de jetons JWT</a> est la valeur d'ID vidéo associée à un jeton.</aside>
      </li>
    </ol>

    <h3>Exemple de code</h3>
    <p>
      L'exemple suivant montre comment transmettre votre jeton d'autorisation lors d'une demande de catalogue :
    </p>
    <pre class="line-numbers"><code class="language-java" translate="No">String myToken = &quot;...&quot;;
HttpRequestConfig httpRequestConfig = new HttpRequestConfig.Builder()
       .setBrightcoveAuthorizationToken(myToken)
       .build();
&hellip;

Catalog catalog = new Catalog(eventEmitter, accountId, policyKey, playbackApiBaseUrl);
catalog.findVideoByReferenceID(videoReferenceId, httpRequestConfig, new VideoListener(){...});
</code></pre>

    <h3>Lecture hors ligne</h3>
    <p>
      Le catalogue hors ligne <code translate="No">findVideo</code> , <code translate="No">requestPurchaseLicense</code> et <code translate="No">requestRentalLicense</code> les méthodes prennent toutes un <code translate="No">HttpRequestConfig</code> comme argument.
    </p>
    <aside class="bcls-aside bcls-aside--tip">Le service d'autorisation de lecture avec lecture hors ligne est pris en charge avec le SDK natif pour Android v6.8.1 ou version ultérieure.</aside>
    <pre class="line-numbers"><code class="language-java" translate="No">private HttpRequestConfig httpRequestConfig;
private String pasToken = &quot;YOUR_PAS_TOKEN&quot;;
...
HttpRequestConfig.Builder httpRequestConfigBuilder = new HttpRequestConfig.Builder();
httpRequestConfigBuilder.setBrightcoveAuthorizationToken(pasToken);
httpRequestConfig = httpRequestConfigBuilder.build();
playlist.findPlaylist(catalog, httpRequestConfig, new PlaylistListener() {
    @Override
    public void onPlaylist(Playlist playlist) {
        videoListAdapter.setVideoList(playlist.getVideos());
        onVideoListUpdated(false);
        brightcoveVideoView.addAll(playlist.getVideos());
    }

    @Override
    public void onError(String error) {
        String message = showToast(&quot;Failed to find playlist[%s]: %s&quot;, playlist.displayName, error);
        Log.w(TAG, message);
        onVideoListUpdated(true);
    }
});</code></pre>

    <p>
      Pour plus de détails, consultez le <a href="https://github.com/BrightcoveOS/android-player-samples/blob/master/brightcove-exoplayer/OfflinePlaybackSampleApp/src/main/java/com/brightcove/player/samples/offlineplayback/MainActivity.java">Exemple d'application de lecture hors ligne</a>.
    </p>

    <h3>Réponses</h3>
    <p>
      Les réponses suivantes sont associées au PAS :
    </p>
    <ul>
      <li>
        200 - La licence est autorisée à continuer
      </li>
      <li>
        401 - La délivrance de la licence ne doit pas être autorisée à se poursuivre
      </li>
    </ul>

    <h3>Limites</h3>
    <p>
      Il y a une limitation avec la version actuelle :
    </p>
    <ul>
      <li>
        Chromecast n'est pas pris en charge avec l'autorisation de lecture.
      </li>
    </ul>

  </section>

  <section class="bcls-section">
    <h2 id="iOS_Implementation">Implémentation iOS</h2>

    <p>Lorsque vous utilisez le service d'autorisation de lecture de Brightcove, vous devrez utiliser les méthodes du service de lecture qui vous permettent de transmettre votre jeton d'autorisation.</p>

    <p>
      Pour une demande de vidéo, utilisez l'un des éléments suivants :
    </p>
    <pre class="line-numbers"><code class="language-objectivec" translate="No">- (void)findVideoWithVideoID:(NSString *)videoID authToken:(NSString *)authToken parameters:(NSDictionary *)parameters completion:(void (^)(BCOVVideo *video, NSDictionary *jsonResponse, NSError *error))completionHandler;
</code></pre>
    <pre class="line-numbers"><code class="language-objectivec" translate="No">- (void)findVideoWithReferenceID:(NSString *)referenceID authToken:(NSString *)authToken parameters:(NSDictionary *)parameters completion:(void (^)(BCOVVideo *video, NSDictionary *jsonResponse, NSError *error))completionHandler;
</code></pre>

    <p>
      Pour une demande de playlist, utilisez l'un des éléments suivants :
    </p>
    <pre class="line-numbers"><code class="language-objectivec" translate="No">- (void)findPlaylistWithPlaylistID:(NSString *)playlistID authToken:(NSString *)authToken parameters:(NSDictionary *)parameters completion:(void (^)(BCOVPlaylist *playlist, NSDictionary *jsonResponse, NSError *error))completionHandler;
</code></pre>
    <pre class="line-numbers"><code class="language-objectivec" translate="No">- (void)findPlaylistWithReferenceID:(NSString *)referenceID authToken:(NSString *)authToken parameters:(NSDictionary *)parameters completion:(void (^)(BCOVPlaylist *playlist, NSDictionary *jsonResponse, NSError *error))completionHandler;
</code></pre>

    <p>
      Les détails de l'utilisation des jetons pour l'acquisition de licences HLSe et FairPlay sont gérés par le SDK.
    </p>
    <aside class="bcls-aside bcls-aside--information">Pour les demandes de playlist, toutes les vidéos de la playlist doivent utiliser le même jeton. Dans une future version, vous pourrez attribuer un jeton différent à chaque vidéo de la playlist. Vous serez responsable du maintien du mappage entre l'ID vidéo et le jeton. Les <code translate="No">conid</code> tel que défini dans le <a href="/playback-authorization/guides/create-jwt.html#Create_a_JSON_Web_Token">Revendications de jetons JWT</a> est la valeur d'ID vidéo associée à un jeton.</aside>

    <p>
      Pour plus de détails, consultez le <a href="https://docs.brightcove.com/ios-sdk/index.html#PlaybackAuthorizationService">Service d'autorisation de lecture</a> section de référence du Kit de développement logiciel natif pour iOS.
    </p>

    <h3>Lecture hors ligne</h3>
    <p>
      Si vous utilisez le service d'autorisation de lecture avec lecture hors ligne, il existe une nouvelle méthode pour renouveler une licence FairPlay qui accepte un jeton d'autorisation :
    </p>
    <pre class="line-numbers"><code class="language-objectivec" translate="No">// Request license renewal
    [BCOVOfflineVideoManager.sharedManager renewFairPlayLicense:offlineVideoToken
        video:video // recent video from Playback API or Playback Service class
        authToken: authToken
        Parameters: parameters
        completion:^(BCOVOfflineVideoToken offlineVideoToken, NSError *error)
    {
        // handle errors
    }];
</code></pre>

    <p>
      Lorsque le renouvellement de la licence est terminé, le bloc d'achèvement sera appelé avec le même jeton vidéo hors ligne qui a été transmis. Un <code translate="No">NSError</code> indiquera tout problème survenu (ou nul s'il n'y a pas d'erreur).
    </p>

    <p>
      Pour plus de détails, consultez le <a href="https://github.com/brightcove/brightcove-player-sdk-ios/blob/master/OfflinePlayback.md#renewing-a-fairplay-license">Renouveler une licence FairPlay</a> section de référence du Kit de développement logiciel natif pour iOS.
    </p>

    <h3>Réponses</h3>
    <p>
      Les réponses suivantes sont associées au PAS :
    </p>
    <ul>
      <li>
        200 - La licence est autorisée à continuer
      </li>
      <li>
        401 - La délivrance de la licence ne doit pas être autorisée à se poursuivre
      </li>
    </ul>

  </section>

  <section class="bcls-section">
    <h2 id="Related_topics">Rubriques connexes</h2>

    <ul>
      <li>
        <a href="/playback-authorization/getting-started/overview-playback-authorization-service.html">Aperçu: DRM avec service d'autorisation de lecture</a>
      </li>
      <li>
        <a href="/playback-authorization/getting-started/technical-workflow-pas.html">Implémentation de DRM avec le service d'autorisation de lecture</a>
      </li>
      <li>
        <a href="/playback-authorization/guides/using-pas-with-bcp.html">Utilisation de DRM d'autorisation de lecture avec Brightcove Player</a>
      </li>
      <li>
        <a href="/playback-authorization/guides/additional-apis-for-pas.html">API supplémentaires pour le service d'autorisation de lecture</a>
      </li>
    </ul>
  </section>
</article>

<script>
  var h1 = document.querySelector('h1'), path = location.pathname, new_location = 'https://sdks.support.brightcove.com/features/playback-restrictions-with-sdks.html', message = '<h3>Cette page a été déplacée vers <a href="' + new_location + '">' + new_location + '</a>. Veuillez mettre à jour votre signet ! Vous serez redirigé dans 5 secondes.<h3>'; console.log('new_location', new_location); h1.insertAdjacentHTML('afterend', message); réorienter(); fonction redirection() { var t = window.setTimeout(go_to_new_location, 5000); } fonction go_to_new_location() { window.location.href = new_location; }
</script>