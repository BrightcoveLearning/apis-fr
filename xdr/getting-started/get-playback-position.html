---
title: "Obtenir la position de lecture à partir de l'API XDR"
description: "Dans cette rubrique, vous apprendrez comment récupérer la position de lecture du spectateur à partir de l'API Cross-Device Resume (XDR)."
parent: Getting started 
grandparent: Cross Device Resume API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">

  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Overview">Aperçu</h2>
    <p>
      La reprise multi-appareils permet aux spectateurs de commencer à regarder une vidéo sur un appareil, et plus tard, de continuer à regarder la vidéo là où ils s'étaient arrêtés sur un autre appareil.
    </p>
    <p>
      Étant donné que l'API Cross-Device Resume (XDR) ne peut pas être appelée à partir de vos applications côté client, vous devrez créer un proxy côté serveur pour effectuer l'appel et renvoyer la valeur de la position de lecture.
    </p>
    <aside class="bcls-aside bcls-aside--information">Notez qu'il existe un délai entre la soumission des données XDR et la disponibilité de ces données via l'API pouvant aller jusqu'à 30 secondes.</aside>
  </section>

  <section class="bcls-section">
    <h2 id="Getting_playback_position">Obtenir la position de lecture</h2>

    <p>Vous pouvez obtenir la position de lecture de la visionneuse avec le <a href="/xdr/references/reference.html">API de CV multi-appareils (XDR)</a>.</p>

    <h3 id="Cross_Device_Resume_API">API de CV multi-appareils (XDR)</h3>
    <p>
      Avec l'API Cross-Device Resume, vous pouvez obtenir toutes les positions de tête de lecture pour un spectateur spécifique, ou toutes les têtes de lecture pour un spectateur et une vidéo spécifiques.
    </p>

    <h3>URL de base</h3>
    <p>
      L'URL de base de l'API est:
    </p>
    <pre><code class="language-http" translate="No">https://data.brightcove.com/v1/xdr</code></pre>

    <h3>Chemin du compte</h3>
    <p>
      Dans tous les cas, des demandes seront faites pour un compte Video Cloud spécifique. Ainsi, vous ajouterez toujours le terme comptes suivi de votre identifiant de compte à l'URL de base:
    </p>
    <pre><code class="language-http" translate="No">https://data.brightcove.com/v1/xdr/accounts/{account_id}</code></pre>

    <h3>Autorisation</h3>
    <p>
      Un jeton d'accès pour les demandes est requis et doit être présent dans l'en-tête Authorization:
    </p>
    <pre><code class="language-http" translate="No">Authorization: Bearer {access_token}</code></pre>
    <p>
      Le jeton d'accès est un jeton d'accès OAuth2 temporaire qui doit être obtenu auprès du service Brightcove OAuth. Pour plus de détails sur la façon d'obtenir les informations d'identification client et de les utiliser pour récupérer des jetons d'accès, consultez le <a href="/oauth/getting-started/overview-oauth-api-v4.html">Présentation de Brightcove OAuth</a>.
    </p>

    <h3>Autorisations</h3>
    <p>
      Les demandes à l'API de CV multi-appareils doivent être effectuées à partir de <a href="/oauth/index.html">informations d'identification du client</a> avec les autorisations suivantes :
    </p>
    <ul>
      <li>
        <code translate="No">video-cloud/xdr/read</code>
      </li>
    </ul>
    <p><strong>Notez que ces autorisations ne sont pas encore disponibles dans l'interface utilisateur d'administration de Studio.</strong> Jusqu'à ce qu'ils le soient, vous pouvez utiliser ceci <a href="/oauth/code-samples/oauth-api-sample-create-client-credentials.html">Application Brightcove Learning Services</a> pour créer vos identifiants client. Assurez-vous simplement de vérifier le <code translate="No">video-cloud/xdr/read</code> lorsque vous créez les informations d'identification (vous pouvez cocher autant d'autres cases que vous le souhaitez).</p>

    <h3>Méthodes API</h3>
    <p>
      L'API Cross-Device Resume prend en charge les requêtes suivantes. Pour plus de détails, consultez le <a href="/xdr/references/reference.html">Référence de l'API Cross-Device Resume (XDR)</a>.
    </p>

    <h4>Obtenir des têtes de lecture de visionneuse</h4>
    <p>
      Cette demande obtient toutes les têtes de lecture pour un spectateur.
    </p>
    <pre><code class="language-http" translate="No">GET /accounts/{accountID}/playheads/{viewer_id}</code></pre>
    <h5>Corps de réponse</h5>
    <p>
      Le corps de la réponse contient un ensemble de vidéos et de têtes de lecture. Cela devrait ressembler à ceci :
    </p>
<pre class="line-numbers"><code class="language-json" translate="No">{
  &quot;account_id&quot;: &quot;1752604059001&quot;,
  &quot;viewer_id&quot;: &quot;viewer001&quot;,
  &quot;items&quot;: [
    {
    &quot;timestamp&quot;: 1589548991563000,
    &quot;video_id&quot;: &quot;6152436480001&quot;,
    &quot;playhead_seconds&quot;: 17
    },
    {
    &quot;timestamp&quot;: 1589548858719000,
    &quot;video_id&quot;: &quot;6152440604001&quot;,
    &quot;playhead_seconds&quot;: 3
    }
  ],
  &quot;size&quot;: 2
  }</code></pre>
    <br />

    <h4>Obtenir des têtes de lecture vidéo de visionneuse</h4>
    <p>
      Cette demande obtient toutes les têtes de lecture pour un spectateur et une vidéo spécifique.
    </p>
    <pre><code class="language-http" translate="No">GET /accounts/{account_id}/playheads/{viewer_id}/{video_id}</code></pre>
    <br />
    <aside class="bcls-aside bcls-aside--tip">
      <p>
        Vous pouvez également inclure une liste d'identifiants vidéo: (maximum = 100)
      </p>
      <pre><code class="language-http" translate="No">GET /accounts/{account_id}/playheads/{viewer_id}/{video_id},{video_id},...</code></pre>
    </aside>
    <h5>Corps de réponse</h5>
    <p>
      Si vous spécifiez un ID vidéo, le corps de la réponse contiendra un objet élément. Lorsque vous spécifiez plusieurs ID vidéo, le <code translate="No">items</code> le tableau contiendra plusieurs objets d'élément. Cela devrait ressembler à ceci :
    </p>
<pre class="line-numbers"><code class="language-json" translate="No">{
  &quot;account_id&quot;: &quot;1752604059001&quot;,
  &quot;viewer_id&quot;: &quot;viewer001&quot;,
  &quot;items&quot;: [
    {
    &quot;timestamp&quot;: 1589896539910000,
    &quot;video_id&quot;: &quot;6156696074001&quot;,
    &quot;playhead_seconds&quot;: 39
    }
  ],
  &quot;size&quot;: 1
  }</code></pre>
    <br />
  </section>

  <section class="bcls-section">
    <h2 id="Using_a_server_side_proxy">Utiliser un proxy côté serveur</h2>
    <p>Un proxy est une application côté serveur qui agit comme intermédiaire entre votre application côté client et l'API REST. Voici quelques liens utiles :</p>
    <ul>
      <li>
        Pour les concepts, voir <a href="https://player.support.brightcove.com/getting-started/learning-guide-using-rest-apis.html">Guide d'apprentissage: Utilisation des API REST</a>
      </li>
      <li>
        Pour un exemple de lecteur Web qui appelle un proxy côté serveur pour obtenir la tête de lecture à partir de l'API XDR, consultez le <a href="https://github.com/BrightcoveLearning/cross-device-resume/blob/master/index.html">Exemple de CV multi-appareils sur github</a>.
      </li>
    </ul>

  </section>

  <!-- <section class="bcls-section">
<h2 id="Limitations">Limitations</h2>

<p>Here are the limitation associated with the cross-device resume.</p>

<ul>
  <li>The current version of this plugin does not support thumbnails on mobile devices.</li>
</ul>
</section> -->

  <!-- <section class="bcls-section">
<h2 id="Changelog">Changelog</h2>

<p>See the <a href="https://player.support.brightcove.com/plugins/changelog/thumbnails-plugin-changelog.html">changelog here</a>.</p>
</section> -->
</article>