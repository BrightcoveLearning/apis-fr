---
title: 'Utiliser Insomnia pour les requêtes API'
description: 'Dans cette rubrique, vous apprendrez à configurer le célèbre client HTTP Insomnia pour envoyer des requêtes aux API RESTful de Brightcove.'
parent: General Information
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="introduction">introduction</h2>
    <p>Certains trouvent que les instructions curl et la ligne de commande, utilisées pour de nombreux exemples dans notre documentation sur les API de plate-forme, sont difficiles et intimidantes. Pour ceux-ci, il existe de nombreux outils pour envoyer des requêtes HTTP aux services basés sur REST, qui incluent la plupart des API Brightcove. Ce document vous montrera comment utiliser un outil populaire, le <a href="https://insomnia.rest"><span translate="No">Insomnie</span> application</a>.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Install_insomnia">Installer <span translate="No">Insomnie</span></h2>
    <p>Avoir <span translate="No">Insomnie</span> de <a href="https://insomnia.rest"><span translate="No">https://insomnia.rest</span></a>. <span translate="No">Insomnie</span> peut être installé sur les systèmes Mac, Linux ou Windows.</p>
		</section>
		<section class="bcls-section">
			<h2 id="authentication">Authentification</h2>
    <p><span translate="No">Insomnie</span> peut être utilisé pour envoyer des requêtes à l'une des API RESTful de Brightcove. La plupart des API utilisent OAuth2 pour l'authentification, et nous verrons comment le configurer dans <span translate="no">Insomnie</span> plus loin dans ce document. Cependant, vous pouvez également l'utiliser pour les API qui n'utilisent pas OAuth, en définissant simplement l'en-tête approprié.</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="Set Header in Insomnia" src="/assets/images/general/insomnia/18462-set-header.png" />
      <figcaption class="bcls-caption--image">Définir l'en-tête dans <span translate="No">Insomnie</span></figcaption>
    </figure>
    <p>Voici à quoi ressemblera cet en-tête pour les requêtes avec des méthodes d'authentification autres que Oauth2 :</p>
    <dl>
      <dt ><a href="/playback/index.html"><span translate="No">API de lecture</span></a></dt>
      <dd >
        <pre>
  <code class="language-http" translate="No">BCOV-Policy: <span class="bcls-input">YOUR_POLICY_KEY</span></code></pre>
      </dd>
      <dt ><a href="https://live.support.brightcove.com/live-api/"><span translate="No">API en direct</span></a></dt>
      <dd >
        <pre>
  <code class="language-http" translate="No">X-API-KEY: <span class="bcls-input">YOUR_API_KEY</span></code></pre>
      </dd>
      <dt ><a href="https://zencoder.support.brightcove.com">API Zencoder</a></dt>
      <dd >
        <pre>
  <code class="language-http" translate="No">Zencoder-Api-Key: <span class="bcls-input">YOUR_API_KEY</span></code></pre>
      </dd>
    </dl>
  </section>
  <section class="bcls-section">
    <h2 id="getCredentials">Obtenir les informations d'identification du client</h2>
    <p>Pour travailler avec la plupart des API Brightcove, vous aurez besoin des informations d'identification client pour le compte et les API que vous souhaitez utiliser. Obtenez vos informations d'identification client dans Studio en suivant les instructions dans <a href="/general/managing-api-authentication-credentials.html">Gestion des informations d'authentification API</a>. Dans les étapes ci-dessous, nous allons faire <span translate="No">API CMS</span> requêtes utilisant <span translate="No">Insomnie</span> , vos identifiants doivent donc avoir au moins les autorisations suivantes :</p>
    <ul>
      <li><strong>Vidéos</strong>: <strong>Lire écrire</strong></li>
    </ul>
    <p>Vous pouvez ajouter autant d'autorisations supplémentaires que vous le souhaitez pour obtenir des informations d'identification qui seront utilisables pour un plus large éventail de demandes d'API. Notez également que vous pouvez obtenir des informations d'identification qui fonctionneront pour plusieurs comptes si vous le souhaitez.</p>
    <aside class="bcls-aside bcls-aside--information">Afin de générer des informations d'identification client, vous devez disposer d'autorisations d'administrateur pour Studio ou demander à quelqu'un de votre organisation disposant d'autorisations d'administrateur de générer les informations d'identification pour vous.</aside>
  </section>
  <section class="bcls-section">
    <h2 id="usingInsomnia">À l'aide de <span translate="No">Insomnie</span></h2>
    <p>Une fois que vous avez vos informations d'identification client, vous êtes prêt à commencer à utiliser <span translate="No">Insomnie</span>. <span translate="No">Insomnie</span> fera beaucoup de travail de configuration pour vous si vous importez la spécification OpenAPI pour l'API CMS, que nous mettons à votre disposition. Les étapes ci-dessous vous guident tout au long de la création de certaines <strong>API CMS</strong> requêtes utilisant <span translate="No">Insomnie</span>.</p>
    <h3>Mise en place d'un <span translate="No">Insomnie</span> collection pour l'API CMS</h3>
		<h4>Obtenez la spécification OpenAPI pour l'API CMS</h4>
		<ol class="bcls-tasklist-restart">
			<li>Ouvrez le <a href="/cms/references/reference.html">Référence de l'API CMS</a>.</li>
			<li>
				Clique le <strong>Télécharger</strong> bouton et enregistrez le <code translate="no">openapi.yaml</code> fichier dans un endroit où vous pourrez le retrouver :
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/download-cms-api-openapi-spec.png" alt="Download Open API Specification">
					<figcaption class="bcls-caption--image">Télécharger la spécification de l'API ouverte</figcaption>
				</figure>
			</li>
		</ol>
		<h4>Importer la spécification OpenAPI dans Insomnia</h4>
    <ol class="bcls-tasklist-restart">
      <li>Lancer le <span translate="No">Insomnie</span> application.</li>
      <li>Cliquez sur la liste déroulante à côté <span translate="No">Insomnie</span> et sélectionnez <strong>Importer / Exporter</strong>:
        <figure class="bcls-figure"><img class="bcls-image" alt="Import/Export" src="/assets/images/general/insomnia/import-export.png" />
          <figcaption class="bcls-caption--image">Importer / Exporter</figcaption>
        </figure>
      </li>
			<li>
				Dans la boîte de dialogue qui s'ouvre, cliquez sur <strong>Importer des données</strong> et sélectionnez <strong>À partir du fichier</strong>:
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/import-data-from-file.png" alt="Import Data from File">
					<figcaption class="bcls-caption--image">Importer des données à partir d'un fichier</figcaption>
				</figure>
			</li>
			<li>
				Sélectionnez le <code translate="no">openapi.yaml</code> que vous avez téléchargé, puis choisissez d'importer les données dans l'espace de travail actuel ou d'en créer un nouveau. L'un ou l'autre fonctionnera, mais nous vous recommandons de créer un nouvel espace de travail pour chaque API :
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/create-new-workspace.png" alt="Create New Workspace">
					<figcaption class="bcls-caption--image">Créer un nouvel espace de travail</figcaption>
				</figure>
			</li>
			<li>
				Ensuite, il vous sera demandé si vous souhaitez importer les données en tant que collection de demandes ou document de conception. Choisir <strong>Demander la collecte</strong>:
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/import-request-collection.png" alt="Import as Request Collection">
					<figcaption class="bcls-caption--image">Importer en tant que demande de collecte</figcaption>
				</figure>
			</li>
			<li>Vous verrez une boîte de dialogue confirmant que les données ont été importées.</li>
			<li>
				Cliquer sur <strong>Tableau de bord</strong> dans le coin supérieur gauche pour voir vos espaces de travail. Si vous avez créé un nouvel espace de travail, vous le verrez s'afficher avec le nom approprié :
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/cms-api-workspace.png" alt="CMS API Workspace">
					<figcaption class="bcls-caption--image">Espace de travail API CMS</figcaption>
				</figure>
			</li>
      <li>Cliquez sur l'espace de travail pour l'ouvrir.</li>
			<li>
				Vous verrez une liste de dossiers contenant les différents groupes de requêtes pour l'API CMS, ainsi qu'un nouvel environnement OpenAPI :
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/cms-api-evironment-and-request-folders.png" alt="CMS API Requests and Environment">
					<figcaption class="bcls-caption--image">Environnement et requêtes d'API CMS</figcaption>
				</figure>
			</li>
    </ol>
  </section>
	<section class="bcls-section">
		<h2 id="add_variables_to_environment">Ajouter des variables à l'environnement</h2>
		<p>Il s'agit d'une étape facultative, mais elle simplifiera la configuration de l'authentification pour les demandes ultérieurement.</p>
		<ol class="bcls-tasklist-restart">
			<li>
				Clique sur le <strong>Environnement OpenAPI</strong> menu déroulant et sélectionnez <strong>Gérer les environnements</strong>:
				<figure class="bcls-figure">
					<img class="bcls-image" src="/" alt="Manage Environments">
					<figcaption class="bcls-caption--image">Gérer les environnements</figcaption>
				</figure>
			</li>
			<li>
				Vous verrez les variables d'environnement qui <span translate="no">Insomnie</span> créé à partir de la spécification OpenAPI sous la forme de JSON :
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/environment-json.png" alt="Environment Variables">
					<figcaption class="bcls-caption--image">Variables d'environnement</figcaption>
				</figure>
			</li>
			<li>
				Ajoutez ces variables supplémentaires au JSON (voir <a href="#getCredentials">Obtenir les informations d'identification du client</a> ci-dessus sur le <code translate="no">identité du client</code> et <code translate="no">client_secret</code>):
				<ul>
					<li><code translate="no">"identifiant de compte": "<span class="bcls-input">your_account_id</span>"</code></li>
					<li><code translate="no">"identité du client": "<span class="bcls-input">your_client_id</span>"</code></li>
					<li><code translate="no">"client_secret": "<span class="bcls-input">votre_client_secret</span>"</code></li>
					<li>"access_token_url": "https://oauth.brightcove.com/v4/access_token"<code translate="no"></code></li>
				</ul>
			</li>
			<li>
				Lorsque vous avez terminé, l'environnement JSON devrait ressembler à ceci :
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/environment-vars-added.png" alt="Environment Variables Added">
					<figcaption class="bcls-caption--image">Variables d'environnement ajoutées</figcaption>
				</figure>
			</li>
			<li>Cliquez sur <strong>Terminé</strong> dans le coin inférieur droit pour quitter la boîte de dialogue.</li>
		</ol>
	</section>
  <section class="bcls-section">
    <h2 id="Set_up_authentication">Configurer l'authentification</h2>
    <p>Nous sommes maintenant prêts à configurer l'authentification pour les requêtes API.</p>
    <ol class="bcls-tasklist-restart">
      <li>Clique le <strong>Vidéos</strong> dossier et sélectionnez le <strong>Obtenir des vidéos</strong>:
        <figure class="bcls-figure"><img class="bcls-image" alt="New Request" src="/assets/images/general/insomnia/18462-new-request.png" />
          <figcaption class="bcls-caption--image">Nouvelle requête</figcaption>
        </figure>
      </li>
			<li>
				Notez que l'URL de la requête contient déjà deux variables. Si vous cliquez dessus, vous pouvez voir (et modifier) leurs valeurs. <code translate="no">base_url</code> est généré automatiquement par <span class="”notranslate”">Insomnie</span> de la spécification OpenAPI. Si vous cliquez sur <code translate="no">identifiant de compte</code> , vous devriez constater que la valeur correspond à ce que vous avez entré comme variable d'environnement dans la section précédente.</li>
      <li>
				Clique le <strong>Authentification</strong> onglet et le <strong>Liste déroulante Authentification</strong> menu et sélectionnez <strong>OAuth 2.0</strong>:
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/select-auth-type.png" alt="Select Auth Type">
					<figcaption class="bcls-caption--image">Sélectionnez le type d'autorisation</figcaption>
				</figure>
			</li>
      <li>
				Clique le <strong>Type de subvention</strong> liste déroulante et sélectionnez <strong>Identifiants du client</strong>:
				<figure class="bcls-figure">
					<img class="bcls-image" src="/" alt="Select Grant Type">
					<figcaption class="bcls-caption--image">Sélectionnez le type de subvention</figcaption>
				</figure>
      </li>
      <li>
				Dans le <strong>URL du jeton d'accès</strong> champ, commencez à taper "access_token_url" - vous verrez le menu de saisie semi-automatique et sélectionnez votre <code translate="no">access_token_url</code> variable d'environnement :
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/access-token-url.png" alt="Autocomplete for Variables">
					<figcaption class="bcls-caption--image">Saisie semi-automatique pour les variables</figcaption>
				</figure>
      </li>
      <li>
				Répétez l'étape précédente pour remplir le <strong>identité du client</strong> et <strong>Secret du client</strong> champs avec votre <code translate="no">identité du client</code> et <code translate="no">client_secret</code> variables :
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/auth-variables.png" alt="Auth Variables">
					<figcaption class="bcls-caption--image">Variables d'authentification</figcaption>
				</figure>
			</li>
      <li>
				Faites défiler vers le bas pour voir le <strong>Récupérer le jeton</strong> bouton et cliquez dessus. Assurez-vous que le champ Access Token est renseigné avec un jeton :
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/access-token.png" alt="Access Token">
					<figcaption class="bcls-caption--image">Jeton d'accès</figcaption>
				</figure>
			</li>
      <li>Cliquez sur <strong>Récupérer des jetons</strong> pour s'assurer que cela fonctionne. Vous devriez voir une réponse comme celle-ci :
        <figure class="bcls-figure"><img class="bcls-image" alt="Access Token" src="/assets/images/general/insomnia/18462-access-token.png" />
          <figcaption class="bcls-caption--image">Jeton d'accès</figcaption>
        </figure>
        <aside class="bcls-aside bcls-aside--information">L'une des caractéristiques intéressantes de <span translate="No">Insomnie</span> est-ce qu'une fois que vous avez configuré cela, vous le faites <strong>ne pas</strong> devez actualiser le jeton manuellement - <span translate="No">Insomnie</span> en obtiendra de nouveaux automatiquement au fur et à mesure de leurs besoins.</aside>
      </li>
			<li>
				Allez au <strong>Entête</strong> onglet et supprimez le <strong>Autorisation</strong> header (l'authentification que vous venez de mettre en place s'occupera de la tête - celle-ci la cassera):
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/remove-authorization-header.png" alt="Remove Authorization Header">
					<figcaption class="bcls-caption--image">Supprimer l'en-tête d'autorisation</figcaption>
				</figure>
			</li>
    </ol>
		<aside class="bcls-aside bcls-aside--information">Remarques:
			<ul>
				<li><span class="”notranslate”">Insomnie</span> ne réplique pas les paramètres d'authentification sur d'autres demandes, vous devrez donc répéter ces étapes pour chaque demande que vous souhaitez tester.</li>
				<li>L'une des caractéristiques intéressantes de <span class="”notranslate”">Insomnie</span> , cependant, c'est qu'une fois que vous avez configuré l'authentification OAuth 2, il récupère automatiquement les nouveaux jetons d'accès si nécessaire. Vous n'avez pas besoin d'en récupérer manuellement un nouveau lorsque celui existant expire.</li>
			</ul>
		</aside>
  </section>
	<section class="bcls-section">
		<h2 id="Make_a_request">Faire une demande</h2>
		<p>Nous sommes maintenant prêts à faire un <strong>Obtenir des vidéos</strong> demander.</p>
		<ol class="bcls-tasklist-restart">
			<li>Puisqu'il s'agit d'un <code translate="no">AVOIR</code> demande, il vous suffit de cliquer <strong>Envoyer</strong>.</li>
			<li>
				Vous devriez voir la réponse JSON apparaître dans la zone Réponse :
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/get-response.png" alt="API Response">
					<figcaption class="bcls-caption--image">Réponse de l'API</figcaption>
				</figure>
			</li>
			<li>
				Notez que vous pouvez récupérer différents ensembles de vidéos en utilisant <strong>Mettre en doute</strong> paramètres. Clique le <strong>Mettre en doute</strong> onglet pour la demande, et vous verrez que <span class="”notranslate”">Insomnie</span> l'a rempli sur la base de la spécification OpenAPI. Vérifiez simplement le(s) paramètre(s) que vous souhaitez utiliser et définissez les valeurs :
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/query-params.png" alt="Query Params">
					<figcaption class="bcls-caption--image">Paramètres de requête</figcaption>
				</figure>
			</li>
	</ol>
	</section>
  <section class="bcls-section">
    <h2 id="postRequest">Envoyer un <code translate="No">POST</code> demander</h2>
    <p>Maintenant, nous allons envoyer un <code translate="No">POST</code> demande avec quelques données. Dans ce cas, nous allons créer un nouvel objet vidéo à l'aide de l'API CMS. Commencez par sélectionner le <strong>Créer une vidéo</strong> demande dans le <strong>Vidéos</strong> dossier.</p>
    <ol class="bcls-tasklist-restart">
			<li>Répétez toutes les étapes de la <a href="#Set_up_authentication">Configurer l'authentification</a> section ci-dessus pour configurer l'authentification pour cette nouvelle demande.</li>
			<li>
				Cette demande nécessite un corps de demande, alors cliquez sur l'onglet JSON et entrez ce code JSON pour remplacer le <code translate="no">nul</code>:
<pre class="line-numbers"><code class="language-json" translate="No">{
	"name": "Insomnia Test"
}</code></pre>
<figure class="bcls-figure">
  <img class="bcls-image" src="/assets/images/general/insomnia/request-body.png" alt="Request Body">
  <figcaption class="bcls-caption--image">Corps de la demande</figcaption>
</figure>
			</li>
			<li>Cliquez sur <strong>Envoyer</strong> et vous devriez voir le nouvel objet vidéo renvoyé dans la réponse.</li>
    </ol>
  </section>
  <section class="bcls-section">
    <h2 id="Using_the_code_generators">Utilisation des générateurs de code</h2>
    <p>Une autre fonctionnalité intéressante de <span class="”notranslate”">Insomnie</span> est qu'il va générer du code pour faire des requêtes dans de nombreuses langues différentes.</p>
    <ol class="bcls-tasklist-restart">
      <li>
        Survolez le menu déroulant pour une demande :
        <figure class="bcls-figure">
          <img class="bcls-image" src="/assets/images/general/insomnia/dropdown-menu-for-requests.png" alt="Request Dropdown Menu">
          <figcaption class="bcls-caption--image">Menu déroulant de demande</figcaption>
        </figure>
      </li>
      <li>
        Sélectionner <strong>Générer le code</strong> depuis le menu :
        <figure class="bcls-figure">
          <img class="bcls-image" src="/assets/images/general/insomnia/generate-code-option.png" alt="Select Generate Code">
          <figcaption class="bcls-caption--image">Sélectionnez Générer le code</figcaption>
        </figure>
      </li>
      <li>
        Dans le <strong>Générer le code client</strong> boîte de dialogue qui s'ouvre, choisissez la langue pour laquelle vous souhaitez coder :
        <figure class="bcls-figure">
          <img class="bcls-image" src="/assets/images/general/insomnia/choose-code-type.png" alt="Select the Language">
          <figcaption class="bcls-caption--image">Sélectionnez la langue</figcaption>
        </figure>
      </li>
      <li>
        Pour de nombreuses langues, vous pouvez également sélectionner des variantes qui peuvent être mieux adaptées au type d'application que vous créez :
        <figure class="bcls-figure">
          <img class="bcls-image" src="/assets/images/general/insomnia/choose-code-variants.png" alt="Select Code Variant">
          <figcaption class="bcls-caption--image">Sélectionnez la variante de code</figcaption>
        </figure>
      </li>
      <li>
        Il existe également un bouton pratique pour copier le code dans votre presse-papiers :
        <figure class="bcls-figure">
          <img class="bcls-image" src="/assets/images/general/insomnia/view-copy-code.png" alt="View and Copy Code">
          <figcaption class="bcls-caption--image">Afficher et copier le code</figcaption>
        </figure>
      </li>
    </ol>
  </section>
  <section class="bcls-section">
    <h2 id="Conclusion">Conclusion</h2>
    <p>Vous connaissez maintenant les bases de l'utilisation <span translate="No">Insomnie</span> pour faire des requêtes aux API Brightcove. Notez que si vous choisissez de mettre à niveau votre <span translate="No">Insomnie</span> compte à un compte d'équipe, vous pouvez également synchroniser toutes vos demandes et environnements et les partager avec d'autres membres de l'équipe.</p>
  </section>
</article>