---
title: 'API d'analyse : Métriques en direct'
description: 'Cette rubrique explique les métriques d'analyse disponibles pour les flux en direct.'

parent: 'General Information' 
grandparent: Analytics API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="introduction">introduction</h2>

    <p>Métriques de lecture pour les diffusions en direct diffusées par le <strong>Brightcove en direct</strong> service sont disponibles en temps réel, via le <strong>API d'analyse</strong>. Ces données sont saisies pour <em>flux en direct</em> seul; La lecture VOD n'est pas incluse.</p>

    <p>L'API fournit des métriques de diffusion en direct via 2 points de terminaison :</p>
    <ul>
      <li><code translate="No">/v1/timeseries</code></li>
      <li><code translate="No">/v1/events</code></li>
    </ul>
    <p>Les deux interrogent le même ensemble de données, mais agrègent les résultats différemment. Ce document décrit l'utilisation et la syntaxe de chacun.</p>
  </section>

  <section class="bcls-section">
    <h2 id="metrics">Métrique</h2>

    <p>Ce sont les métriques disponibles via les points de terminaison Live. Les requêtes peuvent demander plusieurs métriques.</p>

    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>Métrique</th>
          <th>La description</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><code translate="No">alive_ss_ad_start</code></td>
          <td>Impressions d'annonces côté serveur</td>
        </tr>
        <tr>
          <td><code translate="No">ccu</code></td>
          <td>Unique <em>séances</em>; nombre de distincts (<em>empreinte digitale</em> + <em>Session</em>)</td>
        </tr>
        <tr>
          <td><code translate="No">fingerprint_count</code></td>
          <td>Unique <em>dispositifs</em>; nombre de distincts <em>empreintes</em> (voir ci-dessous)</td>
        </tr>
        <tr>
          <td><code translate="No">video_impression</code></td>
          <td>Nombre de fois où la vidéo a été chargée dans le lecteur</td>
        </tr>
        <tr>
          <td><code translate="No">video_seconds_viewed</code></td>
          <td>Nombre total de secondes regardées par tous les téléspectateurs</td>
        </tr>
        <tr>
          <td><code translate="No">video_view</code></td>
          <td>Le flux démarre (pas unique)</td>
        </tr>
      </tbody>
    </table>

    <p>Pour <strong>unique</strong> suivi, nous attribuons un <em>empreinte digitale</em> à chaque appareil en combinant (<code translate="No">Remote IP</code> + <code translate="No">User-Agent</code> + <code translate="No">Player</code>). Notez que nous n'utilisons pas d'ID matériel réel de l'appareil lui-même - cela réduit la précision, mais nous maintient en conformité avec la confidentialité.</p>
  </section>

  <section class="bcls-section">
    <h2 id="dimensions">Dimensions</h2>

    <p>Les combinaisons suivantes sont prises en charge comme <code translate="No">dimensions</code> et <code translate="No">where</code> clés de filtrage:</p>

    <ul>
      <li><code translate="No">video</code></li>
      <li><code translate="No">video, country</code></li>
      <li><code translate="No">video, device_type</code></li>
    </ul>
  </section>

  <section class="bcls-section">
  <h2 id="query-parameters">Paramètres de requête</h2>

  <p>Les deux points de terminaison Live partagent certains paramètres communs qui contrôlent la portée et le regroupement de la requête.</p>

  <table class="bcls-table">
    <thead class="bcls-table__head">
      <tr>
        <th>Paramètre</th>
        <th>Syntaxe</th>
        <th style="text-align: center">Obligatoire</th>
        <th style="text-align: center">Défaut</th>
        <th>La description</th>
      </tr>
    </thead>
    <tbody class="bcls-table__body">
      <tr>
        <td>dimensions</td>
        <td><code translate="No">&lt;dim1&gt;,&lt;dim2&gt;,...</code></td>
        <td style="text-align: center">Oui</td>
        <td style="text-align: center">-</td>
        <td>Dimensions de la requête (GROUP BY)</td>
      </tr>
      <tr>
        <td>métrique</td>
        <td><code translate="No">&lt;metric1&gt;,&lt;metric2&gt;,...</code></td>
        <td style="text-align: center">Oui</td>
        <td style="text-align: center">-</td>
        <td>Une ou plusieurs métriques à signaler</td>
      </tr>
      <tr>
        <td>où</td>
        <td><code translate="No">&lt;dim1&gt;==&lt;value1&gt;;...</code></td>
        <td style="text-align: center">Oui</td>
        <td style="text-align: center">-</td>
        <td>Un ou plusieurs filtres de requête ; doit inclure au moins 1 vidéo</td>
      </tr>
      <tr>
        <td>de</td>
        <td><code translate="No">&lt;epoch&gt;</code></td>
        <td style="text-align: center">N</td>
        <td style="text-align: center">dans 32 jours</td>
        <td>Début de la plage horaire</td>
      </tr>
      <tr>
        <td>à</td>
        <td><code translate="No">&lt;epoch&gt;</code></td>
        <td style="text-align: center">N</td>
        <td style="text-align: center"><em>maintenant</em></td>
        <td>Fin de la plage horaire</td>
      </tr>
    </tbody>
  </table>
</section>
<section class="bcls-section">
  <h2 id="time-series">Des séries chronologiques</h2>

  <p>Les <code translate="No">/v1/timeseries</code> endpoint renvoie une liste de points le long d'une chronologie, avec la valeur de la métrique demandée à chaque instant. Les points sont <strong>1 minute</strong> buckets par défaut, mais peut être modifié via un paramètre.</p>

  <p>Dans ce contexte, les métriques uniques (<code translate="No">ccu</code> , <code translate="No">fingerprint_count</code> ) indiquer le <strong>valeur maximum</strong> à tout moment pendant chaque seau. Donc une requête avec <code translate="No">bucket_duration=1d</code> renverra la simultanéité maximale pour chaque jour, tandis qu'une requête avec <code translate="No">bucket_limit=1</code> renverra la simultanéité maximale à n'importe quel point du flux.</p>

  <h3 id="uri">URI</h3>

  <p><code translate="No">/v1/timeseries/accounts/{account_id}</code></p>

  <h3 id="additional-parameters">Paramètres supplémentaires</h3>

  <table class="bcls-table">
    <thead class="bcls-table__head">
      <tr>
        <th>Paramètre</th>
        <th>Syntaxe</th>
        <th style="text-align: center">Obligatoire</th>
        <th style="text-align: center">Défaut</th>
        <th>La description</th>
      </tr>
    </thead>
    <tbody class="bcls-table__body">
      <tr>
        <td>bucket_duration</td>
        <td><code translate="No">&lt;n&gt;m</code>&nbsp;(minutes)<br><code translate="No">&lt;n&gt;h</code>(les heures)<br><code translate="No">&lt;n&gt;d</code>(jours)</td>
        <td style="text-align: center">N</td>
        <td style="text-align: center">1m</td>
        <td>Durée représentée par chaque point. <code translate="No">1d</code> est de 24 heures, pas un jour calendaire.</td>
      </tr>
      <tr>
        <td>bucket_limit</td>
        <td><code translate="No">&lt;n&gt;</code></td>
        <td style="text-align: center">N</td>
        <td style="text-align: center">-</td>
        <td>Nombre de points à retourner. Utilisez soit <code translate="No">bucket_duration</code> ou <code translate="No">bucket_limit</code> , mais pas les deux ensemble.</td>
      </tr>
    </tbody>
  </table>

  <h3 id="response">Réponse</h3>

<pre class="line-numbers"><code class="language-json" translate="No">{
"&lt;metric1&gt;": {
"data": [
  {
    "dimensions": {
        "account": "&lt;account&gt;",
        "&lt;dim1&gt;": "&lt;key1&gt;",
        ...
        "&lt;dimN&gt;": "&lt;keyN&gt;"
      },
    "points": [
      {
        "timestamp": &lt;bucket1&gt;,
        "value": &lt;value1&gt;
      },
      ...,
      {
        "timestamp": &lt;bucketN&gt;,
        "value": &lt;valueN&gt;
      },
    ]
  }
]
},
"&lt;metric2&gt;": {
...
},
...
}
</code></pre>
</section>

<section class="bcls-section">
  <h2 id="events">Événements</h2>

  <p>Les <code translate="No">/v1/events</code> le point de terminaison renvoie les totaux des métriques pour tout ou partie d'un flux vidéo en direct.</p>

  <p>Dans ce contexte, les métriques uniques (<code translate="No">ccu</code> , <code translate="No">fingerprint_count</code> ) représentent le <strong>Valeur totale</strong> sur la plage de requêtes. Ainsi, par exemple, une requête sans <code translate="No">from</code>/<code translate="No">to</code> paramètres renverra le nombre total de <em>unique</em> sessions (ccu) et/ou périphériques (fingerprint_count) pour l'ensemble du flux.</p>

  <h3 id="uri-1">URI</h3>

  <p><code translate="No">/v1/events/accounts/{account_id}</code></p>

  <h3 id="additional-parameters-1">Paramètres supplémentaires</h3>

  <p><em>rien</em></p>

  <h3 id="response-1">Réponse</h3>

<pre class="line-numbers"><code class="language-json" translate="No">{
"data": [
{
  "dimensions": {
    "account": "&lt;account&gt;",
    "&lt;dim1&gt;": "&lt;key1&gt;",
    ...
    "&lt;dimN&gt;": "&lt;keyN&gt;"
  },
  "totals": {
    "&lt;metric1&gt;": &lt;value1&gt;,
    ...
    "&lt;metricN&gt;": &lt;valueN&gt;
  }
}
]
}
</code></pre>


  <h3 id="export">Exportation</h3>

  <p>Le point de terminaison Events fournit également un rapport téléchargeable :</p>

  <p><code translate="No">/v1/events/accounts/{account_id}/videos/{video_id}/export?format=xlsx</code></p>

  <p>La réponse est un <strong>XLSX</strong> fichier avec des métriques en direct sur 4 feuilles :</p>
  <ul>
    <li>Sommaire</li>
    <li>Utilisateurs concurrents</li>
    <li>Vues par type d'appareil</li>
    <li>Vues par géographie</li>
  </ul>
</section>

<section class="bcls-section">
  <h2 id="usage-examples">Exemples d'utilisation</h2>

  <p>Pour tous ces exemples, nous utiliserons <strong>Compte 1234</strong> , <strong>Vidéo 5555</strong> , et supposons une heure actuelle de <strong>12h00 UTC</strong> au <strong>15 février 2020</strong>.</p>

  <hr>
  <h4 id="get-the-current-viewer-count-ccu-for-a-live-stream-or-channel">Obtenez le nombre actuel de spectateurs (CCU) pour une diffusion en direct ou une chaîne</h4>

  <p>Régler <em>de</em> à au moins 2 minutes (11:58 AM), et utilisez le dernier <em>point</em> dans la réponse.</p>

  <p><code translate="No">/v1/timeseries/accounts/1234?dimensions=video&amp;metrics=ccu&amp;where=video==5555&amp;from=1581767880000</code></p>

  <hr>
  <h4 id="get-ccu-graph-points-for-a-live-stream-over-the-past-24-hours">Obtenez des points de graphique CCU pour une diffusion en direct au cours des dernières 24 heures</h4>

  <h5 id="zoom-in-1-minute-points">Zoom avant (points d'une minute)</h5>

  <p><code translate="No">/v1/timeseries/accounts/1234?dimensions=video&amp;metrics=ccu&amp;where=video==5555&amp;from=1581681600000&amp;bucket_duration=1m</code></p>

  <h5 id="zoom-out-1-hour-points">Zoom arrière (points d'une heure)</h5>

  <p><code translate="No">/v1/timeseries/accounts/1234?dimensions=video&amp;metrics=ccu&amp;where=video==5555&amp;from=1581681600000&amp;bucket_duration=1h</code></p>

  <hr>
  <h4 id="get-the-maximum-ccu-per-day-for-a-live-channel-over-the-past-7-days">Obtenez le maximum de CCU par jour pour une chaîne en direct au cours des 7 derniers jours</h4>

  <p><code translate="No">/v1/timeseries/accounts/1234?dimensions=video&amp;metrics=ccu&amp;where=video==5555&amp;from=1581206400000&amp;bucket_duration=7d</code></p>

  <hr>
  <h4 id="get-the-maximum-ccu-at-any-time-during-a-live-stream">Obtenez le maximum de CCU à tout moment pendant une diffusion en direct</h4>

  <p><code translate="No">/v1/timeseries/accounts/1234?dimensions=video&amp;metrics=ccu&amp;where=video==5555&amp;bucket_limit=1</code></p>

  <hr>
  <h4 id="get-the-total-unique-viewers-and-seconds-viewed-for-multiple-live-streams">Obtenez le nombre total de spectateurs uniques et de secondes vues pour plusieurs diffusions en direct</h4>

  <p>La vidéo 5555 est terminée ; les chiffres sont définitifs. La vidéo 5556 est toujours active ; les chiffres sont des totaux cumulés.</p>

  <p><code translate="No">/v1/events/accounts/1234?dimensions=video&amp;metrics=fingerprint_count,video_seconds_viewed&amp;where=video==5555,5556</code></p>

  <hr>
  <h4 id="get-the-viewership-and-ad-totals-for-an-hour-long-program-on-a-live-channel">Obtenez les totaux d'audience et d'annonces pour un programme d'une heure sur une chaîne en direct&lt;</h4>

  <p>Programme diffusé de 10h00 à 11h00 (UTC)</p>

  <p><code translate="No">/v1/events/accounts/1234?dimensions=video&amp;metrics=alive_ss_ad_start,video_view,fingerprint_count&amp;where=video==5555&amp;from=1581760800000&amp;to=1581764399999</code></p>

  <hr>
  <h4 id="get-viewership-by-country-for-the-duration-of-a-live-stream">Obtenez une audience par pays pendant toute la durée d'une diffusion en direct</h4>

  <p><code translate="No">/v1/events/accounts/1234?dimensions=video,country&amp;metrics=video_view,fingerprint_count&amp;where=video==5555</code></p>
</section>

</article>