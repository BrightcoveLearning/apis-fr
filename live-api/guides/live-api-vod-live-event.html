---
title: 'API en direct : VOD de l'événement en direct'
description: 'Dans cette rubrique, vous apprendrez à créer une vidéo à la demande (VOD) à partir d'un événement de diffusion en direct une fois l'événement terminé.'
parent: Guides 
grandparent: Live API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
 <summary>{{ page.description }}</summary>
  <aside class="bcls-aside bcls-aside--information">Live to VOD ne peut pas être utilisé avec des flux chiffrés et renvoie une erreur lors de la création d'un événement de tâche Live.</aside>



<section class="bcls-section">
<h2 id="Introduction">introduction</h2>

<p>Pour les événements de diffusion en direct plus courts, vous souhaiterez peut-être rendre un enregistrement de l'événement disponible sous forme de vidéo à la demande (VOD) dans votre <span translate="No">Nuage vidéo</span> compte une fois l'événement terminé. Vous pouvez facilement le faire en ajoutant une configuration pour la VOD lorsque vous <a href="/live-api/references/reference.html#api-Live_Jobs-Create_a_Live_Job">créez votre emploi en direct</a>.</p>

<p>Fast Live to VOD permet de publier rapidement des clips avec une précision de segment tandis qu'un processus backend entièrement transparent pour le client nettoiera les limites des clips et les republiera.</p>

<p>Le résultat est un délai de commercialisation plus rapide avec un clip qui sera automatiquement republié avec les limites de clip souhaitées.</p>

<p><strong>Important</strong>:</p>

<ul>
	<li>Lorsque l'événement de diffusion en direct est terminé, arrêtez votre encodeur, mais <strong>ne pas <a href="/live-api/references/reference.html#api-Live_Jobs-Cancel_Live_Job">Annuler</a> le travail</strong>. Attendez que le clip VOD ait été créé avant d'annuler le travail, sinon il ne sera pas créé avec succès.</li>
	<li>La création de la VOD ne commencera que lorsque le <code translate="No">reconnect_time</code> pour le travail en direct a expiré.</li>
	<li>Si la durée de l'événement en direct est supérieure à 24 heures, seules les dernières 24 heures seront capturées dans la VOD.</li>
</ul>

<section class="bcls-subsection">
<h3 id="fast_vod">Option VOD rapide</h3>

<p>L'option VOD rapide vous permet d'obtenir plus rapidement la version VOD de l'événement en direct. Fast Live to VOD publiera (à l'aide d'un transmux) des rendus en direct qui seront <strong>segment précis</strong>.</p>

<p>Le le <code translate="No">output</code> les champs pour la VOD rapide sont :</p>

<ul>
  <li><code translate="No">live_to_vod</code> mis à <code translate="No">true</span> </code></li>
	<li><code translate="No">mode</code>(obligatoire pour la VOD rapide) - pour la VOD rapide, la valeur sera <code translate="No">instant</code></li>
	<li><code translate="No">playlist_label</code>(facultatif) - Uniquement applicable pour les VOD en mode instantané. Indique quelle liste de lecture utiliser pour créer une sortie VOD (à partir du travail en direct). Nécessaire uniquement si des listes de lecture personnalisées ont été définies lors de la création de tâches en direct.</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Implementation">Implémentations</h2>

<h3>Lorsque vous créez le travail en direct</h3>
<p>Le moyen le plus simple d'implémenter le live to VOD est d'inclure le <code translate="No">"live_to_vod": true</code> dans le corps de la requête lors de la création de la tâche, soit dans :</p>
<ul>
  <li>le plus haut niveau <code translate="No">videocloud</code> objet (pour créer la VOD en tant qu'asset distant)</li>
  <li>un objet de sortie qui sort vers Video Cloud ou vers S3</li>
</ul>
<h4>Envoyer à <span translate="No">Nuage vidéo</span></h4>

<p>Notez qu'il y a deux façons de <code translate="No">videocloud</code> les objets sont utilisés lorsque vous créez une nouvelle tâche en direct :</p>

<ol class="bcls-tasklist-restart">
	<li>Comprenant <code translate="No">videocloud</code> dans le <strong>champs au niveau de l'emploi</strong> va créer une vidéo dans le <span translate="No">Nuage vidéo</span> compte qui prendra le flux en direct comme ressource distante et créera la VOD dans votre bibliothèque Video Cloud :

	<pre class="line-numbers">
<code class="language-json" translate="No">{
    "live_stream": true,
    "region": "us-west-2",
    "reconnect_time": 2400,
    "live_dvr_sliding_window_duration": 30,
    <strong>
      "videocloud": {
        "video": {
          "name": "test_live_stream"
        },
        <span class="bcls-highlight">"live_to_vod": true</span>
        }
    </strong></code></pre>
	</li>
	<li>
	<p>Incluant le <code translate="No">videocloud</code> objet dans les propriétés d'un <code translate="No">outputs</code> un clip ou un objet VOD complet créera un <span translate="No">Nuage vidéo</span> vidéo pour le clip - le clip est ingéré dans <span translate="No">Nuage vidéo</span> et devient partie intégrante de la bibliothèque VOD :</p>

	<pre class="line-numbers">
<code class="language-json" translate="No">{
  "live_stream": true,
  "region": "us-west-2",
  "reconnect_time": 2400,
  "live_dvr_sliding_window_duration": 30,
	"videocloud": {
		"video": {
			"name": "test_live_stream"
		}
	},
  "outputs": [
    { "videocloud": {
        "video": {
            "name": "video name",
        },
        "ingest": {
            "profile": "<span class="bcls-input">valid-ingest-profile-name</span>"
        }
    },
    "credentials": "<span class="bcls-input">USER_VIDEOCLOUD_CREDENTIAL_LABEL</span>"
    }
  ]
}</code></pre>
    <p>Remarque : omettez le champ ingest - profile pour utiliser le profil d'ingestion par défaut pour le compte.</p>
	</li>
</ol>

<p>Vous pouvez également inclure le <code translate="no">nuage vidéo</code> dans un objet de sortie (dans ce cas, vous n'avez pas besoin de <code translate="No">live_to_vod</code> champ):</p>

<pre class="line-numbers">
<code class="language-json" translate="No">{
  "live_stream": true,
  "region": "us-west-2",
  "reconnect_time": 600,
  "ad_insertion": false,
  "outputs": [
    { OTHER_JOB_OUTPUT_OBJECT },
    { OTHER_JOB_OUTPUT_OBJECT_2 },
    <span class="bcls-highlight">{ "videocloud": {
        "video": {
            "name": "video name",
            "description": "video description",
            "long_description": "long description",
            "tags": [
            "tag1", "tag2"
            ],
            "schedule":
            { "starts_at": "2017-01-01T12:00:00-04:00", "ends_at": "2099-01-01T12:00:00-04:00" }
            ,
            "custom_fields": {
                "someCustomField": "value"
            },

        },
        "ingest": {
            "profile": "<span class="bcls-input">valid-ingest-profile-name</span>"
        }
    },
    "credentials": "<span class="bcls-input">USER_VIDEOCLOUD_CREDENTIAL_LABEL</span>"
    } </span>
  ]
}</code></pre>

<aside class="bcls-aside bcls-aside--information">Si vous n'avez pas encore d'informations d'identification pour la configuration de votre compte Video Cloud, vous pouvez ajouter de nouvelles informations d'identification <a href="/live-api/references/reference.html#operation/CreateCredential">via l'API</a>.</aside>

<p>Notez que pour les métadonnées de la vidéo, vous pouvez inclure tous les champs répertoriés pour le <a href="https://docs.brightcove.com/cms-api/v1/doc/index.html#api-videoGroup-Create_Video">Créer une vidéo</a> fonctionnement de l'API CMS.</p>

<p>Les profils d'ingestion définissent les rendus qui seront créés pour la VOD. Pour <code translate="No">valid-ingest-profile-name</code> , vous pouvez remplacer le nom de n'importe quel profil d'acquisition personnalisé ou standard pour votre compte. Les profils standard dont vous disposez dépendent de l'activation ou non de votre compte pour la livraison dynamique. Voir le <a href="https://apis.support.brightcove.com/ingest-profiles/references/standard-ingest-profiles-dynamic-delivery-and-context-aware-encoding.html">Profils d'ingestion standard pour la livraison dynamique et l'encodage contextuel</a> ou la <a href="https://apis.support.brightcove.com/ingest-profiles-legacy/references/standard-ingest-profiles-legacy-transcoding.html">Profils d'ingestion standard pour le transcodage hérité</a>.</p>

<aside class="bcls-aside bcls-aside--information">Notez que le <code translate="No">profile</code> le champ est facultatif. Si vous ne spécifiez pas de profil, le profil par défaut du compte sera utilisé.</aside>

<h4>Envoyer à S3</h4>

<p>Pour enregistrer une version VOD de l'événement dans votre compartiment S3, incluez une version de l'événement en surbrillance <strong>sortir</strong> au dessous de.</p>

<pre class="line-numbers">
<code class="language-json" translate="No">{
  "live_stream": true,
  "region": "us-west-2",
  "reconnect_time": 600,
  "ad_insertion": false,
  "outputs": [
    { OTHER_JOB_OUTPUT_OBJECT },
    { OTHER_JOB_OUTPUT_OBJECT_2 },
    <span class="bcls-highlight">{
      "url":"s3://YOUR_BUCKET/path/filename.mp4",
      "credentials": "<span class="bcls-input">YOUR_CREDENTIAL_LABEL</span>",
      "notifications": [
        {
          "url": "http://httpbin.org/post?vodStateChange"
        },
        {
          "url": "http://httpbin.org/post?vodFinished",
          "event": "output_finished"
        }
      ]
    }</span>
  ]
}</code></pre>

<aside class="bcls-aside bcls-aside--information">Une étiquette d'identification pour un nom d'utilisateur + mot de passe valide pour votre compartiment S3 doit avoir été créée lors de la configuration de votre compte Live, et l'étiquette d'identification vous a été envoyée. Si vous ne l'avez pas, s'il vous plaît <a href="https://supportportal.brightcove.com/s/login/?language=en_US">Contacter l'assistance Brightcove</a>.</aside>
<h3>Créez la VOD sous forme de clip vidéo ouvert</h3>
<p>Une autre façon d'obtenir une VOD pour un événement en direct est de <a href="/live-api/guides/live-api-creating-vod-clips.html">Créer un clip VOD</a> sans heure de fin. Voir le document de coupure pour plus de détails.</p>
</section>

<section class="bcls-section">
<h2 id="Limitations">Limites</h2>

<ul>
	<li>Si tu <a href="/live-api/references/reference.html#api-Live_Jobs-Stop_Live_Job">arrêter (annuler)</a> le travail en direct avant la création de la VOD, il ne sera pas créé. Au lieu de cela, arrêtez votre encodeur pour lancer la création de la VOD et attendez que cela se termine avant d'arrêter le travail.</li>
	<li>Pour <a href="/live-api/guides/live-api-static-entry-points.html">Point d'entrée statique</a> ruisseaux <strong>seul</strong> , Live to VOD ne peut pas être configuré pour archiver le flux à la fin.
	<p style="font-weight:bold;">Alternatives :</p>

	<ul>
		<li>Utilisation <a href="/live-api/guides/live-api-creating-vod-clips.html">coupure</a> pour archiver l'intégralité de l'événement en direct en tant que VOD. La fenêtre d'écrêtage sera disponible pour la durée standard après un événement ou jusqu'à la prochaine activation du SEP (selon la plus courte des deux).</li>
	</ul>
	</li>
</ul>
</section>
</article>