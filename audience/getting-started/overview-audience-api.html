---
title: 'Aperçu: API d'audience'
description: 'Dans cette rubrique, vous découvrirez l'API Audience. L'API Audience vous permet de récupérer les données d'événement et de prospect.'
parent: Getting Started 
grandparent: Audience API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="api-reference">Référence API</h2>
    <p>Voir aussi le <a href="/audience/references/reference.html">Référence API</a>.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Base_URL">URL de base</h2>
    <p>L'URL de base de l'API Audience est :</p>
    <pre class="line-numbers">
<code class="language-http" translate="No">https://audience.api.brightcove.com/v1</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="Account_path">Chemin du compte</h2>
    <p>Dans tous les cas, des demandes seront faites pour un compte Video Cloud spécifique. Vous devrez toujours ajouter le terme « comptes » suivi de votre identifiant de compte à l'URL de base :</p>
    <pre class="line-numbers">
<code class="language-http" translate="No">https://audience.api.brightcove.com/v1/accounts/<span class="bcls-input">{account_id}</span> </code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="Authentication">Authentification</h2>
    <p>L'API Audience utilise le Brightcove <a href="/oauth/getting-started/overview-oauth-api-v4.html">Service OAuth</a> pour authentifier les appels.</p>
    <p>Vous devrez d'abord obtenir les informations d'identification du client (un <code translate="No">client_id</code> et <code translate="No">client_secret</code>). Il s'agit d'une opération unique qui peut être effectuée à l'aide du <a href="https://studio.support.brightcove.com/admin/managing-api-authentication-credentials.html">Interface utilisateur des informations d'identification OAuth</a>. Vous aurez besoin d'autorisations pour les opérations d'audience/lecture :</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="Required Permissions" src="/assets/images/audience/operations.png" />
      <figcaption class="bcls-caption--image">Autorisations requises</figcaption>
    </figure>
    <p>Vous pouvez obtenir les informations d'identification du client directement à partir du service Brightcove OAuth en utilisant <a href="/oauth/guides/oauth-create-client-credentials-using-curl.html">boucle</a> ou <a href="/oauth/guides/oauth-create-client-credentials-using-postman.html">Facteur</a>.</p>
    <p>Vous aurez également besoin d'un <code translate="No">access_token</code> , qui est obtenu en utilisant le <code translate="No">client_id</code> et <code translate="No">client_secret</code> et transmis dans un en-tête d'autorisation avec votre requête API :</p>
    <pre class="line-numbers">
<code class="language-http" translate="No">Authorization: Bearer <em>{access_token}</em></code></pre>
    <p>Les <code translate="No">access_token</code> expire après cinq minutes, vous devez donc en obtenir un pour chaque demande, ou vérifier que votre token est toujours valide. Voir <a href="/oauth/guides/getting-access-tokens.html">Obtenir des jetons d'accès</a> pour une explication détaillée de la façon d'obtenir des jetons d'accès, y compris des exemples de code.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Error_handling">La gestion des erreurs</h2>
    <p>Si une erreur se produit, l'API répondra avec l'un des codes d'état suivants et un code d'erreur correspondant dans le corps de la réponse :</p>
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>Code d'état</th>
          <th>Code d'erreur</th>
          <th>La description</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td>400</td>
          <td><code translate="No">BAD_REQUEST_ERROR</code></td>
          <td>Les paramètres de requête ne sont pas valides</td>
        </tr>
        <tr>
          <td>401</td>
          <td><code translate="No">UNAUTHORIZED_ERROR</code></td>
          <td>Le jeton d'accès est soit absent, a expiré ou n'est pas valide</td>
        </tr>
        <tr>
          <td>404</td>
          <td><code translate="No">RESOURCE_NOT_FOUND</code></td>
          <td>L'URL n'existe pas</td>
        </tr>
        <tr>
          <td>429</td>
          <td><code translate="No">REQUEST_THROTTLED_ERROR</code></td>
          <td>L'utilisateur a dépassé la politique de limitation de débit</td>
        </tr>
        <tr>
          <td>500</td>
          <td><code translate="No">INTERNAL_ERROR</code></td>
          <td>une erreur interne s'est produite</td>
        </tr>
        <tr>
          <td>504</td>
          <td><code translate="No">GATEWAY_TIMEOUT_ERROR</code></td>
          <td>Le serveur a expiré lors de l'exécution de votre demande</td>
        </tr>
      </tbody>
    </table>
    <p>Voici un exemple de corps de réponse pour une erreur :</p>
    <pre class="line-numbers">
<code class="language-json" translate="No">[
	{
	"error_code": "UNAUTHORIZED_ERROR",
	"message": "Permission denied"
	}
]</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="Parameters">Paramètres</h2>
    <p>Vous pouvez ajouter plusieurs paramètres aux requêtes pour limiter et filtrer les données récupérées. Celles-ci s'appliquent à tous les types de requêtes décrits dans les sections qui suivent.</p>
    <h3 id="Filtering_results">Filtrage des résultats</h3>
    <p>Vous pouvez filtrer les résultats en utilisant le <code translate="No">where</code> paramètre. La syntaxe des filtres est :</p>
    <pre class="line-numbers">
<code class="language-http" translate="No">where=field1==value1;field2==value2</code></pre>
    <p>Par exemple:</p>
    <pre class="line-numbers">
<code class="language-http" translate="No">where=video_id==123456789;video_name==test</code></pre>
    <p>Les virgules sont traitées comme des OU logiques et les points-virgules comme des ET logiques. Par exemple, <code translate="No">where=video_id==1234,5678;video_name=test</code> est interprété comme "où video_id = 1234 OU 5678, AND video_name = test".</p>
    <h3>Sélection des champs à retourner</h3>
    <p>Une liste de champs peut être spécifiée dans la demande pour limiter les résultats à ce sous-ensemble de champs. La syntaxe des champs est :</p>
    <pre class="line-numbers">
<code class="language-http" translate="No">fields=field1,field4</code></pre>
    <p>Par exemple:</p>
    <pre class="line-numbers">
<code class="language-http" translate="No">fields=video_id,video_name</code></pre>
    <p>Les champs que vous pouvez filtrer et trier sont détaillés pour chaque type de demande dans les sections qui suivent.</p>
    <h3 id="Date_ranges">Plages de dates</h3>
    <p>Les plages de dates peuvent être spécifiées dans <code translate="No">from</code> et <code translate="No">to</code> paramètres et sont appliqués à la date à laquelle l'événement de vue a été mis à jour pour la dernière fois (le champ updated_at). Les plages de dates peuvent être indiquées dans les formats suivants :</p>
    <ul>
      <li>La valeur du texte <code translate="No">now</code> qui représente l'heure actuelle</li>
      <li>Valeurs de temps d'époque en millisecondes, telles que <code translate="No">1377047323000</code></li>
      <li>Dates exprimées au format de date international standard ISO 8601 : <code translate="No">YYYY-MM-DD</code> format, tel que <code translate="No">2013-09-12</code>. Pour les dates exprimées dans ce format :
        <ul>
          <li>Toute plage de dates spécifiée sera interprétée en UTC</li>
          <li>L'heure de la date donnée sera interprétée comme minuit ( <code translate="No">00:00:00</code> ) à la date indiquée</li>
        </ul>
      </li>
      <li>Dates relatives : vous pouvez exprimer l'une ou l'autre des <code translate="No">to</code> et <code translate="No">from</code> valeurs par rapport à l'autre dans <code translate="No">d</code> (jours), <code translate="No">h</code> (les heures), <code translate="No">m</code> (minutes), ou <code translate="No">s</code> (seconde). Par exemple:
        <ul>
          <li><code class="language-http" translate="No">from=2015-01-01&amp;to=31d</code></li>
          <li><code class="language-http" translate="No">from=-48h&amp;to=now</code></li>
          <li><code class="language-http" translate="No">from=-2d&amp;to=now</code>(donnera les mêmes résultats que l'exemple précédent)</li>
          <li><code class="language-http" translate="No">from=-365d&amp;to=2015-12-31</code></li>
          <li><code class="language-http" translate="No">from=-10m&amp;to=now</code></li>
        </ul>
      </li>
    </ul>
    <h3 id="Paging_results">Résultats de la pagination</h3>
    <p>Les <code translate="No">limit</code> est le nombre d'articles à retourner (par défaut : 25 ; maximum : 200). <code translate="No">offset</code> est le nombre d'éléments à ignorer (par défaut : 0). Vous pouvez utiliser <code translate="No">limit</code> et <code translate="No">offset</code> ensemble pour créer une application qui parcourt les résultats. Chacun comprend le <code translate="No">limit</code> , <code translate="No">offset</code> , et <code translate="No">count.</code> , que vous pouvez utiliser pour configurer l'itération sur les résultats totaux. Par exemple, en JavaScript, vous pouvez obtenir le nombre total d'itérations requises comme ceci :</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">// response is the JSON-parsed response from the first request
var totalRequests = Math.ceil(response.count / response.limit)</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="Retrieving_view_events">Récupération des événements de vue</h2>
    <p>Pour récupérer les événements de vue dans un compte, effectuez une <code translate="No">GET</code> requête à la ressource view_events :</p>
    <pre class="line-numbers">
<code class="language-http" translate="No">https://audience.api.brightcove.com/v1/accounts/{account_id}/view_events</code></pre>
    <aside class="bcls-aside bcls-aside--warning">Afficher uniquement les événements qui ont été <em>traité</em> apparaîtra dans la réponse.</aside>
    <p>Voici un exemple de requête en cURL</p>
    <pre class="line-numbers">
<code class="language-bash" translate="No">curl -i https://audience.api.brightcove.com/v1/accounts/{account_id}/view_events?where=video_id==123&amp;from=-5d&amp;to=now&amp;sort=-created_at \
  -H "Authorization: Bearer {token}"</code></pre>

    <details>
			<summary>Exemple de réponse</summary>
<pre class="line-numbers">
<code class="language-json" translate="No">{
"count": 27,
"limit": 25,
"offset": 0,
"result": [
		{
				"created_at": "2016-04-25T18:30:21.651Z",
				"page_url": "http://players.brightcove.net/1486906377/V1s6NOwRx_default/index.html?videoId=4842718056001",
				"player_id": "V1s6NOwRx",
				"time_watched": 2,
				"updated_at": "2016-04-25T18:30:21.651Z",
				"video_id": "4842718056001",
				"video_name": "Horses Heading to the Track",
				"watched": 19
		},
		{
				"created_at": "2016-04-25T18:31:55.071Z",
				"page_url": "http://players.brightcove.net/1486906377/BkgFuzyhg_default/index.html?videoId=4842718056001",
				"player_id": "BkgFuzyhg",
				"time_watched": 15,
				"updated_at": "2016-04-25T18:32:00.879Z",
				"video_id": "4842718056001",
				"video_name": "Horses Heading to the Track",
				"watched": 99
		}, ...
}
]</code></pre>
		</details>
    <h3 id="fieldsForViewEvents">Champs de filtrage et de sélection</h3>
    <p>Tous les <a href="#Parameters">paramètres</a> peut être utilisé avec <code translate="No">view_event</code> demandes.</p>
    <p>Voici un exemple de requête dans cURL en utilisant les paramètres :</p>
    <pre class="line-numbers">
<code class="language-bash" translate="No">curl -i https://audience.api.brightcove.com/v1/accounts/{account_id}/view_events?where=video_id==123&amp;from=-5d&amp;to=now&amp;sort=-created_at \
  -H "Authorization: Bearer {token}"</code></pre>
    <p>Les champs suivants sont pris en charge pour <code translate="No">view_event</code> requêtes lors du filtrage avec un <code translate="No">where</code> clause ou lors d'une sélection lors d'une <code translate="No">fields</code> clause:</p>
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>Champ</th>
          <th>La description</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><code translate="No">video_id</code></td>
          <td>ID vidéo Brightcove</td>
        </tr>
        <tr>
          <td><code translate="No">video_name</code></td>
          <td>Nom de la vidéo Brightcove</td>
        </tr>
        <tr>
          <td><code translate="No">tracking_id</code></td>
          <td>Identifiant de suivi personnalisé</td>
        </tr>
        <tr>
          <td><code translate="No">external_id</code></td>
          <td>Le Marketo, Eloqua ou GUID personnalisé</td>
        </tr>
        <tr>
          <td><code translate="No">player_id</code></td>
          <td>L'ID du lecteur Brightcove qui a créé l'événement de vue</td>
        </tr>
        <tr>
          <td><code translate="No">page_url</code></td>
          <td>L'URL de la page où l'événement de vue a été créé</td>
        </tr>
        <tr>
          <td><code translate="No">watched</code></td>
          <td>Pourcentage regardé</td>
        </tr>
        <tr>
          <td><code translate="No">time_watched</code></td>
          <td>Secondes de la vidéo regardée</td>
        </tr>
        <tr>
          <td><code translate="No">created_at</code></td>
          <td>Date de création</td>
        </tr>
        <tr>
          <td><code translate="No">updated_at</code></td>
          <td>Date de dernière mise à jour</td>
        </tr>
        <tr>
          <td><code translate="No">is_synced</code></td>
          <td>Un booléen indiquant si l'événement de vue a été synchronisé ou non</td>
        </tr>
        <tr>
          <td><code translate="No">event_1</code></td>
          <td rowspan="3">Événements personnalisés</td>
        </tr>
        <tr>
          <td><code translate="No">event_2</code></td>
        </tr>
        <tr>
          <td><code translate="No">event_3</code></td>
        </tr>
        <tr>
          <td><code translate="No">metric_1</code></td>
          <td rowspan="3">Métriques personnalisées</td>
        </tr>
        <tr>
          <td><code translate="No">metric_2</code></td>
        </tr>
        <tr>
          <td><code translate="No">metric_3</code></td>
        </tr>
      </tbody>
    </table>
  </section>
  <section class="bcls-section">
    <h2 id="Retrieving_Leads">Récupérer des prospects</h2>
    <p>Pour récupérer les événements de vue dans un compte, effectuez une <code translate="No">GET</code> demande au <code translate="No">view_events</code> Ressource:</p>
    <pre class="line-numbers">
<code class="language-http" translate="No">https://audience.api.brightcove.com/v1/accounts/{account_id}/leads</code></pre>
    <details>
			<summary>Exemple de réponse :</summary>
<pre class="line-numbers">
<code class="language-json" translate="No">{
"count": 2,
"limit": 25,
"offset": 0,
"result": [
		{
				"created_at": "2016-06-30T12:57:11.283Z",
				"email_address": "bbailey@brightcove.com",
				"first_name": "Bob",
				"last_name": "Bailey",
				"page_url": "http://players.brightcove.net/1486906377/Hk4TBqzL_default/index.html?videoId=4997275041001",
				"player_id": "Hk4TBqzL",
				"video_id": "4997275041001"
		},
		{
				"created_at": "2016-06-30T12:57:33.301Z",
				"email_address": "rcrooks@brightcove.com",
				"first_name": "Robert",
				"last_name": "Crooks",
				"page_url": "http://players.brightcove.net/1486906377/Hk4TBqzL_default/index.html?videoId=4997275041001",
				"player_id": "Hk4TBqzL",
				"video_id": "4997275041001"
		}
]
}</code></pre>
		</details>
    <h3 id="fieldsForLeads">Champs de filtrage et de sélection</h3>
    <p>Tous les <a href="#Parameters">paramètres</a> peut être utilisé avec <code translate="No">leads</code> demandes.</p>
    <p>Voici un exemple de requête dans cURL en utilisant les paramètres :</p>
    <pre class="line-numbers">
<code class="language-bash" translate="No">curl -i https://audience.api.brightcove.com/v1/accounts/{account_id}/leads?where=video_id==123&amp;from=-5d&amp;to=now&amp;sort=-created_at \
  -H "Authorization: Bearer {token}"</code></pre>
    <p>Les champs suivants sont pris en charge pour <code translate="No">leads</code> requêtes lors du filtrage avec un <code translate="No">where</code> clause ou lors d'une sélection lors d'une <code translate="No">fields</code> clause:</p>
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>Champ</th>
          <th>La description</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><code translate="No">video_id</code></td>
          <td>ID vidéo Brightcove</td>
        </tr>
        <tr>
          <td><code translate="No">external_id</code></td>
          <td>Le Marketo, Eloqua ou GUID personnalisé</td>
        </tr>
        <tr>
          <td><code translate="No">player_id</code></td>
          <td>L'ID du lecteur Brightcove qui a créé l'événement de vue</td>
        </tr>
        <tr>
          <td><code translate="No">page_url</code></td>
          <td>L'URL de la page où l'événement de vue a été créé</td>
        </tr>
        <tr>
          <td><code translate="No">created_at</code></td>
          <td>Date de création</td>
        </tr>
        <tr>
          <td><code translate="No">email_address</code></td>
          <td>L'adresse e-mail du prospect</td>
        </tr>
        <tr>
          <td><code translate="No">first_name</code></td>
          <td>Le prénom du lead s'il est fourni</td>
        </tr>
        <tr>
          <td><code translate="No">last_name</code></td>
          <td>Le nom de famille du prospect s'il est fourni</td>
        </tr>
        <tr>
          <td><code translate="No">business_phone</code></td>
          <td>Le numéro de téléphone du prospect si fourni</td>
        </tr>
        <tr>
          <td><code translate="No">country</code></td>
          <td>Le pays du responsable s'il est fourni</td>
        </tr>
        <tr>
          <td><code translate="No">company_name</code></td>
          <td>La société du chef de file si elle est fournie</td>
        </tr>
        <tr>
          <td><code translate="No">industry</code></td>
          <td>L'industrie à laquelle appartient le plomb s'il est fourni</td>
        </tr>
      </tbody>
    </table>
  </section>
</article>