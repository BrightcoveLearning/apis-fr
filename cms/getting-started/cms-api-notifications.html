---
title: 'Notifications d'API CMS'
description: 'Dans cette rubrique, vous découvrirez <span translate="No">API CMS</span> avis. Les <span translate="No">API CMS</span> fournit des notifications de modifications apportées aux vidéos de votre compte, qu'elles soient effectuées par un utilisateur de compte ou par le système Video Cloud.'

parent: 'Getting Started' 
grandparent: CMS API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
  <h2 id="overview">Aperçu</h2>
  
  <p>Vous pouvez recevoir des notifications lorsque <code translate="No">video-change</code> événements se produisent dans votre vidéothèque. Les notifications seront envoyées à l'URL que vous spécifiez, qui doit pointer vers une application capable de gérer <span translate="No">HTTP</span> <code translate="No">POST</code> demandes.</p>
  
  <h3>Authentification</h3>
  
  <p>Comme toutes les demandes adressées à l'API CMS, les demandes de configuration ou de liste d'abonnements aux notifications doivent être authentifiées à l'aide d'un <a href="/oauth/guides/getting-access-tokens.html">jeton d'accès</a>. Les informations d'identification du client utilisées pour obtenir le jeton d'accès doivent avoir des autorisations pour <code translate="No">video-cloud/notifications/all</code> (<strong translate="No">CMS-&gt;Notifications</strong> si vous utilisez le <a href="https://studio.support.brightcove.com/admin/managing-api-authentication-credentials.html">Interface utilisateur de Studio</a> pour créer les identifiants.)</p>
  
  <h3>Installer</h3>
  
  <p>Vous pouvez spécifier jusqu'à 10 points de terminaison pour recevoir des notifications en effectuant un <code translate="No">POST</code> demande à <code class="language-http" translate="No">https://cms.api.brightcove.com/v1/accounts/{account_id}/subscriptions</code> et en incluant JSON dans le corps de la requête comme ceci :</p>
  
  <pre class="line-numbers">
        <code class="language-json" translate="No">{
        "endpoint":"http://solutions.brightcove.com/bcls/di-api/di-callbacks.php",
        "events":["video-change"]
        }
        </code>
        </pre>
  
  <p>Les notifications sont envoyées au format JSON. Voici un exemple :</p>
  
  <pre class="line-numbers">
        <code class="language-json" translate="No">{"timestamp":1423840514446,
        "account_id":"775205503001",
        "event":"video-change",
        "video":"4020894387001",
        "version":26}
        </code>
        </pre>
  
  <aside class="bcls-aside bcls-aside--information">Il n'existe actuellement aucun autre moyen de s'abonner aux notifications que via l'API.</aside>
  
  <h3>Champs de notification</h3>
  
  <table class="bcls-table">
    <thead class="bcls-table__head">
      <tr>
        <th>Article</th>
        <th>La description</th>
      </tr>
    </thead>
    <tbody class="bcls-table__body">
      <tr>
        <td ><code translate="No">timestamp</code></td>
        <td >moment où l'événement s'est produit dans <span translate="No">Époque</span> millisecondes</td>
      </tr>
      <tr>
        <td ><code translate="No">account_id</code></td>
        <td >les <span translate="No">Nuage vidéo</span> identifiant de compte</td>
      </tr>
      <tr>
        <td ><code translate="No">event</code></td>
        <td >le type d'événement - actuellement ce sera toujours <code translate="No">video-change</code></td>
      </tr>
      <tr>
        <td ><code translate="No">video</code></td>
        <td >l'identifiant de la vidéo</td>
      </tr>
      <tr>
        <td ><code translate="No">version</code></td>
        <td >la version de la vidéo - chaque ensemble d'événements de changement incrémente la version vidéo - par exemple, la création d'un nouvel ensemble de rendus constituerait un ensemble d'événements de changement</td>
      </tr>
    </tbody>
  </table>
  
  <p>Les demandes de création d'abonnement recevront un <span translate="No">HTTP 422</span> réponse d'erreur pour les conditions suivantes :</p>
  
  <ul>
    <li>Les <code translate="No">endpoint</code> ou <code translate="No">events</code> le champ est manquant dans le corps de la requête</li>
    <li>Les <code translate="No">events</code> la valeur du champ n'est pas une liste (tableau)</li>
    <li>L'abonnement défini existe déjà</li>
    <li>Vous avez déjà 10 abonnements à cet événement</li>
  </ul>
  
  <h3>Échecs de notification</h3>
  
  <p>Le système de notification traite tout <code translate="No">4xx</code> ou <code translate="No">5xx</code> retour du serveur client en tant qu'échec réessayable. Les rappels en échec seront réessayés jusqu'à 20 fois, avec un délai exponentiellement croissant entre les rappels suivants. Les premières tentatives auront lieu quelques minutes après la première tentative de rappel. Si le rappel continue d'échouer et que nous arrivons à la 20e tentative, le délai de nouvelle tentative sera de quelques jours.</p>
  
  <aside class="bcls-aside bcls-aside--information">&gt; Remarques :
  <ul>
    <li><code translate="No">video-change</code> les événements sont déclenchés par des processus système automatisés ainsi que par des actions de l'utilisateur. Par conséquent, ces événements ne correspondent pas toujours aux modifications que vous avez apportées aux propriétés de la vidéo dans Studio ou via les API.</li>
    <li>Les gestionnaires de notifications sur les serveurs construits sur HTTP2 ne sont actuellement pas pris en charge. Les notifications envoyées aux serveurs HTTP2 peuvent ne pas être livrées sans renvoyer d'erreur.</li>
  </ul>
  </aside>
  
  <h3>Pare-feu</h3>
  
  <p>Si votre organisation a une politique stricte concernant les sources de trafic entrant via votre pare-feu, nous autorisons les IP AWS us-east-1/Virginia. Ceci est sujet à changement, donc toutes les adresses IP AWS doivent être ajoutées à la liste blanche. Voir <a href="http://docs.aws.amazon.com/general/latest/gr/aws-ip-ranges.html">http://docs.aws.amazon.com/general/latest/gr/aws-ip-ranges.html</a> pour plus d'informations.</p>
  
  <h3>Point de terminaison pour les abonnements aux notifications</h3>
  
  <pre class="line-numbers">
        <code class="language-http" translate="No">/accounts/{account_id}/subscriptions
        </code>
        </pre>
  
  <h3 id="createSubscription">Créer un nouvel abonnement</h3>
  
  <p>Pour créer un nouvel abonnement, soumettez un <code translate="No">POST</code> demande avec un corps de demande comprenant le point de terminaison auquel vous souhaitez que les notifications soient envoyées et <code translate="No">video-change</code> en tant qu'élément unique dans un <code translate="No">events</code> déployer:</p>
  
  <pre class="line-numbers">
        <code class="language-json" translate="No">{ "endpoint": "http://solutions.brightcove.com:9002", "events": [ "video-change" ] }
        </code>
        </pre>
  
  <h3 id="getSubscriptions">Obtenez la liste de vos abonnements</h3>
  
  <p>Pour obtenir la liste de tous vos abonnements, envoyez un <code translate="No">GET</code> demande au point de terminaison des abonnements.</p>
  
  <h3 id="getSubscription">Obtenir ou supprimer un seul abonnement</h3>
  
  <p>Utilisez le point de terminaison suivant pour obtenir ou supprimer un seul abonnement :</p>
  
  <h4>Point de terminaison</h4>
  
  <pre class="line-numbers">
        <code class="language-http" translate="No">/accounts/{account_id}/subscriptions/{subscription_id}
        </code>
        </pre>
  
  <p>UNE <code translate="No">GET</code> demande récupérera l'abonnement. UNE <code translate="No">DELETE</code> demande supprimera l'abonnement. Vous ne pouvez pas mettre à jour un abonnement pour le moment. Si vous souhaitez modifier un abonnement, vous devrez le supprimer et en créer un nouveau.</p>
  </section>
  
  <section class="bcls-section">
  <h2 id="What_triggers">Qu'est-ce qui déclenche les notifications ?</h2>
  
  <p><code translate="No">video-change</code> les événements sont déclenchés par tout changement dans les métadonnées de la vidéo. Cela inclut toute modification de la vidéo effectuée dans Studio ou via un <span translate="No">API CMS</span> méthode d'écriture. Il existe également des événements système qui déclencheront <code translate="No">video-change</code> événements.</p>
  
  <p>Les changements qui déclencheront un événement incluent :</p>
  
  <ul>
    <li>Une vidéo est créée</li>
    <li>L'ingestion de la vidéo ou du fichier d'éléments commence</li>
    <li>L'ingestion de la vidéo ou du fichier d'éléments est terminée</li>
    <li>L'encodage d'un nouveau rendu se termine</li>
    <li>Une image d'affiche est créée</li>
    <li>Une image miniature est créée</li>
    <li>Une vidéo est supprimée</li>
    <li>Les métadonnées de la vidéo sont modifiées (par le système ou un utilisateur)</li>
  </ul>
  
  <h3>Remarques</h3>
  
  <p>Le retranscodage d'une vidéo ne déclenchera pas <code translate="No">video-change</code> à moins que l'ensemble de rendu résultant soit différent.</p>
  
  <p>Certains événements système se produisent après la suppression d'une vidéo. Vous recevrez donc des notifications concernant une vidéo après sa suppression.</p>
  
  <p>Ce qui sera <strong>ne pas</strong> déclencher un <code translate="No">video-change</code> l'événement est une modification d'un élément vidéo qui ne modifie pas les métadonnées de la vidéo. Par exemple, si vous remplacez un fichier ou une image de piste de texte distant, mais que l'URL enregistrée dans les métadonnées de la vidéo reste la même, non <code translate="No">video-change</code> l'événement se produira et aucune notification ne sera envoyée.</p>
  </section>
  </article>