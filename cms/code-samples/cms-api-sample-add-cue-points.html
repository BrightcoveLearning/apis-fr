---
title: 'Ajouter des points de repère'
description: "Dans cet exemple, vous apprendrez à ajouter des points de repère à une vidéo par programmation à l'aide de CMS API."

parent: 'Code Samples' 
grandparent: CMS API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="introduction">introduction</h2>

    <aside class="bcls-aside bcls-aside--information">Cet exemple et le code associé sont fournis comme guide pour le développement de votre production. Le code n'est pas certifié pour une utilisation en production ni officiellement pris en charge.</aside>

    <p>Les points de repère sont des emplacements spécifiés sur la chronologie de la vidéo. Lorsque la vidéo est lue, un événement est automatiquement diffusé à chaque fois qu'un point de repère est atteint - en utilisant l'API Player, vous pouvez écouter ces événements et prendre les mesures que vous souhaitez. De plus, vous pouvez lire toutes les informations de point de repère à partir des métadonnées vidéo stockées dans le lecteur <code translate="No">mediainfo</code> objet, ce qui vous permet de <a href="https://player.support.brightcove.com/code-samples/brightcove-player-sample-ad-indicators-playback-bar.html">marquer les points de repère sur la chronologie de la vidéo</a> d'une manière ou d'une autre si vous le souhaitez.</p>

    <p>Il existe deux types de points de repère:</p>

    <ul>
      <li>Points de repère publicitaire: ils sont utilisés pour marquer les endroits où une demande de publicité doit être faite (si la vidéo et le lecteur sont activés pour la publicité).</li>
      <li>Points de repère de code: ils sont utilisés pour effectuer des actions à l'aide de l'API Player - certains usages typiques sont l'affichage d'une sorte d'appel à l'action (CTA) ou l'affichage d'une image ou d'un texte relatif au contenu vidéo, peut-être sous forme de superposition vidéo ou dans la page autour du lecteur.</li>
    </ul>
  </section>

  <section class="bcls-section">
    <h2 id="implementation_overview">Présentation de la mise en œuvre</h2>

    <p>Vous pouvez ajouter des points de repère dans <a href="https://studio.support.brightcove.com/media/working-cue-points-media-module.html">le module Studio Média</a>. Vous pouvez également les ajouter à l'aide de CMS API, qui est la méthode que nous utiliserons dans cet exemple.</p>

    <h3>Méthode HTTP</h3>

    <p>Des points de repère peuvent être ajoutés lorsque vous <a href="/cms/references/reference.html#api-videoGroup-Create_Video">créer la vidéo</a> ou plus tard avec un <a href="/cms/references/reference.html#api-videoGroup-Update_Video">demande de mise à jour</a>. Dans cet exemple, nous les ajouterons à une vidéo existante en créant un <a href="/cms/references/reference.html#api-videoGroup-Update_Video">mise à jour vidéo</a> demande, ce qui signifie que vous utiliserez le <code translate="No">PATCH</code> méthode.</p>

    <aside class="bcls-aside bcls-aside--information">Si vous mettez à nouveau la vidéo à jour pour modifier ou ajouter des points de repère supplémentaires, vous devez inclure l'intégralité du tableau des points de repère dans le corps de la demande.</aside>

    <h3>Point de terminaison</h3>

    <p>Le point de terminaison de la demande de mise à jour vidéo est:</p>

    <pre class="line-numbers">
          <code class="language-http" translate="No">https://cms.api.brightcove.com/v1/accounts/<span class="bcls-input">account_id</span></code>/vidéos/<span class="bcls-input">id_vidéo</span></pre>

    <h3>Corps de la demande</h3>

    <p>Le corps de la requête est un objet JSON qui peut contenir de nombreux éléments de métadonnées vidéo. Ici, nous allons simplement regarder le <code translate="No">cue_points</code> champ, qui est défini sur un tableau d'objets de point de repère, comme dans l'exemple suivant:</p>

    <pre class="line-numbers">
          <code class="language-json" translate="No">{
          "cue_points": [
              {
                "name": "Ad Cue Point",
                "type": "AD",
                "time": 2.0,
                "metadata": null,
                "force_stop": false
              },
              {
                "name": "Code Cue Point",
                "type": "CODE",
                "time": 4.0,
                "metadata": "The metadata might be text or the url for an image to display",
                "force_stop": true
              }
            ]
          }</code></pre>

    <h3>Champs d'objet de point de repère</h3>

    <p>Vous trouverez ci-dessous une description des champs des objets de point de repère.</p>

    <table class="bcls-table">
      <caption class="bcls-caption--table">Champs d'objet de point de repère</caption>
      <thead class="bcls-table__head">
        <tr>
          <th>Champ</th>
          <th>Taper</th>
          <th>Obligatoire</th>
          <th>La description</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td ><code translate="No">name</code></td>
          <td >chaîne de caractères</td>
          <td >non</td>
          <td >Un nom arbitraire - cela peut être utile pour identifier un point de repère particulier dans votre code API Player</td>
        </tr>
        <tr>
          <td ><code translate="No">type</code></td>
          <td >chaîne de caractères</td>
          <td >Oui</td>
          <td >Doit être <code translate="No">AD</code> ou <code translate="No">CODE</code></td>
        </tr>
        <tr>
          <td ><code translate="No">time</code></td>
          <td >numéro</td>
          <td >Oui</td>
          <td >Temps pour le point de repère en secondes depuis le début de la vidéo <sup> <strong> <a href="#note1">[1]</a> </strong> </sup></td>
        </tr>
        <tr>
          <td ><code translate="No">metadata</code></td>
          <td >chaîne de caractères</td>
          <td >non</td>
          <td >Toute chaîne jusqu'à 128 caractères à un octet - il peut s'agir d'informations utiles à votre gestionnaire d'événements de point de repère, telles que le texte d'une superposition ou l'emplacement d'une image à afficher</td>
        </tr>
        <tr>
          <td ><code translate="No">force_stop</code></td>
          <td >booléen</td>
          <td >non</td>
          <td >Si la vidéo doit être mise en pause lorsque le point de repère est atteint ( <code translate="No">force_stop</code> est ignoré par Brightcove Player et il n'est actuellement pas prévu de le prendre en charge, mais vous pouvez mettre la vidéo en pause manuellement dans votre gestionnaire d'événements de point de repère)</td>
        </tr>
      </tbody>
    </table>

    <h3>Remarques</h3>

    <ul>
      <li id="note1" ><sup>[1]<strong></strong> </sup> Techniquement, le point de repère est actif jusqu'à ce que le point de repère suivant soit atteint - par conséquent, dans le tableau de points de repère que vous pouvez récupérer à partir du Brightcove Player, vous verrez un <code translate="No">startTime</code> et <code translate="No">endTime</code> aussi à un <code translate="No">time</code> pour le point de repère.</li>
    </ul>
  </section>

  <section class="bcls-section">
    <details>
      <summary>
        <h2 id="getCredentials">Obtenir des informations d'authentification</h2>
      </summary>
      <p>Pour utiliser le CMS API vous aurez besoin des informations d'identification appropriées.</p>

      <p>Le moyen le plus simple d'obtenir des informations d'identification dans la plupart des cas consiste à utiliser la section Authentification de l'API d'administration de Studio (nécessite des autorisations d'administrateur sur votre compte). Voir <a href="/general/managing-api-authentication-credentials.html">Gestion des informations d'authentification API</a> pour les détails. Dans la plupart des cas, vous souhaitez probablement simplement obtenir des autorisations pour tous CMS API opération:</p>

      <figure class="bcls-figure"><img class="bcls-image" alt="CMS API Permissions" src="//learning-services-media.brightcove.com/doc-assets/video-cloud-apis/cms-api/cms-permissions.png" />
        <figcaption class="bcls-caption--image">Autorisations CMS API</figcaption>
      </figure>

      <p>Si les autorisations dont vous avez besoin ne sont pas disponibles dans Studio, ou si vous préférez les obtenir directement à partir de OAuth API, utilisez votre choix de <strong>Obtenir les informations d'identification du client</strong> documents énumérés ci-dessous. Quelle que soit l'option que vous choisissez, vous devrez demander les autorisations de fonctionnement correctes. Les éléments suivants peuvent être utilisés avec cURL ou Postman pour obtenir toutes les autorisations pour l'CMS API:</p>

      <pre class="line-numbers">
          <code class="language-json" translate="No">"operations": [
            "video-cloud/video/all",
            "video-cloud/playlist/all",
            "video-cloud/sharing-relationships/all",
            "video-cloud/notifications/all"
          ]</code></pre>

      <ul>
        <li><a href="/oauth/guides/oauth-create-client-credentials-using-curl.html">OAuth: Obtenir les informations d'identification du client à l'aide de cURL</a></li>
        <li><a href="/oauth/guides/oauth-create-client-credentials-using-postman.html">OAuth: Obtenez les informations d'identification du client à l'aide de Postman</a></li>
      </ul>
    </details>
  </section>

  <section class="bcls-section">
    <h2 id="sample_app">Exemple d'application</h2>
    Retrouvez tout le code associé à cet exemple dans ce <a href="https://github.com/BrightcoveLearning/18030-cms-api-sample-add-cue-points">Dépôt GitHub</a>.

    <p data-height="1200" data-theme-id="34967" data-slug-hash="bvqJEp" data-default-tab="result" data-user="rcrooks1969" data-embed-version="2" data-pen-title="CMS API Sample: Add Cue Points" class="codepen">Voir le stylo <a href="https://codepen.io/team/rcrooks1969/pen/bvqJEp/">Exemple d'CMS API: Ajouter des points de repère</a> par Brightcove Learning Services ( <a href="https://codepen.io/rcrooks1969">@rcrooks1969</a> ) au <a href="https://codepen.io">Stylo de code</a>.</p>
    <script async src="https://static.codepen.io/assets/embed/ei.js"></script>
  </section>

  <section class="bcls-section">
    <details>
      <summary>
        <h2 id="Using_the_CodePen">Utiliser le CodePen</h2>
      </summary>

      <ul>
        <li>Basculez l'affichage réel de l'application en cliquant sur le bouton <strong>Résultat</strong> bouton.</li>
        <li>Clique le <strong>HTML/CSS/JS</strong> pour afficher UN des types de code.</li>
        <li>Cliquez sur <strong>Modifier sur CodePen</strong> dans le coin supérieur droit pour insérer ce CodePen dans votre propre compte.</li>
        <li>Retrouvez tout le code associé à cet exemple dans ce <a href="https://github.com/BrightcoveLearning/18030-cms-api-sample-add-cue-points">Dépôt GitHub</a>.</li>
      </ul>
    </details>
  </section>

  <section class="bcls-section">
    <details>
      <summary>
        <h2 id="proxy">Code proxy</h2>
      </summary>

      <p>Afin de créer votre propre version de l'exemple d'application sur cette page, vous devez créer et héberger votre propre proxy. (Les proxys utilisés par Brightcove Learning Services n'acceptent que les demandes des domaines Brightcove.) Un exemple de proxy, très similaire à celui que nous utilisons, mais sans les contrôles qui bloquent les demandes des domaines non Brightcove, peut être trouvé dans <a href="https://github.com/BrightcoveLearning/sample-proxy-apps">ce référentiel GitHub</a>. Vous y trouverez également des instructions de base pour l'utiliser et un guide plus élaboré pour créer des applications autour du proxy dans <a href="/getting-started/learning-guide-using-rest-apis.html">Utilisation des API REST</a>.</p>
    </details>
  </section>

</article>