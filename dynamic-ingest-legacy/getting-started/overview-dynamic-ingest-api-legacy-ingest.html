---
title: 'Aperçu: API d'ingestion dynamique'
description: '<p>Dans cette rubrique, vous apprendrez à utiliser les <span translate="No">API d'ingestion dynamique</span> pour télécharger et gérer le contenu vidéo. </p>
<aside class="bcls-aside bcls-aside--information">Notez que cet aperçu est pour l'ingestion dynamique avec le <strong>système d'ingestion hérité</strong>. Si vous avez un nouveau compte Video Cloud ou si vous avez converti votre compte en <strong>Livraison dynamique</strong> , aller à <a href="/dynamic-ingest/getting-started/overview-dynamic-ingest-api-dynamic-delivery.html">cette page à la place</a></aside>'

parent: 'Getting Started' 
grandparent: <span translate="No">API d'ingestion dynamique</span> Disposition héritée : mise en scène
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="API_functionality">Fonctionnalité API</h2>

    <p>L'API Dynamic Ingest (DI) de Brightcove est basée sur une fonctionnalité où les fichiers source vidéo sont téléchargés à partir de l'emplacement de stockage du client et des rendus spécifiés des fichiers source sont créés. (Il y a aussi une option pour <a href="/dynamic-ingest/getting-started/source-file-upload-api-dynamic-ingest.html">téléchargez vos fichiers sources</a> vers un emplacement temporaire où Dynamic Ingest peut y accéder.) La plate-forme est centrée sur le cloud, distribuée dans le monde entier et basée sur des pratiques modernes pour offrir une cohérence et une vitesse optimales.</p>

    <aside class="bcls-aside bcls-aside--information">Remarque : pour les types de vidéo segmentés (HLS et DASH), certains lecteurs ne gèrent pas le cas où les longueurs de flux audio et vidéo diffèrent de plus de la durée d'un segment. Si vous rencontrez cela, essayez d'utiliser une longueur de segment plus courte.</aside>
    </section>

    <section class="bcls-section">
    <h2 id="workflowoverview">Présentation du flux de travail</h2>

    <p>Un certain nombre de systèmes/technologies sont utilisés dans l'ensemble du transcodage et du stockage des médias. Elles sont:</p>

    <ul>
      <li><strong>API du système de gestion de contenu (CMS)</strong>: Crée un objet vidéo à utiliser dans l'API DI</li>
      <li><strong>Zencoder</strong>: Transcode la vidéo en créant plusieurs rendus</li>
      <li><strong>Amazon S3</strong>: Déplace le maître et les rendus vers le stockage, en fonction des paramètres de profil</li>
      <li><strong>Catalogue</strong>: Stocke les informations requises associées à la vidéo</li>
    </ul>

    <p>Après le transcodage initial, vous pouvez effectuer les actions suivantes sur le support :</p>

    <ul><!-- the following item on hold indefinitely --><!-- <li><strong>Delete</strong>: Delete, when needed, the master or all items</li> -->
      <li><strong>Re-transcoder</strong>: Créer de nouveaux rendus lorsque le maître est présent (erreur si le maître n'est pas présent)</li>
      <li><strong>Remplacer</strong>: Pointez sur un nouveau maître ou remplacez un maître existant</li>
    </ul>
    </section>

    <section class="bcls-section">
    <h2 id="operations">Opérations</h2>

    <p>Lorsque vous utilisez l'API DI, vous effectuez différentes opérations, telles que la lecture d'un profil d'ingestion et l'écriture d'informations d'ingestion sur votre compte. Voici une liste complète des opérations requises pour les tâches DI :</p>

    <ul>
      <li>video-cloud/video/create</li>
      <li>vidéo-nuage/vidéo/lire</li>
      <!-- for adding images -->
      <li>vidéo-nuage/vidéo/mise à jour</li>
      <li>video-cloud/ingest-profiles/profile/read</li>
      <li>video-cloud/ingest-profiles/account/read</li>
      <li>video-cloud/ingest-profiles/account/write</li>
      <li>video-cloud/ingest-profiles/profile/write</li>
      <li>video-cloud/upload-urls/read</li>
    </ul>

    <p>Pour obtenir les informations d'identification du client, utilisez le Studio <a href="/general/managing-api-authentication-credentials.html">outils d'administration</a> ou consultez l'un des documents suivants :</p>

    <ul>
      <li><a href="/oauth/guides/oauth-create-client-credentials-using-curl.html">OAuth : Obtenir les informations d'identification du client à l'aide de CURL</a></li>
      <li><a href="/oauth/guides/oauth-create-client-credentials-using-postman.html">OAuth : Obtenez les informations d'identification du client à l'aide de Postman</a></li>
    </ul>
    </section>

    <section class="bcls-section">
    <h2 id="best_practices">Les meilleures pratiques</h2>

    <aside class="bcls-aside bcls-aside--tip">
    <ul>
      <li>Une limite de 20 requêtes par seconde sur chaque compte pour le nombre total de requêtes à travers DI et le <span translate="No">API CMS</span> (Demandes d'API CMS ou d'API Ingest)</li>
      <li>Une limite de 100 tâches DI simultanées par compte (il existe des options supplémentaires pour les gros lots de demandes de comptes convertis en <a href="/dynamic-ingest/getting-started/overview-dynamic-ingest-api-dynamic-delivery.html">Livraison dynamique</a>)</li>
      <li>Ingérer du contenu inférieur à 100 Go par fichier (si vous devez ingérer des fichiers plus volumineux, veuillez contacter votre responsable de compte)</li>
      <li>Si vous ingérez des fichiers par lots, limitez les tâches de priorité normale simultanées à 100 et attendez la fin du traitement d'une tâche avant d'en ajouter une autre.</li>
      <li>Valider les modifications du profil d'ingestion avant d'ingérer des lots complets</li>
      <li>Vous devriez <strong>ne pas</strong> avoir des tâches de traitement en double pour le même actif. Un élément dans ce cas est défini comme un objet vidéo, une piste audio dans une langue spécifique, une piste de texte dans une langue spécifique ou un type d'image spécifique. Voici quelques exemples pour illustrer le propos :
      <ul>
        <li>INACCEPTABLE: Soumettez une demande d'ingestion pour un fichier vidéo, puis soumettez une autre demande d'ingestion vidéo avec le même ID vidéo avant la fin de la première tâche d'ingestion</li>
        <li>ACCEPTABLE: Soumettez une demande d'ingestion pour un fichier vidéo, puis soumettez une demande d'ingestion pour une piste de texte en anglais associée au même ID vidéo, puis soumettez une demande d'ingestion pour une image miniature avec le même ID vidéo</li>
        <li>ACCEPTABLE: Soumettez une tâche d'ingestion pour une piste de texte en anglais, puis soumettez une demande d'ingestion pour une piste de texte en espagnol en parallèle</li>
        <li>INACCEPTABLE: Soumettez une demande d'intégration d'une piste audio espagnole, puis soumettez immédiatement une demande d'intégration d'une autre piste audio espagnole sur le même ID vidéo</li>
      </ul>
      </li>
      <li>Les <code translate="No">profile </code> le champ pour les demandes d'ingestion est <strong>optionnel</strong>. Évitez de coder en dur le <code translate="No">profile </code> dans les applications et les intégrations - à la place, définissez le profil le plus couramment utilisé comme <strong>défaut</strong> pour le compte et omettre le champ, ou <a href="/ingest-profiles/references/reference.html#api-Profile-Get_All_Ingest_Profiles">récupérer les profils disponibles pour le compte</a> et forcer l'utilisateur à en choisir un.</li>
    </ul>
    </aside>
    </section>

    <section class="bcls-section">
    <h2 id="sourceLocations">Emplacements sources valides</h2>

    <p>L'ingestion dynamique peut extraire les fichiers vidéo source de : HTTP/HTTPS ou S3 - avec ou sans authentification</p>

    <p>Exemples:</p>

    <ul>
      <li>http://example.com/path/to/input.avi</li>
      <li>https://dl.dropboxusercontent.com/u/3641457/Bird_Titmouse.mp4</li>
      <li>s3://my-bucket/video.mp4</li>
    </ul>

    <aside class="bcls-aside bcls-aside--information">Remarques:
    <ul>
      <li>Les noms de fichiers vidéo (y compris l'extension) ne doivent pas dépasser 120 caractères à un octet (60 à deux octets). Si c'est le cas, la vidéo sera ingérée avec succès, mais vous ne pourrez pas la retranscoder plus tard</li>
      <li>Les noms d'hôte (pour les emplacements de fichiers ou les URL de rappel) ne doivent pas contenir de caractères de soulignement ou certains autres caractères de ponctuation ou de caractères spéciaux conformément aux spécifications de l'IETF. Voir <a href="https://en.wikipedia.org/wiki/Hostname#Restrictions_on_valid_hostnames">cet article Wikipédia</a> pour plus d'informations. Des erreurs seront renvoyées si les noms d'hôtes ne sont pas conformes à la norme IETF.</li>
      <li>L'ingestion dynamique peut <strong>ne pas</strong> ingérer des fichiers hébergés sur Google Drive, car Google Drive ne génère pas de liens directs vers des fichiers vidéo.</li>
    </ul>
    </aside>

    <h3>Remarques sur S3</h3>

    <p>Si vos vidéos se trouvent dans un compartiment S3 protégé, consultez <a href="/dynamic-ingest/general/using-dynamic-ingest-s3.html">Utilisation de l'ingestion dynamique avec S3</a> pour plus d'informations sur la configuration des autorisations pour Dynamic Ingest afin d'accéder à vos fichiers.</p>

    <p>Les avantages de l'utilisation de l'ingestion basée sur l'extraction incluent un flux de travail plus simple et un référentiel de vos propres masters numériques. Si ce n'est pas une option pour vous, vous pouvez également utiliser <a href="/dynamic-ingest/getting-started/source-file-upload-api-dynamic-ingest.html">Téléchargement du fichier source</a> pour télécharger vos vidéos et autres ressources vers un emplacement temporaire à partir duquel Dynamic Ingest peut y accéder.</p>
    </section>

    <section class="bcls-section">
    <h2 id="Source_file_names">Noms des fichiers sources</h2>

    <p>Toutes les URL d'entrée doivent être correctement codées selon <a href="https://tools.ietf.org/html/rfc3986#section-2.1">RFC 3986</a> lors de son envoi à Brightcove. Cela signifie que tout <a href="https://tools.ietf.org/html/rfc3986#section-2.2">caractères réservés</a> trouvés dans le chemin de l'url sont encodés en pourcentage (les espaces sont encodés pour <code translate="No">%20</code>), et tous les caractères réservés trouvés dans la requête de l'url sont encodés en pourcentage (les espaces sont encodés pour <code translate="No">+</code> ou <code translate="No">%20</code> , et <code translate="No">+</code> étant encodé pour <code translate="No">%2B</code>).</p>

    <p>UNE <strong>pré-signé</strong> S3 (<strong>v2</strong> contient <em>Signature</em>, <em>Expire</em> et <em>AWSAccessKeyId</em>, et <strong>v4</strong> contient <em>Algorithme X-Amz</em>, <em>X-Amz-Identifiant</em>, <em>X-Amz-Date</em>, <em>X-Amz-Expire</em>, <em>En-têtes signés X-Amz</em>, et <em>X-Amz-Signature</em>) ou <strong>CGV</strong> (contient <em>Signature</em>, <em>Expire</em>, et <em>Identifiant d'accès Google</em>) l'URL doit déjà être correctement encodée et <strong>peut être utilisé tel quel</strong>.</p>

    <aside class="bcls-aside bcls-aside--tip">Notez que les caractères Unicode à deux octets <strong>sommes</strong> autorisé dans les noms de fichiers.</aside>
    </section>

    <section class="bcls-section">
    <h2 id="ingestingVideos">Ingérer des vidéos</h2>

    <p>Deux appels d'API sont requis pour l'ingestion de vidéos :</p>

    <ol>
      <li>Appeler le <span translate="No">API CMS</span> pour créer un objet vidéo dans le système Video Cloud et obtenir son identifiant</li>
      <li>Appelez l'API DI pour fournir l'URL du fichier source vidéo et spécifiez le <a href="/ingest-profiles-legacy/references/standard-ingest-profiles-legacy-transcoding.html">ingérer le profil</a> à utiliser</li>
    </ol>

    <p>Un exemple d'ensemble de requêtes de base ressemblerait à ce qui suit :</p>

    <h3>Demande d'API CMS</h3>

    <dl>
      <dt>Méthode HTTP</dt>
      <dd>PUBLIER</dd>
      <dt>URL de demande</dt>
      <dd>https://cms.api.brightcove.com/v1/accounts/{account_id}/vidéos</dd>
      <dt>Corps de la demande</dt>
      <dd>
      <pre class="line-numbers">
    <code class="language-json" translate="No">{
    "name": "My new video"
    }
    </code>
    </pre>
      </dd>
    </dl>

    <p>Les données de réponse incluront la vidéo <code translate="No">id </code> , qui est utilisé dans la requête suivante.</p>

    <h3>Ingérer la demande d'API</h3>

    <dl>
      <dt>Méthode HTTP</dt>
      <dd>PUBLIER</dd>
      <dt>URL de demande</dt>
      <dd>https://ingest.api.brightcove.com/v1/accounts/{account_id}/vidéos/{video_id}/requêtes-d'ingestion</dd>
      <dt>Corps de la demande</dt>
      <dd>
      <pre class="line-numbers">
    <code class="language-json" translate="No">{
    "master": {
    "url": "http://host/master.mp4"
    },
    "profile": "high-resolution"
    }
    </code>
    </pre>
      </dd>
    </dl>

    <p>Voir le <a href="/dynamic-ingest/getting-started/overview-dynamic-ingest-api-dynamic-delivery.html">Démarrage rapide</a> pour plus de détails sur les appels d'API, et vous pouvez également voir un <a href="/dynamic-ingest-legacy/code-samples/dynamic-ingest-api-sample-ingesting-videos-legacy-ingest.html">échantillon de travail</a>.</p>

    <p>Pour <span translate="No">API CMS</span> appelez pour créer la vidéo dans le système Video Cloud, voir le <a href="/cms/getting-started/overview-cms-api.html#settingvalues">Présentation de l'API CMS</a>. Notez que la vidéo <code translate="No">name </code> est requis, et que le nom et toutes les autres chaînes incluses pour les métadonnées vidéo (telles que le <code translate="No">description </code> ) <strong>doit être codé en URI</strong>.</p>
    </section>

    <section class="bcls-section">
    <h2 id="sampleAssets">Exemples d'actifs</h2>

    <p>Brightcove Learning Services fournit quelques exemples d'actifs que vous pouvez utiliser pour expérimenter pour démarrer avec Dynamic Ingest. Ces éléments incluent de courtes vidéos, images et légendes WebVTT en plusieurs langues :</p>

    <ul>
      <li><a href="//solutions.brightcove.com/bcls/assets/videos/">Vidéos</a></li>
      <li>Images<a href="//solutions.brightcove.com/bcls/assets/images/"></a></li>
      <li><a href="//solutions.brightcove.com/bcls/assets/vtt/">Légendes WebVTT</a></li>
    </ul>
    </section>

    <section class="bcls-section">
    <h2 id="replaceVideo">Remplacer une vidéo</h2>

    <p>Pour remplacer une vidéo par une nouvelle version ou un nouvel ensemble de rendus, le <span translate="No">API d'ingestion dynamique</span> l'appel est exactement le même que pour <a href="/dynamic-ingest-legacy/code-samples/dynamic-ingest-api-sample-ingesting-videos-legacy-ingest.html">ingérer de nouvelles vidéos</a> - la seule différence est que vous n'avez pas besoin d'appeler au préalable le <span translate="No">API CMS</span> pour créer l'objet vidéo dans le système Video Cloud et obtenir un identifiant pour celui-ci. Si le fichier vidéo source à l'URL spécifiée est le même que celui ingéré à l'origine, vous obtiendrez simplement un nouvel ensemble de rendus. Si le fichier source est nouveau, vous remplacerez la vidéo existante. Toutes les vidéos resteront lisibles avec les rendus existants jusqu'à ce que le retranscodage soit terminé.</p>

    <p>Voir le <a href="/dynamic-ingest-legacy/code-samples/dynamic-ingest-api-sample-re-transcoding-videos-legacy-ingest.html">exemple de travail ici</a>.</p>
    </section>

    <section class="bcls-section">
    <h2 id="retranscode">Retranscoder une vidéo</h2>

    <p>Si vous avez choisi de <a href="https://studio.support.brightcove.com/admin/managing-ingest-profiles.html">archiver un master</a> lorsque vous avez ingéré la vidéo via le <span translate="No">API d'ingestion dynamique</span> ou le module de téléchargement Studio, vous pouvez également retranscoder la vidéo à partir du maître. Encore une fois, l'URL de la demande d'ingestion sera la même, mais le corps de la demande aura les éléments suivants :</p>

    <pre class="line-numbers">
    <code class="language-javascript" translate="No">// request
    POST /v1/accounts/{account_id}/videos/{video_id}/ingest-requests
    // request body
    {
    "master": { <strong><em>"use_archived_master": true</em></strong> },
    "profile": "videocloud-default-v1"
    }
    </code>
    </pre>

    <aside class="bcls-aside bcls-aside--information">
    <p>Remarques:</p>

    <ul>
      <li>Si le master n'a pas été archivé ou si la vidéo a été <em>ne pas</em> ingéré à l'aide du <span translate="No">API d'ingestion dynamique</span> ou le module de téléchargement, vous recevrez une erreur</li>
      <li>Les profils d'ingestion standard recommandés (videocloud-default-v1, screencast-1280, haute résolution, smart-player-transition, single-bitrate-standard et single-bitrate-high) archiveront tous le maître. Si vous utilisez un profil d'ingestion personnalisé, vous devez <a href="https://studio.support.brightcove.com/admin/managing-ingest-profiles.html">préciser que le maître</a> doit être archivé si vous souhaitez pouvoir retranscoder à partir du maître plus tard.</li>
      <li>Le maître est <strong>jamais</strong> modifié lors du retranscodage</li>
      <li>Les paramètres d'archivage et de distribution des masters sont <strong>jamais</strong> modifié lors du retranscodage</li>
      <li>Problème connu : lorsque vous retranscodez une vidéo à l'aide de l'ingestion dynamique, la date d'activation de la vidéo est mise à jour à la date actuelle. Si vous utilisez des listes de lecture intelligentes classées par date d'activation, cela affectera l'ordre des vidéos dans la liste de lecture.</li>
    </ul>
    </aside>
    </section>

    <section class="bcls-section">
    <h2 id="capture-images">Images</h2>

    <p>Vous pouvez utiliser le <span translate="No">API d'ingestion dynamique</span> pour capturer des affiches et des vignettes de votre vidéo, ou pour ajouter vos propres images. Pour plus de détails, voir <a href="/dynamic-ingest/ingest-guides/images-and-dynamic-ingest-api.html">Images et API d'ingestion dynamique</a>.</p>

    <aside class="bcls-aside bcls-aside--information">Si vos images seront extraites d'un compartiment S3 protégé, vous devrez définir une stratégie de compartiment pour permettre à Video Cloud d'accéder aux fichiers. Voir <a href="/dynamic-ingest/general/using-dynamic-ingest-s3.html#setPolicy">Utilisation de l'ingestion dynamique avec S3</a> pour les détails.</aside>
    </section>

    <section class="bcls-section">
    <h2 id="ingest_captions">Ingérer les sous-titres</h2>

    <p>Vous pouvez également ajouter des sous-titres WebVTT à votre vidéo ou les télécharger pour une vidéo existante à l'aide de Dynamic Ingest. Pour plus de détails, voir <a href="/dynamic-ingest/ingest-guides/ingesting-webvtt-files-text-trackscaptions.html">Ingérer des fichiers WebVTT</a>.</p>

    <aside class="bcls-aside bcls-aside--information">
    <p>Remarques:</p>

    <ol>
      <li>pour les images et les pistes de texte, seules les URL publiques HTTP ou HTTPS ou les URL S3 signées sont prises en charge</li>
      <li>pour les pistes de texte, Dynamic Ingest ne fait que les ajouter/ajouter à la liste vtt de la vidéo, même s'il s'agit d'une demande de retranscodage. le client doit utiliser le <span translate="No">API CMS</span> pour les gérer (mettre à jour/supprimer)</li>
      <li>Dynamic Ingest accepte jusqu'à 100 pistes de texte à la fois</li>
      <li>mime_type n'est pas pris en charge</li>
    </ol>
    </aside>
    </section>

    <section class="bcls-section">
    <h2 id="drm">DRM et HLSe</h2>

    <p>L'ingestion dynamique gère les vidéos qui utilisent l'un des types de DRM pris en charge par Brightcove. HLSe est également pris en charge.</p>
    </section>

    <section class="bcls-section">
    <h2 id="archiving">Archivage des rendus</h2>

    <p>Par défaut, tous les rendus vidéo et image sont automatiquement archivés. Si vous souhaitez désactiver l'archivage des rendus, <a href="https://supportportal.brightcove.com/">contacter l'assistance Brightcove</a>. Noter que <a href="/ingest-profiles/guides/archiving-masters.html">maîtres numériques</a> sont archivés si cela est spécifié dans le profil d'ingestion.</p>
    </section>

    <section class="bcls-section">
    <h2 id="notifications">Notifications</h2>

    <p>Vous pouvez spécifier une ou plusieurs URL de rappel pour recevoir des notifications des résultats du processus d'ingestion. Les URL que vous spécifiez doivent être destinées aux applications pouvant accepter les requêtes POST. Les notifications seront envoyées au format JSON.</p>

    <p>Les détails de la réception et de l'interprétation des notifications peuvent être trouvés dans <a href="/dynamic-ingest/general/notifications-dynamic-delivery-video-cloud.html">Notifications : Ingest dynamique et API CMS</a></p>
    </section>
    </article>