---
title: 'Ingérer des fichiers WebVTT'
description: "Dynamic Ingest API peut être utilisée pour ingérer des fichiers WebVTT (pour les légendes, les sous-titres, les chapitres, etc.) avec votre vidéo, ou séparément, une fois la vidéo ingérée. Pour les vidéos Dynamic Delivery, vous pouvez également ingérer des sous-titres SRT, DFXP ou SCC. Cette rubrique explique les détails de l'ajout de fichiers de pistes de texte à vos vidéos à l'aide de Dynamic Ingest API."
parent: 'Ingest Guides' 
grandparent: Dynamic Ingest API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="setup">Installer</h2>
    
    <p>La configuration des requêtes d'ingestion dynamique est la même, que vous ingérez une vidéo, des images, un fichier WebVTT ou tous:</p>
    
    <dl>
      <dt>URL de demande</dt>
      <dd>
      <pre>
        <code class="language-http" translate="No">https://ingest.api.brightcove.com/v1/accounts/<span class="bcls-input">account_id</span>/videos/<span class="bcls-input">video_id</span>/ingest-requests</code></pre>
      </dd>
      <dt>Authentification</dt>
      <dd>L'authentification nécessite un jeton d'accès transmis en tant que <code translate="No">Bearer</code> jeton dans un <code translate="No">Authorization</code> entête:
      <pre>
        <code class="language-bash" translate="No">Authorization: Bearer {access_token}</code></pre>
      </dd>
    </dl>
    </section>
    
    <section class="bcls-section">
    <h2 id="s3">Remarque sur S3</h2>
    
    <p>Si votre WebVTT doit être extrait d'un compartiment S3 protégé, vous devrez définir une stratégie de compartiment pour permettre à Video Cloud d'accéder aux fichiers. Voir <a href="/dynamic-ingest/general/using-dynamic-ingest-s3.html#setPolicy">Utilisation de Dynamic Ingest API avec S3</a> pour les détails.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="ingestWebVTT">Ingérer des fichiers WebVTT</h2>
    
    <p>Vous pouvez également ajouter des sous-titres WebVTT à votre vidéo ou les télécharger pour une vidéo existante à l'aide de Dynamic Ingest:</p>
    
    <h3>Ajouter des pistes de texte lors de l'ingestion vidéo</h3>
    
    <h4>URL de demande</h4>
    
    <pre>
        <code class="language-http" translate="No">https://ingest.api.brightcove.com/v1/accounts/<span class="bcls-input">account_id</span>/videos/<span class="bcls-input">video_id</span>/ingest-requests</code></pre>
    
    <h4>Méthode</h4>
    
    <p><code translate="No">POST</code></p>
    
    <h4>Exemple de corps de requête</h4>
    
    <pre class="line-numbers">
        <code class="language-json" translate="No">{
            "master": {
                "url":"http://learning-services-media.brightcove.com/videos/mp4/Water-Droplet.mp4"
            },
            "capture-images": false,
            "text_tracks": [
                {
        "url": "http://learning-services-media.brightcove.com/captions/for_video/Water-in-Motion.vtt",
        "srclang": "en",
        "kind": "captions",
        "label": "English",
        "default": true
                }
            ]
        }</code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="adding_srt_dfxp">Ajout/conversion de SRT ou DFXP</h2>
    
    <p>Pour <strong>Vidéos de diffusion dynamique uniquement</strong> , vous pouvez ingérer des fichiers SRT ou DFXP de la même manière. Le système d'ingestion de Video Cloud les convertira automatiquement au format WebVTT et les ajoutera à la vidéo.</p>
    
    <aside class="bcls-aside bcls-aside--information">Noter que:
    <ul>
      <li>La langue définie dans le fichier DFXP <code translate="No">xml:lang</code> doit correspondre à la valeur de l'appel d'ingestion pour <code translate="No">srclang</code>. Par exemple, si le <code translate="No">srclang</code> la valeur dans la demande d'ingestion est <code translate="No">en</code> , alors le fichier DFXP doit contenir <code translate="No">xml:lang="en"</code>.</li>
      <li>Le formatage personnalisé dans les fichiers SRT (comme la décoloration) est supprimé de la piste lorsqu'elle est convertie en WebVTT.</li>
    </ul>
    </aside>
    
    <pre class="line-numbers">
        <code class="language-json" translate="No">{
            "text_tracks": [
              {
                "url": "http://media.brightcove.com/captions/Water.dfxp",
                "srclang": "fr",
                "kind": "captions",
                "label": "français",
                "default": true
              }
            ]
          }</code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="add_to_existing_video">Ajouter des pistes de texte aux vidéos existantes</h2>
    
    <p>L'ajout de pistes de texte aux vidéos existantes est exactement la même, sauf que vous n'avez besoin d'aucune des informations vidéo ou du profil dans le corps de la demande.</p>
    
    <h4>URL de demande</h4>
    
    <pre>
        <code class="language-http" translate="No">https://ingest.api.brightcove.com/v1/accounts/<span class="bcls-input">account_id</span>/videos/<span class="bcls-input">video_id</span>/ingest-requests</code></pre>
    
    <h4>Méthode</h4>
    
    <p><code translate="No">POST</code></p>
    
    <h4>Exemple de corps de requête</h4>
    
    <pre class="line-numbers">
        <code class="language-json" translate="No">{
          "text_tracks": [
            {
              "url": "http://learning-services-media.brightcove.com/captions/for_video/Water-in-Motion.vtt",
              "srclang": "es",
              "kind": "captions",
              "label": "Español",
              "default": true
            }
          ]
        }</code></pre>
    
    <aside class="bcls-aside bcls-aside--information">
    <p>Remarques:</p>
    
    <ol>
      <li>Les noms de fichier de sous-titres ne doivent inclure que des lettres (majuscules ou minuscules), des chiffres, des tirets (-) et des traits de soulignement (_).</li>
      <li>Les <code translate="No">label</code> pour les sous-titres est utilisé par le lecteur Brightcove pour le menu de langue des sous-titres. La meilleure pratique consiste à utiliser le langage approprié pour l'étiquette. Par exemple: <code translate="No">français</code> pour <code translate="No">French</code> et ainsi de suite.</li>
      <li>Le texte des sous-titres doit être codé en UTF-8 pour s'afficher correctement dans les langues à double octet telles que le japonais et le coréen.</li>
      <li>La valeur par défaut n'est pas par piste, mais définie sur vrai pour toutes les pistes de la même langue (<code translate="No">srclang</code>).</li>
      <li>Pour les images et les pistes de texte, seules les URL publiques HTTP ou HTTPS ou les URL S3 signées sont prises en charge.</li>
      <li>pour les pistes de texte, Dynamic Ingest les ajoute/ajoute à la liste vtt de la vidéo même s'il s'agit d'une demande de réencodage. Vous devriez utiliser le <a href="/cms/managing-videos/using-cms-api-add-webvtt-captions-text-tracks.html">CMS API</a> pour les gérer (mettre à jour/supprimer).</li>
      <li>Dynamic Ingest accepte jusqu'à 100 pistes de texte à la fois.</li>
      <li>Même si <code translate="No">"mime_type": "text/vtt"</code> est généralement pris en charge pour WebVTT, Dynamic Ingest ne <strong>ne pas</strong> autorisent actuellement ce champ pour l'ingestion de pistes de texte.</li>
    </ol>
    </aside>
    
    <h3>Ajout de pistes de texte à une vidéo de ressource distante</h3>
    
    <p>Voir <a href="/cms/managing-videos/using-cms-api-remote-assets.html#addTextTracks">Ajout de pistes de texte aux vidéos d'actifs distants</a>.</p>
    </section>
    </article>
 