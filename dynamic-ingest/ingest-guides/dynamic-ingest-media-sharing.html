---
title: 'Intégration dynamique avec partage multimédia'
description: 'Pour partager des vidéos créées avec Dynamic Ingest, le <span translate="No">API CMS</span> est utilisé. Le partage multimédia doit être activé sur le compte de partage - contactez l'assistance Brightcove pour le vérifier. Le partage vidéo <span translate="No">API CMS</span> la demande peut être faite avant la fin du transcodage.'
parent: Ingest Guides 
grandparent: Dynamic Ingest API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="introduction">introduction</h2>
    
    <p>La partie d'ingestion dynamique de ce guide n'est pas différente du processus décrit dans d'autres documents et exemples, et l'ingestion de la vidéo à l'aide du module de téléchargement dans Studio peut également être utilisée. Cependant, dans un souci d'exhaustivité, <a href="https://general.support.brightcove.com/developer/concepts-set-curl.html">boucle</a> des exemples sont donnés pour les trois étapes ici :</p>
    
    <ol>
      <li><a href="#Create_video">Créer une vidéo</a></li>
      <li><a href="#Create_the_ingest_request">Créer la demande d'ingestion</a></li>
      <li><a href="#Share_video_with_CMS_API">Partager une vidéo avec l'API CMS</a></li>
    </ol>
    </section>
    
    <section class="bcls-section">
    <h2 id="Authentication">Authentification</h2>
    
    <p>Toutes les requêtes décrites dans cette rubrique nécessitent une authentification via le <a href="/oauth/index.html">Système Brightcove OAuth</a>.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="Create_video">Créer une vidéo</h2>
    
    <p>L'objet vidéo dans le système Video Cloud est créé à l'aide du <a href="/cms/references/reference.html#api-videoGroup-Create_Video">API CMS</a>. Voici un exemple de boucle :</p>
    
    <pre class="line-numbers">
    <code class="language-bash" translate="No">curl --request POST \
      --url https://ingest.api.brightcove.com/v1/accounts/<span class="bcls-input">MASTER_ACCOUNT_ID</span>/videos \
      --header 'authorization: Bearer OAUTH_TOKEN' \
      --header 'content-type: application/json' \
      --data '{"name": "Video to be shared"}'</code></pre>
    
    <p>Le JSON renvoyé inclura le nouvel identifiant vidéo :</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "id": "VIDEO_ID",
      "account_id": "ACCOUNT_ID",
      ...
    }</code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="Create_the_ingest_request">Créer la demande d'ingestion</h2>
    
    <p>La vidéo peut ensuite être ingérée à l'aide du <a href="/dynamic-ingest/references/reference.html#api-Ingest-Ingest_Media_Asset">API d'ingestion dynamique</a> avec l'identifiant vidéo renvoyé par le <span translate="No">API CMS</span> demander. Voici un exemple curl de la requête :</p>
    
    <pre class="line-numbers">
    <code class="language-bash" translate="No">curl --request POST \
      --url https://ingest.api.brightcove.com/v1/accounts/<span class="bcls-input">MASTER_ACCOUNT_ID</span>/videos/<span class="bcls-input">VIDEO_ID</span>/ingest-requests \
      --header 'authorization: Bearer <span class="bcls-input">OAUTH_TOKEN</span>' \
      --header 'content-type: application/json' \
      --data '{"master": {"url": "http://example.com/video.mp4"}}'</code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="Share_video_with_CMS_API">Partager une vidéo avec l'API CMS</h2>
    
    <p>Une fois la vidéo ingérée, vous pouvez la partager sur un autre compte en utilisant le <a href="/cms/code-samples/cms-api-sample-share-multiple-videos.html">API CMS</a>.</p>
    
    <p>Notez qu'avant de pouvoir partager une vidéo avec un autre compte, vous devez d'abord configurer la relation de partage - voir <a href="/cms/managing-videos/media-sharing-cms-api.html">Partage de médias avec l'API CMS</a> pour plus de détails.</p>
    
    <p>Voici un exemple curl de la requête :</p>
    
    <pre class="line-numbers">
    <code class="language-bash" translate="No">curl --request POST \
    --url 'https://cms.api.brightcove.com/v1/accounts/<span class="bcls-input">MASTER_ACCOUNT_ID</span>/videos/<span class="bcls-input">VIDEO_ID</span>/shares?=' \
    --header 'authorization: Bearer <span class="bcls-input">ACCESS_TOKEN</span>' \
    --header 'content-type: application/json' \
    --data '[
      {
        "id":"<span class="bcls-input">AFFILIATE_ACCOUNT_ID</span>"
      }
    ]'</code></pre>
    
    <p>La réponse inclut l'ID de la nouvelle vidéo dans le compte de partage :</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">[ {
      "video_id" : "5555086013001",
      "affiliate_id" : "1752604059001",
      "affiliate_video_id" : null,
      "status" : "PROCESSING",
      "shared_at" : "2017-09-01T12:04:39.911Z",
      "updated_at" : "2017-09-01T12:04:39.911Z"
    } ]</code></pre>
    </section>
    </article>
 