---
title: 'Mise en file d'attente de priorité d'ingestion de livraison dynamique'
description: 'Cette rubrique explique comment utiliser le paramètre de priorité pour optimiser le temps d'ingestion des vidéos à haute priorité.'

parent: 'Ingest Guides' 
grandparent: Dynamic Ingest API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="Introduction">introduction</h2>
    
    <p>Dynamic Delivery Ingest dispose désormais d'une fonctionnalité appelée <strong>File d'attente prioritaire</strong> qui permettent aux éditeurs de nous soumettre des travaux d'ingestion avec un paramètre de priorité souhaité pour influencer l'ordre et la rapidité de traitement du travail.</p>
    
    <aside>
    <p>Notez que la file d'attente prioritaire s'applique uniquement aux comptes activés pour <a href="/dynamic-ingest/getting-started/overview-dynamic-ingest-api-dynamic-delivery.html">Livraison dynamique</a>. Il ne peut pas être utilisé dans les comptes qui utilisent l'ancien système d'ingestion.</p>
    
    </aside>
    </section>
    
    <section class="bcls-section">
    <h2 id="how-dynamic-delivery-ingestion-currently-works">Fonctionnement de la file d'attente d'ingestion Dynamic Delivery</h2>
    
    <p>Avec la mise en file d'attente prioritaire normale, l'ingestion de livraison dynamique a une limite de 100 tâches actives par compte. Lorsque cette limite est dépassée, le système d'ingestion met en file d'attente des demandes supplémentaires pour un traitement ultérieur. La taille de la file d'attente a une limite distincte, et lorsque celle-ci est atteinte, elle rejette la demande d'ingestion au client (avec un code d'erreur 429). Lorsque les travaux sont terminés, la capacité est libérée et les travaux en file d'attente sont récupérés et traités un par un, dans l'ordre où ils ont été reçus.</p>
    
    <p>L'état de la vidéo dans le <span translate="No">API CMS</span> ne reflète pas que le travail a été mis en file d'attente - le statut sera <code translate="No">pending </code> si le travail est en cours de traitement ou en file d'attente.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="How_Priority_Queueing_affects_ingestion">Comment la file d'attente prioritaire affecte l'ingestion</h2>
    
    <p>La file d'attente prioritaire permet à l'utilisateur d'ajouter un <code translate="No">priority </code> indicateur à une demande d'ingestion. Les valeurs admissibles pour <code translate="No">priority </code> sommes <code translate="No">low </code> et <code translate="No">normal </code>. Toute autre valeur entraînera le rejet de la demande avec un code d'erreur 422. Lorsque l'utilisateur ne spécifie aucune priorité, la valeur par défaut de <code translate="No">normal </code> est utilisé. Voici une brève description de la façon dont Priority Queuing modifie la façon dont les travaux sont traités à partir de la file d'attente :</p>
    
    <ol>
      <li>S'il n'y a pas de travaux en file d'attente et qu'il existe une capacité pour exécuter un travail, le travail est exécuté immédiatement. Cela s'applique à la fois aux tâches de priorité faible et normale.</li>
      <li>S'il n'y a pas de capacité pour l'exécution d'un autre travail, le travail est mis en file d'attente.</li>
      <li>S'il y a des tâches dans la file d'attente, toutes les nouvelles tâches sont également mises en file d'attente. Cela signifie qu'un nouveau travail ne peut pas démarrer avant les travaux en file d'attente.</li>
      <li>Lorsqu'il est possible d'exécuter une autre tâche et qu'il y a des tâches en file d'attente, une tâche est extraite de la file d'attente :
      <ul>
        <li>S'il y a TOUT travail prioritaire normal dans la file d'attente, le travail prioritaire normal le plus ancien sera sélectionné.</li>
        <li>S'il n'y a AUCUNE tâche à priorité normale dans la file d'attente, la tâche à faible priorité la plus ancienne sera sélectionnée.</li>
      </ul>
      </li>
      <li>Les travaux de priorité normale et faible sont traités comme <strong>même</strong> pour combien de tâches en cours il peut y avoir. Le nombre total de travaux traités, quelle que soit leur priorité, est limité à 100 par compte.</li>
      <li>Il y a <strong>séparé</strong> quotas pour le nombre de tâches normales et de faible priorité pouvant être mises en file d'attente.</li>
    </ol>
    </section>
    
    <section class="bcls-section">
    <h2 id="What_to_watch_out_for">À quoi faire attention</h2>
    
    <h3>Les détails du rendu ont été modifiés après la soumission d'un travail</h3>
    
    <p>Lorsque vous créez une tâche d'ingestion dynamique, le profil d'ingestion spécifié est copié par le système d'ingestion dynamique, et ce profil <strong>copie</strong> sera utilisé pour le traitement même si le profil a été modifié depuis que le travail a été soumis.</p>
    
    <p>Pour les tâches à faible priorité, dont le traitement peut être retardé pendant un certain temps dans certains cas, <strong>les rendus spécifiés dans ce profil pourraient être modifiés</strong> avant que le travail ne soit réellement traité. Si cela se produit, les rendus utilisés pour traiter la vidéo seront les <strong>NOUVEAU</strong> définition de ces restitutions ; pas la définition des rendus au moment où le travail a été soumis.</p>
    
    <p>Si vous souhaitez <strong>garantie</strong> vous obtenez les rendus <strong>tels qu'ils ont été spécifiés lors de la soumission du travail</strong> , vous devez faire des copies des rendus et créer un nouveau profil qui référence ces rendus copiés, puis démarrer le processus d'intégration. (Vous pouvez retranscoder la vidéo avec le profil mis à jour si la vidéo a déjà été placée dans Video Cloud. N'oubliez pas que vous ne pouvez pas retranscoder la vidéo tant que le traitement de la tâche d'origine n'est pas terminé.)</p>
    
    <h3>Téléchargement du fichier source</h3>
    
    <p>Le téléchargement du fichier source supprimera les fichiers de ce compartiment S3 après 24 heures. Étant donné que les tâches de faible priorité peuvent ne pas être traitées pendant plus de 24 heures dans certains cas, le ou les fichiers peuvent avoir déjà été supprimés et le traitement échouera dans ce cas. <strong>Nous ne recommandons pas l'ingestion de faible priorité pour l'importation de fichiers sources</strong>.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="sample_request">Exemples de demandes</h2>
    
    <p>Vous trouverez ci-dessous un exemple de corps de requête d'ingestion de faible priorité :</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
    "master": {
    "url": "http://host/master.mp4"
    },
    "profile": "multi-platform-extended-static",
    <span class="bcls-highlight">"priority": "low"</span>,
    "callbacks": [
    "http://mydomain.com/di-callbacks.php"
    ]
    }
    </code>
    </pre>
    
    <p>Et voici un exemple de tâche prioritaire normale :</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
    "master": {
    "url": "http://host/master.mp4"
    },
    "profile": "multi-platform-extended-static",
    <span class="bcls-highlight">"priority": "normal"</span>,
    "callbacks": [
    "http://mydomain.com/di-callbacks.php"
    ]
    }
    </code>
    </pre>
    
    <p>A noter que depuis <code translate="No">normal </code> est la valeur par défaut, la requête précédente serait traitée exactement de la même manière que la suivante :</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
    "master": {
    "url": "http://host/master.mp4"
    },
    "profile": "multi-platform-extended-static",
    "callbacks": [
    "http://mydomain.com/di-callbacks.php"
    ]
    }
    </code>
    </pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="Using_the_priority_queue">Utilisation de la file d'attente prioritaire</h2>
    
    <p>D'après le dernier exemple de la section précédente, il devrait être clair que si vous <strong>ne pas</strong> Utilisez le <code translate="No">priority </code> dans vos tâches d'ingestion, elles continueront à être traitées exactement comme elles l'ont été.</p>
    
    <p>L'ajout du <code translate="No">priority </code> domaine vous profitera principalement si :</p>
    
    <ol>
      <li>Vous ingérez un assez grand nombre de vidéos</li>
      <li>Il est essentiel d'obtenir <em>certains</em> de vos vidéos en ligne dès que possible, alors qu'il n'y a pas d'urgence à en publier d'autres (car le contenu est moins important, ou vous n'envisagez pas de publier les vidéos immédiatement de toute façon)</li>
      <li>Vous avez des vidéos que vous souhaitez retranscoder, mais vous ne voulez pas que cela ralentisse l'ingestion de nouveau contenu</li>
    </ol>
    </section>
    
    <section class="bcls-section">
    <h2 id="How_low_priority_queue_works">Fonctionnement de la file d'attente à faible priorité</h2>
    
    <p>Cette section explique le fonctionnement de la file d'attente à faible priorité.</p>
    
    <p>Il n'y a aucune garantie quand les tâches normales ou de faible priorité seront démarrées. Cependant, les travaux à priorité normale seront toujours lancés avant les travaux à faible priorité.</p>
    
    <p>Si votre taux de soumission de travaux à priorité normale est stable et rapide, le démarrage des travaux à faible priorité peut prendre un temps considérable.</p>
    
    <p>Les tâches à faible priorité peuvent prendre plus de temps à démarrer et à traiter que la priorité normale pour la même vidéo.</p>
    </section>
    </article>
 