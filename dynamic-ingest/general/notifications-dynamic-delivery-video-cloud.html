---
title: 'Notifications pour l'ingestion dynamique'
description: 'Dans cette rubrique, vous découvrirez les notifications pour les tâches d'ingestion Dynamic Delivery soumises à l'aide de l'API Dynamic Ingest.'

parent: 'General Information' 
grandparent: Dynamic Ingest API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="diAPI">Notifications d'API d'ingestion dynamique</h2>
    
    <p>Vous pouvez spécifier une ou plusieurs URL de rappel pour recevoir des notifications des résultats du processus d'ingestion. Les URL que vous spécifiez doivent être destinées aux applications qui peuvent accepter les requêtes POST. Les notifications seront envoyées au format JSON.</p>
    
    <aside class="bcls-aside bcls-aside--information"> <strong>Remarques</strong>
    
    <ul>
      <li>Jusqu'à 10 abonnés pour les notifications d'erreurs sont pris en charge. Vous pouvez inclure plus de 10 URL auxquelles envoyer les notifications, mais seules les 10 premières seront traitées</li>
      <li>Les URL se terminant par une barre oblique (/) ne seront pas acceptées ; par exemple, l'url "https://my.domain.com/notification-receiver" fonctionne, mais "https://my.domain.com/notification-receiver/" ne fonctionne pas</li>
      <li>Alternativement, vous pouvez utiliser le <a href="/cms/references/reference.html#api-videoGroup-Get_Status_of_Ingest_Jobs">API d'état de l'API CMS</a> pour obtenir l'état des tâches d'ingestion pour une vidéo particulière.</li>
    </ul>
    </aside>
    
    <h3>Installer</h3>
    
    <p>Voici un exemple.</p>
    
    <ul>
      <li>Utilisateur avec l'identifiant de pub 57838016001</li>
      <li>Veut utiliser Dynamic Ingest pour télécharger un fichier vidéo source situé sur https://s3.amazonaws.com/bucket/mysourcevideo.mp4</li>
      <li>Veut télécharger un titre existant dans le catalogue avec l'ID vidéo 5199670523001</li>
      <li>Utilisation du profil multi-plateforme-standard-statique</li>
      <li>Veut recevoir des rappels sur deux points de terminaison situés respectivement à http://host1/path1 et http://host2/path2</li>
    </ul>
    
    <p>La requête DI ressemblerait à ceci :</p>
    
    <h4>Demande POST</h4>
    <textarea class="bcls-code" translate="No">https://ingest.api.brightcove.com/v1/accounts/57838016001/videos/5199670523001/ingest-requests</textarea>
    
    <h4>Corps de la demande</h4>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "master": {
        "url": "https://s3.amazonaws.com/bucket/mysourcevideo.mp4"
      },
      "profile": "multi-platform-standard-static",
      "callbacks": ["http://host1/path1”, “http://host2/path2”]
    }</code></pre>
    
    <h3>Exemple de notification</h3>
    
    <p>Les notifications sont envoyées en tant que requêtes POST avec la notification dans le corps de la requête en tant que JSON <sup> <strong> <a href="#note1">[1]</a> </strong> </sup>. Voici un ensemble complet de notifications d'une tâche d'ingestion vidéo typique :</p>
    
    <pre class="line-numbers"><code class="language-json" translate="No">{
      "entity": "default\/audio192",
      "entityType": "DYNAMIC_RENDITION",
      "version": "1",
      "action": "CREATE",
      "jobId": "d3ef8751-2b88-4141-95d5-83f0393aca07",
      "videoId": "5660367449001",
      "dynamicRenditionId": "default\/audio192",
      "language": "en",
      "variant": "main",
      "accountId": "57838016001",
      "status": "SUCCESS"
    }</code></pre>
    <pre class="line-numbers"><code class="language-json" translate="No">{
      "entity": "default\/audio64",
      "entityType": "DYNAMIC_RENDITION",
      "version": "1",
      "action": "CREATE",
      "jobId": "d3ef8751-2b88-4141-95d5-83f0393aca07",
      "videoId": "5660367449001",
      "dynamicRenditionId": "default\/audio64",
      "language": "en",
      "variant": "main",
      "accountId": "57838016001",
      "status": "SUCCESS"
    }</code></pre>
    <pre class="line-numbers"><code class="language-json" translate="No">{
      "entity": "default\/audio96",
      "entityType": "DYNAMIC_RENDITION",
      "version": "1",
      "action": "CREATE",
      "jobId": "d3ef8751-2b88-4141-95d5-83f0393aca07",
      "videoId": "5660367449001",
      "dynamicRenditionId": "default\/audio96",
      "language": "en",
      "variant": "main",
      "accountId": "57838016001",
      "status": "SUCCESS"
    }</code></pre>
    <pre class="line-numbers"><code class="language-json" translate="No">{
      "entity": "default\/audio128",
      "entityType": "DYNAMIC_RENDITION",
      "version": "1",
      "action": "CREATE",
      "jobId": "d3ef8751-2b88-4141-95d5-83f0393aca07",
      "videoId": "5660367449001",
      "dynamicRenditionId": "default\/audio128",
      "language": "en",
      "variant": "main",
      "accountId": "57838016001",
      "status": "SUCCESS"
    }</code></pre>
    <pre class="line-numbers"><code class="language-json" translate="No">{
      "entity": "5660367449001",
      "entityType": "DIGITAL_MASTER",
      "version": "1",
      "action": "CREATE",
      "jobId": "d3ef8751-2b88-4141-95d5-83f0393aca07",
      "videoId": "5660367449001",
      "accountId": "57838016001",
      "status": "SUCCESS"
    }</code></pre>
    <pre class="line-numbers"><code class="language-json" translate="No">{
      "entity": "default\/video450",
      "entityType": "DYNAMIC_RENDITION",
      "version": "1",
      "action": "CREATE",
      "jobId": "d3ef8751-2b88-4141-95d5-83f0393aca07",
      "videoId": "5660367449001",
      "dynamicRenditionId": "default\/video450",
      "bitrate": 451,
      "width": 480,
      "height": 270,
      "accountId": "57838016001",
      "status": "SUCCESS"
    }</code></pre>
    <pre class="line-numbers"><code class="language-json" translate="No">{
      "entity": "5660367449001",
      "entityType": "TITLE",
      "version": "1",
      "action": "PUBLISH",
      "jobId": "d3ef8751-2b88-4141-95d5-83f0393aca07",
      "videoId": "5660367449001",
      "accountId": "57838016001",
      "status": "SUCCESS"
    }</code></pre>
    <pre class="line-numbers"><code class="language-json" translate="No">{
      "entity": "thumbnail",
      "entityType": "ASSET",
      "version": "1",
      "action": "CREATE",
      "jobId": "d3ef8751-2b88-4141-95d5-83f0393aca07",
      "videoId": "5660367449001",
      "accountId": "57838016001",
      "status": "SUCCESS"
    }</code></pre>
    <pre class="line-numbers"><code class="language-json" translate="No">{
      "entity": "poster",
      "entityType": "ASSET",
      "version": "1",
      "action": "CREATE",
      "jobId": "d3ef8751-2b88-4141-95d5-83f0393aca07",
      "videoId": "5660367449001",
      "accountId": "57838016001",
      "status": "SUCCESS"
    }</code></pre>
    <pre class="line-numbers"><code class="language-json" translate="No">{
      "entity": "default\/video900",
      "entityType": "DYNAMIC_RENDITION",
      "version": "1",
      "action": "CREATE",
      "jobId": "d3ef8751-2b88-4141-95d5-83f0393aca07",
      "videoId": "5660367449001",
      "dynamicRenditionId": "default\/video900",
      "bitrate": 901,
      "width": 640,
      "height": 360,
      "accountId": "57838016001",
      "status": "SUCCESS"
    }</code></pre>
    <pre class="line-numbers"><code class="language-json" translate="No">{
      "entity": "default\/video700",
      "entityType": "DYNAMIC_RENDITION",
      "version": "1",
      "action": "CREATE",
      "jobId": "d3ef8751-2b88-4141-95d5-83f0393aca07",
      "videoId": "5660367449001",
      "dynamicRenditionId": "default\/video700",
      "bitrate": 700,
      "width": 640,
      "height": 360,
      "accountId": "57838016001",
      "status": "SUCCESS"
    }</code></pre>
    <pre class="line-numbers"><code class="language-json" translate="No">{
      "entity": "default\/video1200",
      "entityType": "DYNAMIC_RENDITION",
      "version": "1",
      "action": "CREATE",
      "jobId": "d3ef8751-2b88-4141-95d5-83f0393aca07",
      "videoId": "5660367449001",
      "dynamicRenditionId": "default\/video1200",
      "bitrate": 1204,
      "width": 960,
      "height": 540,
      "accountId": "57838016001",
      "status": "SUCCESS"
    }</code></pre>
    <pre class="line-numbers"><code class="language-json" translate="No">{
      "entity": "default\/video1700",
      "entityType": "DYNAMIC_RENDITION",
      "version": "1",
      "action": "CREATE",
      "jobId": "d3ef8751-2b88-4141-95d5-83f0393aca07",
      "videoId": "5660367449001",
      "dynamicRenditionId": "default\/video1700",
      "bitrate": 1703,
      "width": 960,
      "height": 540,
      "accountId": "57838016001",
      "status": "SUCCESS"
    }</code></pre>
    <pre class="line-numbers"><code class="language-json" translate="No">{
      "entity": "default\/video3500",
      "entityType": "DYNAMIC_RENDITION",
      "version": "1",
      "action": "CREATE",
      "jobId": "d3ef8751-2b88-4141-95d5-83f0393aca07",
      "videoId": "5660367449001",
      "dynamicRenditionId": "default\/video3500",
      "bitrate": 3498,
      "width": 1920,
      "height": 1080,
      "accountId": "57838016001",
      "status": "SUCCESS"
    }</code></pre>
    <pre class="line-numbers"><code class="language-json" translate="No">{
      "entity": "default\/video2000",
      "entityType": "DYNAMIC_RENDITION",
      "version": "1",
      "action": "CREATE",
      "jobId": "d3ef8751-2b88-4141-95d5-83f0393aca07",
      "videoId": "5660367449001",
      "dynamicRenditionId": "default\/video2000",
      "bitrate": 2000,
      "width": 1280,
      "height": 720,
      "accountId": "57838016001",
      "status": "SUCCESS"
    }</code></pre>
    <pre class="line-numbers"><code class="language-json" translate="No">{
      "entity": "default\/video3800",
      "entityType": "DYNAMIC_RENDITION",
      "version": "1",
      "action": "CREATE",
      "jobId": "d3ef8751-2b88-4141-95d5-83f0393aca07",
      "videoId": "5660367449001",
      "dynamicRenditionId": "default\/video3800",
      "bitrate": 3804,
      "width": 1920,
      "height": 1080,
      "accountId": "57838016001",
      "status": "SUCCESS"
    }</code></pre>
    <pre class="line-numbers"><code class="language-json" translate="No">{
      "entity": "5660367449001",
      "entityType": "TITLE",
      "version": "1",
      "action": "CREATE",
      "jobId": "d3ef8751-2b88-4141-95d5-83f0393aca07",
      "videoId": "5660367449001",
      "accountId": "57838016001",
      "status": "SUCCESS"
    }</code></pre>
    
    <h3>Champs de notification</h3>
    
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>Article</th>
          <th>La description</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><code translate="No">status</code></td>
          <td>sera <code translate="No">FAILED</code> si l'acquisition ou la création d'un rendu n'a pas abouti, <code translate="No">SUCCESS</code> si la demande aboutit</td>
        </tr>
        <tr>
          <td><code translate="No">accountId</code></td>
          <td>l'identifiant du compte</td>
        </tr>
        <tr>
          <td><code translate="No">videoId</code></td>
          <td>l'identifiant de la vidéo</td>
        </tr>
        <tr>
          <td><code translate="No">jobId</code></td>
          <td>l'identifiant de la tâche pour la demande d'ingestion dynamique</td>
        </tr>
        <tr>
          <td><code translate="No">entity</code></td>
          <td>soit le nom de l'entité, soit l'identifiant Video Cloud de la vidéo pour le TITRE</td>
        </tr>
        <tr>
          <td><code translate="No">entityType</code></td>
          <td>le type d'actif faisant l'objet de la déclaration - par exemple : TITLE (une vidéo), DIGITAL_MASTER, ASSET (un rendu, un fichier de sous-titres ou une image)</td>
        </tr>
        <tr>
          <td><code translate="No">bitrate</code></td>
          <td>débit pour un rendu</td>
        </tr>
        <tr>
          <td><code translate="No">width</code></td>
          <td>frame-width pour un rendu</td>
        </tr>
        <tr>
          <td><code translate="No">height</code></td>
          <td>hauteur du cadre pour un rendu</td>
        </tr>
        <tr>
          <td><code translate="No">errorMessage</code></td>
          <td>une explication de la raison pour laquelle l'ingestion a échoué si elle l'a fait</td>
        </tr>
        <tr>
          <td><code translate="No">version</code></td>
          <td>une chaîne toujours égale à <code translate="No">"1"</code></td>
        </tr>
        <tr>
          <td><code translate="No">action</code></td>
          <td>l'action qui s'est produite - par exemple, CREATE</td>
        </tr>
      </tbody>
    </table>
    </section>
    
    <section class="bcls-section">
    <h2 id="Interpreting_notifications">Interprétation des notifications</h2>
    
    <p>Une notification contenant <code translate="No">"action": "CREATE"</code> et <code translate="No">"status": "SUCCESS"</code> indique l'achèvement d'un processus.</p>
    
    <ul>
      <li>Si la <code translate="No">entityType</code> est <code translate="No">TITLE</code> , le traitement d'une vidéo ingérée est terminé.</li>
      <li>Pour <code translate="No">entityType: TITLE</code> , <code translate="No">action: PUBLISH</code> fait référence à l'heure à laquelle la vidéo est activée. Pour les vidéos qui sont immédiatement actives, ce sera approximativement le même temps que le <code translate="No">CREATE</code> temps.</li>
      <li>Si la <code translate="No">entityType</code> est <code translate="No">ASSET</code> , <code translate="No">DYNAMIC_RENDITION</code> ou <code translate="No">DIGITAL_MASTER</code> , un rendu, une image, un manifeste, un fichier WebVTT ou un master numérique a été ajouté avec succès à votre vidéo.</li>
    </ul>
    
    <aside class="bcls-aside bcls-aside--information">Pas de thé <code translate="No">"status": "SUCCESS"</code> sur un <strong>Titre</strong> indique que le traitement est terminé, mais ne signifie pas nécessairement que tous les rendus ont été créés avec succès. Pour déterminer si l'intégration dynamique des vidéos a réussi, consultez <a href="/dynamic-ingest/general/get-status-dynamic-ingest-requests-dynamic-delivery.html">Obtenir l'état des demandes d'ingestion dynamique</a>.</aside>
    </section>
    <section class="bcls-section">
      <h2 id="Firewalls">Pare-feu</h2>
  
      <p>Si votre organisation a une politique stricte concernant les sources de trafic entrant via votre pare-feu, nous autorisons les IP AWS us-east-1/Virginia. Ceci est sujet à changement, donc toutes les adresses IP AWS doivent être ajoutées à la liste blanche. Voir <a href="http://docs.aws.amazon.com/general/latest/gr/aws-ip-ranges.html">http://docs.aws.amazon.com/general/latest/gr/aws-ip-ranges.html</a> pour plus d'informations.</p>
        </section>
    </article>
 