---
title: 'Mise en œuvre des règles de livraison'
description: "Dans cette rubrique, vous apprendrez à mettre en œuvre les règles de livraison de Brightcove, qui vous permettent de personnaliser la façon dont vos médias sont livrés pour répondre à vos objectifs commerciaux."
parent: Getting started 
grandparent: Delivery Rules API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">Aperçu</h2>

<p>Les éditeurs doivent souvent modifier les caractéristiques du contenu de leurs manifestes multimédias pour des raisons à la fois techniques et commerciales. Pour répondre à ces besoins, Brightcove a créé un cadre dans lequel des règles peuvent être appliquées pour modifier le contenu du manifeste renvoyé par Dynamic Delivery.</p>

<p>Les règles de livraison sont constituées de conditions et d'actions.</p>
<ul>
  <li>
    <strong>Conditions</strong> - Conditions "Si" qui déclenchent une certaine action
  </li>
  <li>
    <strong>Actions</strong> - Paramètres "Alors" qui définissent comment le manifeste est modifié
  </li>
</ul>
<p>Pour plus de détails sur les règles de livraison, consultez ce qui suit:</p>
<ul>
  <li>
    <a href="/delivery-rules/getting-started/overview-delivery-rules.html">Aperçu: Règles de livraison</a>
  </li>
  <li>
    <a href="https://player.support.brightcove.com/playback/using-delivery-rules-with-bcp.html">Utilisation des règles de livraison avec Brightcove Player</a>
  </li>
  <li>
    <a href="https://sdks.support.brightcove.com/features/using-delivery-rules-with-sdks.html">Utilisation des règles de livraison avec les SDK natifs</a>
  </li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Account_setup">Configuration du compte</h2>

<p>Contactez votre responsable de compte pour en savoir plus sur les tarifs et activer cette fonctionnalité pour votre compte.</p>
</section>

<section class="bcls-section">
<h2 id="Applying_rules">Appliquer des règles</h2>

<p>L'organigramme suivant montre comment les règles de livraison sont appliquées.</p>
<figure class="bcls-figure">
  <img class="bcls-image--no-border" src="//learning-services-media.brightcove.com/doc-assets/delivery-rules/rules-diagram.png" alt="Delivery rules applied">
  <figcaption class="bcls-caption--image">Règles de livraison appliquées</figcaption>
</figure>
</section>

<section class="bcls-section">
<h2 id="Conditions">Conditions</h2>

<p>Les conditions « si », prises en charge dans la première phase, sont les suivantes:</p>

<ul>
  <li>
    <p>
      <strong>Demande explicite</strong> - Un identifiant de configuration est l'identifiant d'une action que vous avez créée. Vous utiliserez cet identifiant pour passer à le Playback API lors de l'exécution. Cet identifiant est mappé aux valeurs de configuration qui permettent aux services sous-jacents de prendre des décisions exploitées par le Playback API pour renvoyer les données de réponse appropriées.
    </p>
  </li>
  <li>
    <strong>Groupe de périphériques</strong> - Type de périphérique détecté par l'analyse de l'agent utilisateur. Les groupes actuellement pris en charge comprennent:
    <ul>
      <li>
        Android
      </li>
      <li>
        Apple TV
      </li>
      <li>
        chromecast
      </li>
      <li>
        ipad
      </li>
      <li>
        iphone
      </li>
      <li>
        bureau-chrome
      </li>
      <li>
        bureau-firefox
      </li>
      <li>
        bureau-safari
      </li>
      <li>
        fetchtv
      </li>
      <li>
        ios-autre
      </li>
      <li>
        roku-7/8
      </li>
      <li>
        smartphone-générique
      </li>
      <li>
        tablette-android
      </li>
      <li>
        tablette-allumer
      </li>
      <li>
        inconnu
      </li>
    </ul>
    &nbsp;
  </li>
  <li>
    <strong>Géographie</strong> - Localisation physique de l'appareil demandeur:
    <ul>
      <li>
        Continent
      </li>
      <li>
        Pays
      </li>
    </ul>
  </li>
</ul>

</section>

<section class="bcls-section">
<h2 id="Actions">Actions</h2>

<p>Les actions, ou paramètres « alors », pris en charge dans la première phase sont les suivants:</p>

<ul>
  <li>
    <p>
        <strong>CDN de diffusion multimédia</strong> - À partir des CDN configurés pour être utilisés dans un compte de livraison dynamique donné, le CDN à utiliser pour la livraison des segments multimédias.
    </p>
  </li>
  <li>
    <strong>Caractéristiques du rendu</strong> - Filtres basés sur les caractéristiques des rendus multimédias sous-jacents. Ceux-ci inclus:
    <ul>
      <li>
        Débit vidéo minimum
      </li>
      <li>
        Débit vidéo maximal
      </li>
      <li>
        Résolution vidéo minimale
      </li>
      <li>
        Résolution vidéo maximale
      </li>
      <li>
        Nombre maximal de rendus audio
      </li>
      <li>
        Nombre maximal de rendus vidéo
      </li>
      <li>
        Débit de la première vidéo
      </li>
      <li>
        Discontinuités
      </li>
    </ul>
  </li>
</ul>

</section>

<section class="bcls-section">
<h2 id="Scope">Portée</h2>

<p>Les actions peuvent être appliquées à deux niveaux :</p>
<ul>
  <li>
    <strong>Compte</strong> - Actions qui s'appliquent à toutes les demandes effectuées sur le compte d'un client spécifique
  </li>
  <li>
    <strong>Demande spécifique</strong> - Actions qui sont invoquées sur une requête spécifique
  </li>
</ul>

<p>
  Les actions seront appliquées dans l'ordre indiqué ci-dessus. Les actions ultérieures remplaceront les précédentes.
</p>

</section>

<section class="bcls-section">
<h2 id="Defining_rules">Définir des règles</h2>

<p>Utilisez l'Delivery Rules API pour personnaliser la livraison des médias.</p>

<h3 id="Delivery_Rules_API">Policy API de livraison</h3>
<p>
  Les <a href="https://apis.support.brightcove.com/delivery-rules/references/reference.html">Policy API de livraison</a> vous permet de définir des conditions et des actions pour contrôler votre diffusion multimédia.
</p>
<p>Les <a href="#API_Response">réponse</a> du Delivery Rules API contient un <code translate="No">conditions</code> déployer. Ce tableau vous permet de créer plusieurs <code translate="No">if</code> / <code translate="No">then</code> conditions où chaque <code translate="No">then</code> pointe vers un ou plusieurs <a href="#Response_body_for_actions">identifiants d'action</a>.</p>
<p>Même s'il n'y a pas de méthodes pour ajouter ou supprimer <code translate="No">conditions</code> , vous pouvez le faire en mettant à jour le <code translate="No">conditions</code> déployer.</p>

<!-- <aside class="bcls-aside bcls-aside--tip">Since each account has one conditions block, you will update the block to add or remove conditions.</aside> -->

<h3>URL de base</h3>
<p>
  L'URL de base de l'API est:
</p>
<pre><code class="language-http" translate="No">https://delivery-rules.api.brightcove.com</code></pre>

<h3>Chemin du compte</h3>
<p>
  Dans tous les cas, des demandes seront faites pour un compte Video Cloud spécifique. Ainsi, vous ajouterez toujours le terme comptes suivi de votre identifiant de compte à l'URL de base:
</p>
<pre><code class="language-http" translate="No">https://delivery-rules.api.brightcove.com/accounts/{accountID}</code></pre>

<h3>Autorisation</h3>
<p>
  Un jeton d'accès pour les demandes est requis et doit être présent dans l'en-tête Authorization:
</p>
<pre><code class="language-http" translate="No">Authorization: Bearer {access_token}</code></pre>
<p>
  Le jeton d'accès est un jeton d'accès OAuth2 temporaire qui doit être obtenu auprès du service Brightcove OAuth. Pour plus de détails sur la façon d'obtenir les informations d'identification client et de les utiliser pour récupérer des jetons d'accès, consultez le <a href="/oauth/getting-started/overview-oauth-api-v4.html">Présentation de Brightcove OAuth</a>.
</p>

<h3>Autorisations</h3>
<p>
  Les demandes à l'API des droits de lecture doivent être effectuées à partir de <a href="/oauth/getting-started/overview-oauth-api-v4.html">informations d'identification du client</a> avec les autorisations suivantes :
</p>
<ul>
  <li>
    <code translate="No">video-cloud/delivery-rules/read</code>
  </li>
  <li>
    <code translate="No">video-cloud/delivery-rules/all</code>
  </li>
</ul>

<h3>Gérer les règles</h3>
<p>
  L'Delivery Rules API prend en charge les requêtes suivantes. Pour plus de détails sur l'API, consultez le <a href="https://apis.support.brightcove.com/delivery-rules/references/reference.html">Référence du Delivery Rules API</a>.
</p>

<h4>Obtenir les règles de livraison</h4>
<p>
  Utilisez la requête GET suivante pour récupérer la dernière version des règles de livraison pour un compte.
</p>
<pre><code class="language-http" translate="No">GET /accounts/{accountID}</code></pre>

<h5 id="API_Response">Réponse de l'API</h5>
<p>
  Voici le corps de la réponse. Notez que les règles de livraison contiennent un ensemble de conditions et un ensemble d'actions.
</p>
<pre class="line-numbers"><code class="language-json" translate="No">{
  &quot;conditions&quot;: [
    {
      &quot;name&quot;: &quot;MyCondition1&quot;,
      &quot;if&quot;: {
        &quot;device_group&quot;: [
          &quot;ipad&quot;
        ],
        &quot;request_country&quot;: [
          &quot;string&quot;
        ],
        &quot;request_continent&quot;: [
          &quot;AF&quot;
        ]
      },
      &quot;then&quot;: [
        &quot;MyAction1&quot;
      ]
    }
  ],
  &quot;actions&quot;: [
    {
      &quot;id&quot;: &quot;44c91a1d-71f1-40b4-b9cf-3abcd12345&quot;,
      &quot;properties&quot;: {
        &quot;min_video_bitrate&quot;: 0,
        &quot;max_video_bitrate&quot;: 0,
        &quot;first_video_bitrate&quot;: 0,
        &quot;min_video_resolution&quot;: &quot;string&quot;,
        &quot;max_video_resolution&quot;: &quot;string&quot;,
        &quot;max_video_renditions&quot;: 0,
        &quot;max_audio_renditions&quot;: 0,
        &quot;preferred_cdn_provider&quot;: &quot;string&quot;,
        &quot;preferred_cdn_domain&quot;: &quot;string&quot;,
      &quot;video_codecs&quot;: [
        &quot;string&quot;
      ],
      &quot;audio_codecs&quot;: [
        &quot;string&quot;
      ]
    }
    }
  ]
}</code></pre>
<br />

<h4>Obtenir les conditions</h4>
<p>
  Utilisez la requête GET suivante pour récupérer les conditions d'un compte.
</p>
<pre><code class="language-http" translate="No">GET /accounts/{accountID}/conditions</code></pre>
<h5>Réponse de l'API</h5>
<p>
  Voici le corps de la réponse.
</p>
<pre class="line-numbers"><code class="language-json" translate="No">[
  {
    &quot;name&quot;: &quot;MyCondition1&quot;,
    &quot;if&quot;: {
      &quot;device_group&quot;: [
        &quot;ipad&quot;
      ],
      &quot;request_country&quot;: [
        &quot;string&quot;
      ],
      &quot;request_continent&quot;: [
        &quot;AF&quot;
      ]
    },
    &quot;then&quot;: [
      &quot;44c91a1d-71f1-40b4-b9cf-3abcd12345&quot;
    ]
  }
]</code></pre>
<br />

<h4>Conditions de mise à jour</h4>
<p>
  Utilisez la requête PUT suivante pour mettre à jour les conditions d'un compte.
</p>
<pre class="line-numbers"><code class="language-http" translate="No">PUT /accounts/{accountID}/conditions
  Content-Type: application/json
  Authorization: Bearer {access_token}
  Body: {conditions object}
</code></pre>
<!-- <p>
  For a list of valid fields, see the <a href="#Request_body_for_conditions">Request body for conditions</a> section.
</p> -->
<h4 id="Request_body_for_conditions">Organisme de demande de conditions</h4>
<p>
  Voici le corps de la demande de conditions. Notez qu'il s'agit d'un tableau d'objets de condition.
</p>
<pre class="line-numbers"><code class="language-json" translate="No">[
  {
    &quot;name&quot;: &quot;MyCondition1&quot;,
    &quot;if&quot;: {
      &quot;device_group&quot;: [
        &quot;ipad&quot;
      ],
      &quot;request_country&quot;: [
        &quot;string&quot;
      ],
      &quot;request_continent&quot;: [
        &quot;AF&quot;
      ]
    },
    &quot;then&quot;: [
      &quot;44c91a1d-71f1-40b4-b9cf-3abcd12345&quot;
    ]
  }
]</code></pre>
<br />
<p>
  Voici les détails des champs pour les conditions:
</p>
<table class="bcls-table">
  <thead class="bcls-table__head">
    <tr>
      <th>Champ</th>
      <th>Taper</th>
      <th>La description</th>
    </tr>
  </thead>
  <tbody class="bcls-table__body">
    <tr>
      <td><code translate="No">name</code></td>
      <td>Chaîne de caractères</td>
      <td>Identifiant unique de la condition</td>
    </tr>
    <tr>
      <td><code translate="No">device_group</code></td>
      <td>Chaîne de caractères</td>
      <td>Tableau des types de périphériques détectés par l'analyse de l'agent utilisateur</td>
    </tr>
    <tr>
      <td><code translate="No">request_country</code></td>
      <td>Chaîne de caractères</td>
      <td>Tableau de codes de pays à deux lettres</td>
    </tr>
    <tr>
      <td><code translate="No">request_continent</code></td>
      <td>Chaîne de caractères</td>
      <td>Tableau de codes continents à deux lettres</td>
    </tr>
    <tr>
      <td><code translate="No">then</code></td>
      <td>Chaîne de caractères</td>
      <td>Identifiant unique de l'action associée</td>
    </tr>
  </tbody>
</table>

<h4>Créer une action</h4>
<p>
  Utilisez la requête POST suivante pour créer des actions pour un compte.
</p>
<pre class="line-numbers"><code class="language-http" translate="No">POST /accounts/{accountID}/actions
  Content-Type: application/json
  Authorization: Bearer {access_token}
  Body: {actions object}
</code></pre>
<!-- <p>
  For a list of valid fields, see the <a href="#Request_body_for_actions">Request body for actions</a> section.
</p> -->
<h4 id="Request_body_for_actions">Corps de demande pour les actions</h4>
<p>
  Voici le corps de la requête pour les actions.
</p>
<pre class="line-numbers"><code class="language-json" translate="No">{
    &quot;properties&quot;: {
      &quot;min_video_bitrate&quot;: 0,
      &quot;max_video_bitrate&quot;: 0,
      &quot;first_video_bitrate&quot;: 0,
      &quot;min_video_resolution&quot;: &quot;string&quot;,
      &quot;max_video_resolution&quot;: &quot;string&quot;,
      &quot;max_video_renditions&quot;: 0,
      &quot;max_audio_renditions&quot;: 0,
      &quot;preferred_cdn_provider&quot;: &quot;string&quot;,
      &quot;preferred_cdn_domain&quot;: &quot;string&quot;,
      &quot;video_codecs&quot;: [
        &quot;string&quot;
      ],
      &quot;audio_codecs&quot;: [
        &quot;string&quot;
      ]
  }
}</code></pre>

<p>
  Voici les détails des champs pour les actions:
</p>
<table class="bcls-table">
  <thead class="bcls-table__head">
    <tr>
      <th>Champ</th>
      <th>Taper</th>
      <th>La description</th>
    </tr>
  </thead>
  <tbody class="bcls-table__body">
    <tr>
      <td><code translate="No">properties</code></td>
      <td>Objet</td>
      <td>Un objet de propriétés définies pour une action spécifique</td>
    </tr>
    <tr>
      <td>,<code translate="No">min_video_bitrate</code> <br/>
      <code translate="No">max_video_bitrate</code></td>
      <td>Entier</td>
      <td>Définir le débit binaire vidéo minimum ou maximum autorisé (kbps)</td>
    </tr>
    <tr>
      <td><code translate="No">first_video_bitrate</code></td>
      <td>Entier</td>
      <td>Définir le débit pour la première vidéo (kbps)</td>
    </tr>
    <tr>
      <td>,<code translate="No">min_video_resolution</code> <br/><code translate="No">max_video_resolution</code></td>
      <td>Chaîne de caractères</td>
      <td>Définir la résolution vidéo minimale ou maximale autorisée (LxH)</td>
    </tr>
    <tr>
      <td><code translate="No">max_video_renditions</code></td>
      <td>Entier</td>
      <td>Définir le nombre maximal de rendus vidéo</td>
    </tr>
    <tr>
      <td><code translate="No">max_audio_renditions</code></td>
      <td>Entier</td>
      <td>Définir le nombre maximal de rendus audio</td>
    </tr>
    <tr>
      <td><code translate="No">preferred_cdn_provider</code></td>
      <td>Chaîne de caractères</td>
      <td>Définir le fournisseur CDN préféré</td>
    </tr>
    <tr>
      <td><code translate="No">preferred_cdn_domain</code></td>
      <td>Chaîne de caractères</td>
      <td>Définir le domaine CDN préféré</td>
    </tr>
    <tr>
      <td><code translate="No">video_codecs</code></td>
      <td>Chaîne de caractères</td>
      <td>Tableau de codecs vidéo</td>
    </tr>
    <tr>
      <td><code translate="No">audio_codecs</code></td>
      <td>Chaîne de caractères</td>
      <td>Tableau de codecs audio</td>
    </tr>
  </tbody>
</table>

<h4 id="Response_body_for_actions">Réponse de l'API pour les actions</h4>
<p>
  Voici le corps de la requête pour les actions.
</p>
<pre class="line-numbers"><code class="language-json" translate="No">{
    &quot;id&quot;: &quot;44c91a1d-71f1-40b4-b9cf-3abcd12345&quot;,
    &quot;properties&quot;: {
      &quot;min_video_bitrate&quot;: 0,
      &quot;max_video_bitrate&quot;: 0,
      &quot;first_video_bitrate&quot;: 0,
      &quot;min_video_resolution&quot;: &quot;string&quot;,
      &quot;max_video_resolution&quot;: &quot;string&quot;,
      &quot;max_video_renditions&quot;: 0,
      &quot;max_audio_renditions&quot;: 0,
      &quot;preferred_cdn_provider&quot;: &quot;string&quot;,
      &quot;preferred_cdn_domain&quot;: &quot;string&quot;,
      &quot;video_codecs&quot;: [
       &quot;string&quot;
      ],
      &quot;audio_codecs&quot;: [
       &quot;string&quot;
      ]
  }
}</code></pre>

<p>
  En plus des champs d'actions dans la demande, la réponse de l'API inclut le champ généré suivant:
</p>
<table class="bcls-table">
  <thead class="bcls-table__head">
    <tr>
      <th>Champ</th>
      <th>Taper</th>
      <th>La description</th>
    </tr>
  </thead>
  <tbody class="bcls-table__body">
    <tr>
      <td><code translate="No">id</code></td>
      <td>Chaîne de caractères</td>
       <td>Un identifiant unique généré par le système pour l'action. C'est le <code translate="No">actionID</code> utilisé dans les méthodes de mise à jour et de suppression.</td>
    </tr>
  </tbody>
</table>

<h4>Obtenir des actions</h4>
<p>
  Utilisez la requête GET suivante pour récupérer les actions pour un compte.
</p>
<pre><code class="language-http" translate="No">GET /accounts/{accountID}/actions</code></pre>
<h5>Réponse de l'API</h5>
<p>
  Voir le <a href="#Response_body_for_actions">Réponse de l'API pour les actions</a>.
</p>

<h4>Obtenir une action</h4>
<p>
  Utilisez la requête GET suivante pour récupérer une action spécifique pour un compte.
</p>
<pre><code class="language-http" translate="No">GET /accounts/{accountID}/actions/{actionID}</code></pre>
<h5>Réponse de l'API</h5>
<p>
  Voir le <a href="#Response_body_for_actions">Réponse de l'API pour les actions</a>.
</p>

<h4>Mettre à jour une action</h4>
<p>
  Utilisez la requête PUT suivante pour mettre à jour une action pour un compte.
</p>
<pre class="line-numbers"><code class="language-http" translate="No">PUT /accounts/{accountID}/actions/{actionID}
  Content-Type: application/json
  Authorization: Bearer {access_token}
  Body: {actions object}
</code></pre>
<h5>Demande d'API</h5>
<p>
  Voici un exemple de corps de requête pour mettre à jour les actions.
</p>
<aside class="bcls-aside bcls-aside--information">Les <code translate="No">id</code> dans l'exemple JSON ci-dessous se trouve l'ID d'action. Cela doit correspondre à l'ID d'action dans le chemin.</aside>

<pre class="line-numbers"><code class="language-json" translate="No">{
  &quot;id&quot;: &quot;44c91a1d-71f1-40b4-b9cf-3edb94645943&quot;,
  &quot;properties&quot;: {
   &quot;custom_properties&quot;: {
    &quot;generate_thumbnails&quot;: false,
    &quot;hls_iframes&quot;: true
   }
  }
 }</code></pre>
<h5>Réponse de l'API</h5>
<p>
  Voici un exemple de réponse pour les actions mises à jour.
</p>
<pre class="line-numbers"><code class="language-json" translate="No">{
  &quot;id&quot;: &quot;44c91a1d-71f1-40b4-b9cf-3edb94645943&quot;,
  &quot;properties&quot;: {
   &quot;custom_properties&quot;: {
    &quot;generate_thumbnails&quot;: false,
    &quot;hls_iframes&quot;: true
   }
  }
 }</code></pre>


<h4>Supprimer une action</h4>
<p>
  Utilisez la demande DELETE suivante pour supprimer une action pour un compte.
</p>
<pre class="line-numbers"><code class="language-http" translate="No">DELETE /accounts/{accountID}/actions/{actionID}</code></pre>


<!-- <p>
  Here is an example of all of the fields you can include in the request body:
</p>
<pre class="line-numbers"><code class="language-json" translate="No">{
  &quot;geo&quot;: {
  &quot;allowed_countries&quot;: [
    &quot;MX&quot;,
    &quot;US&quot;
  ],
  &quot;blocked_countries&quot;: [
    &quot;JP&quot;,
    &quot;CN&quot;
  ],
  &quot;allowed_zip_codes&quot;: [
    &quot;US-90210&quot;
  ],
  &quot;blocked_zip_codes&quot;: [
    &quot;US-72810&quot;
  ],
  &quot;allowed_dmas&quot;: [
    501
  ],
  &quot;blocked_dmas&quot;: [
    803
  ]
},
&quot;allowed_domains&quot;: [
  &quot;www.google.com&quot;,
  &quot;www.brightcove.com&quot;
],
&quot;blocked_domains&quot;: [
  &quot;www.ooyala.com&quot;
],
&quot;start_time&quot;: 1572905011,
&quot;end_time&quot;: 1672905011,
&quot;allowed_ips&quot;: [
  &quot;192.168.1.1&quot;
],
&quot;blocked_ips&quot;: [
  &quot;192.168.1.1&quot;
],
&quot;allowed_days&quot;: [
  &quot;mon&quot;,
  &quot;tue&quot;
],
&quot;allowed_hours&quot;: [
  &quot;5-6&quot;
],
&quot;allow_insecure&quot;: true,
&quot;disabled&quot;: false,
&quot;name&quot;: &quot;Optional playback right name&quot;
}
</code></pre> -->



</section>

<section class="bcls-section">
<h2 id="Limitations">Limites</h2>

<p>Il existe quelques limitations connues lors de l'utilisation des règles de livraison:</p>
<ul>
  <!-- <li>
    <strong>CDN Providers</strong> - A customer may only have one CDN configuration from a given provider. For instance, it will be possible to switch between Akamai and Cloudfront, but not between two separate Akamai configurations.
  </li> -->
  <li>
    <strong>Contenu multimédia</strong> - Les règles de livraison ne fonctionneront pas avec les vidéos Smooth ou pMP4.
  </li>
  <li>
    <strong>Contenu multimédia</strong> - Les règles de livraison ne fonctionneront pas avec les vidéos en direct.
  </li>
  <li>
    <strong>Audio seulement</strong> - Les règles de livraison avec les annonces côté serveur (SSAI) activées nécessitent à la fois du contenu vidéo et audio. Il s'agit d'une restriction SSAI.
  </li>
</ul>

</section>

</article>